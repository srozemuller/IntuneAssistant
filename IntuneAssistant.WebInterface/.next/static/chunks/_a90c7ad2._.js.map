{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/lib/errors.ts"],"sourcesContent":["export class UserConsentRequiredError extends Error {\n    consentUrl: string;\n\n    constructor(url: string, message: string = 'Additional permissions required') {\n        super(message);\n        this.name = 'UserConsentRequiredError';\n        this.consentUrl = url;\n    }\n}"],"names":[],"mappings":";;;;;;AAAO,MAAM,iCAAiC;IAG1C,YAAY,GAAW,EAAE,UAAkB,iCAAiC,CAAE;QAC1E,KAAK,CAAC,UAHV,+KAAA,cAAA,KAAA;QAII,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,UAAU,GAAG;IACtB;AACJ","debugId":null}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/lib/apiRequest.ts"],"sourcesContent":["// lib/apiRequest.ts\nimport { UserConsentRequiredError } from '@/lib/errors';\n\nexport class ApiError extends Error {\n    public correlationId?: string | null;\n    public status?: number;\n\n    constructor(message: string, correlationId?: string | null, status?: number) {\n        super(message);\n        this.name = 'ApiError';\n        this.correlationId = correlationId;\n        this.status = status;\n    }\n}\n\nexport async function apiRequest<T>(url: string, options: RequestInit = {}, token?: string): Promise<T> {\n    try {\n        // Add authorization header if token is provided\n        const headers = {\n            'Content-Type': 'application/json',\n            ...options.headers,\n            ...(token && { Authorization: `Bearer ${token}` })\n        };\n\n        const response = await fetch(url, {\n            ...options,\n            headers\n        });\n\n        // Extract correlation ID from response headers ALWAYS\n        const correlationId = response.headers.get('x-correlation-id') ||\n            response.headers.get('X-Correlation-ID') ||\n            response.headers.get('correlation-id') ||\n            response.headers.get('Correlation-ID');\n\n        // Handle non-JSON responses\n        const contentType = response.headers.get('content-type');\n        const isJson = contentType && contentType.includes('application/json');\n\n        // Parse response\n        const data = isJson ? await response.json() : await response.text();\n\n        // Handle 401 specifically for consent\n        if (response.status === 401) {\n            console.log(\"401 response detected:\", JSON.stringify(data, null, 2));\n\n            if (data?.message?.url) {\n                console.log(\"Consent URL found:\", data.message.url);\n                throw new UserConsentRequiredError(\n                    data.message.url,\n                    data.message.message || \"Additional permissions required\"\n                );\n            }\n\n            const consentUrl = data?.consentUrl || data?.message?.url;\n            if (consentUrl) {\n                console.log(\"Consent URL detected:\", consentUrl);\n                throw new UserConsentRequiredError(consentUrl);\n            }\n        }\n\n        // Handle ALL other error status codes (400, 500, etc.)\n        if (!response.ok) {\n            console.log(`Error ${response.status} response data:`, JSON.stringify(data, null, 2));\n\n            // Debug: Log ALL headers to see what we actually have\n            console.log(\"=== ALL RESPONSE HEADERS ===\");\n            for (const [key, value] of response.headers) {\n                console.log(`${key}: ${value}`);\n            }\n\n\n\n            // Create error message based on status code, not response content\n            const errorMessage = `API request failed: ${response.status} - ${response.statusText || 'HTTP Error'}`;\n\n            console.log(\"Final error message:\", errorMessage);\n            throw new ApiError(errorMessage, correlationId, response.status);\n        }\n\n        // Success case\n        console.log(\"Success response, correlation ID:\", correlationId);\n        return data as T;\n    } catch (error) {\n        // Re-throw specific errors\n        if (error instanceof UserConsentRequiredError || error instanceof ApiError) {\n            throw error;\n        }\n\n        console.error(\"API request error:\", error);\n        throw error;\n    }\n}\n"],"names":[],"mappings":"AAAA,oBAAoB;;;;;;;;AACpB;;;AAEO,MAAM,iBAAiB;IAI1B,YAAY,OAAe,EAAE,aAA6B,EAAE,MAAe,CAAE;QACzE,KAAK,CAAC,UAJV,+KAAO,iBAAP,KAAA,IACA,+KAAO,UAAP,KAAA;QAII,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,MAAM,GAAG;IAClB;AACJ;AAEO,eAAe,WAAc,GAAW;QAAE,UAAA,iEAAuB,CAAC,GAAG;IACxE,IAAI;QACA,gDAAgD;QAChD,MAAM,UAAU;YACZ,gBAAgB;YAChB,GAAG,QAAQ,OAAO;YAClB,GAAI,SAAS;gBAAE,eAAe,AAAC,UAAe,OAAN;YAAQ,CAAC;QACrD;QAEA,MAAM,WAAW,MAAM,MAAM,KAAK;YAC9B,GAAG,OAAO;YACV;QACJ;QAEA,sDAAsD;QACtD,MAAM,gBAAgB,SAAS,OAAO,CAAC,GAAG,CAAC,uBACvC,SAAS,OAAO,CAAC,GAAG,CAAC,uBACrB,SAAS,OAAO,CAAC,GAAG,CAAC,qBACrB,SAAS,OAAO,CAAC,GAAG,CAAC;QAEzB,4BAA4B;QAC5B,MAAM,cAAc,SAAS,OAAO,CAAC,GAAG,CAAC;QACzC,MAAM,SAAS,eAAe,YAAY,QAAQ,CAAC;QAEnD,iBAAiB;QACjB,MAAM,OAAO,SAAS,MAAM,SAAS,IAAI,KAAK,MAAM,SAAS,IAAI;QAEjE,sCAAsC;QACtC,IAAI,SAAS,MAAM,KAAK,KAAK;gBAGrB,eAQmC;YAVvC,QAAQ,GAAG,CAAC,0BAA0B,KAAK,SAAS,CAAC,MAAM,MAAM;YAEjE,IAAI,iBAAA,4BAAA,gBAAA,KAAM,OAAO,cAAb,oCAAA,cAAe,GAAG,EAAE;gBACpB,QAAQ,GAAG,CAAC,sBAAsB,KAAK,OAAO,CAAC,GAAG;gBAClD,MAAM,IAAI,4IAAwB,CAC9B,KAAK,OAAO,CAAC,GAAG,EAChB,KAAK,OAAO,CAAC,OAAO,IAAI;YAEhC;YAEA,MAAM,aAAa,CAAA,iBAAA,2BAAA,KAAM,UAAU,MAAI,iBAAA,4BAAA,iBAAA,KAAM,OAAO,cAAb,qCAAA,eAAe,GAAG;YACzD,IAAI,YAAY;gBACZ,QAAQ,GAAG,CAAC,yBAAyB;gBACrC,MAAM,IAAI,4IAAwB,CAAC;YACvC;QACJ;QAEA,uDAAuD;QACvD,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,QAAQ,GAAG,CAAC,AAAC,SAAwB,OAAhB,SAAS,MAAM,EAAC,oBAAkB,KAAK,SAAS,CAAC,MAAM,MAAM;YAElF,sDAAsD;YACtD,QAAQ,GAAG,CAAC;YACZ,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,SAAS,OAAO,CAAE;gBACzC,QAAQ,GAAG,CAAC,AAAC,GAAU,OAAR,KAAI,MAAU,OAAN;YAC3B;YAIA,kEAAkE;YAClE,MAAM,eAAe,AAAC,uBAA2C,OAArB,SAAS,MAAM,EAAC,OAAyC,OAApC,SAAS,UAAU,IAAI;YAExF,QAAQ,GAAG,CAAC,wBAAwB;YACpC,MAAM,IAAI,SAAS,cAAc,eAAe,SAAS,MAAM;QACnE;QAEA,eAAe;QACf,QAAQ,GAAG,CAAC,qCAAqC;QACjD,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,2BAA2B;QAC3B,IAAI,iBAAiB,4IAAwB,IAAI,iBAAiB,UAAU;YACxE,MAAM;QACV;QAEA,QAAQ,KAAK,CAAC,sBAAsB;QACpC,MAAM;IACV;AACJ","debugId":null}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/hooks/useApiRequest.ts"],"sourcesContent":["// hooks/useApiRequest.ts\nimport { useRef, useCallback } from 'react';\nimport { useMsal } from '@azure/msal-react';\nimport { useConsent } from \"@/contexts/ConsentContext\";\nimport { useTenant } from \"@/contexts/TenantContext\";\nimport { apiRequest, ApiError } from \"@/lib/apiRequest\";\nimport { apiScope } from '@/lib/msalConfig';\nimport { UserConsentRequiredError } from '@/lib/errors';\nimport { useError } from '@/contexts/ErrorContext';\n\nexport function useApiRequest() {\n    const { instance, accounts } = useMsal();\n    const { showConsent } = useConsent();\n    const { showError, clearError } = useError();\n    const { selectedTenant } = useTenant();\n    const abortControllerRef = useRef<AbortController | null>(null);\n\n    const request = useCallback(async function<T>(\n        url: string,\n        options: RequestInit = {},\n        onConsentComplete?: () => Promise<T>\n    ): Promise<T | undefined> {\n        // Cancel previous request if still running\n        clearError();\n\n        if (abortControllerRef.current) {\n            abortControllerRef.current.abort();\n        }\n\n        // Create new abort controller\n        abortControllerRef.current = new AbortController();\n\n        try {\n            // Get access token\n            let accessToken: string | undefined;\n            if (accounts.length > 0) {\n                const response = await instance.acquireTokenSilent({\n                    scopes: [apiScope],\n                    account: accounts[0],\n                });\n                accessToken = response.accessToken;\n            }\n\n            // Add tenant header and signal to options\n            const requestOptions = {\n                ...options,\n                signal: abortControllerRef.current.signal,\n                headers: {\n                    ...options.headers,\n                    ...(selectedTenant && { 'X-Tenant-ID': selectedTenant.tenantId })\n                }\n            };\n\n            return await apiRequest<T>(url, requestOptions, accessToken);\n        } catch (err) {\n            if (err instanceof Error && err.name === 'AbortError') {\n                return;\n            }\n\n            if (err instanceof UserConsentRequiredError) {\n                console.log(\"Consent required, showing consent dialog with URL:\", err.consentUrl);\n                showConsent(err.consentUrl, onConsentComplete ?\n                    async () => {\n                        try {\n                            return await onConsentComplete();\n                        } catch (retryError) {\n                            console.error(\"Error retrying request after consent:\", retryError);\n                            const retryErrorMessage = retryError instanceof Error ? retryError.message : 'Retry failed';\n                            showError(retryErrorMessage);\n                        }\n                    } : undefined\n                );\n                return;\n            }\n\n            // Handle ApiError with correlation ID\n            let errorMessage = err instanceof Error ? err.message : 'An error occurred';\n\n            if (err instanceof ApiError && err.correlationId) {\n                errorMessage = `${errorMessage} (Correlation ID: ${err.correlationId})`;\n                console.log('Error with correlation ID:', err.correlationId);\n            }\n\n            // Show error through global error handler\n            showError(errorMessage, onConsentComplete ? async () => {\n                try {\n                    return await onConsentComplete();\n                } catch (retryError) {\n                    console.error(\"Error retrying request after consent:\", retryError);\n                    const retryErrorMessage = retryError instanceof Error ? retryError.message : 'Retry failed';\n                    showError(retryErrorMessage);\n                }\n            } : undefined);\n\n            return;\n        }\n    }, [instance, accounts, showConsent, selectedTenant, showError, clearError]);\n\n    const cancel = useCallback(() => {\n        if (abortControllerRef.current) {\n            abortControllerRef.current.abort();\n            abortControllerRef.current = null;\n        }\n    }, []);\n\n    return { request, cancel };\n}\n"],"names":[],"mappings":"AAAA,yBAAyB;;;;;AACzB;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AAEO,SAAS;;IACZ,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,IAAA,kLAAO;IACtC,MAAM,EAAE,WAAW,EAAE,GAAG,IAAA,4IAAU;IAClC,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,IAAA,wIAAQ;IAC1C,MAAM,EAAE,cAAc,EAAE,GAAG,IAAA,0IAAS;IACpC,MAAM,qBAAqB,IAAA,uKAAM,EAAyB;IAE1D,MAAM,UAAU,IAAA,4KAAW;8CAAC,eACxB,GAAW;gBACX,UAAA,iEAAuB,CAAC,GACxB;YAEA,2CAA2C;YAC3C;YAEA,IAAI,mBAAmB,OAAO,EAAE;gBAC5B,mBAAmB,OAAO,CAAC,KAAK;YACpC;YAEA,8BAA8B;YAC9B,mBAAmB,OAAO,GAAG,IAAI;YAEjC,IAAI;gBACA,mBAAmB;gBACnB,IAAI;gBACJ,IAAI,SAAS,MAAM,GAAG,GAAG;oBACrB,MAAM,WAAW,MAAM,SAAS,kBAAkB,CAAC;wBAC/C,QAAQ;4BAAC,gIAAQ;yBAAC;wBAClB,SAAS,QAAQ,CAAC,EAAE;oBACxB;oBACA,cAAc,SAAS,WAAW;gBACtC;gBAEA,0CAA0C;gBAC1C,MAAM,iBAAiB;oBACnB,GAAG,OAAO;oBACV,QAAQ,mBAAmB,OAAO,CAAC,MAAM;oBACzC,SAAS;wBACL,GAAG,QAAQ,OAAO;wBAClB,GAAI,kBAAkB;4BAAE,eAAe,eAAe,QAAQ;wBAAC,CAAC;oBACpE;gBACJ;gBAEA,OAAO,MAAM,IAAA,kIAAU,EAAI,KAAK,gBAAgB;YACpD,EAAE,OAAO,KAAK;gBACV,IAAI,eAAe,SAAS,IAAI,IAAI,KAAK,cAAc;oBACnD;gBACJ;gBAEA,IAAI,eAAe,4IAAwB,EAAE;oBACzC,QAAQ,GAAG,CAAC,sDAAsD,IAAI,UAAU;oBAChF,YAAY,IAAI,UAAU,EAAE;8DACxB;4BACI,IAAI;gCACA,OAAO,MAAM;4BACjB,EAAE,OAAO,YAAY;gCACjB,QAAQ,KAAK,CAAC,yCAAyC;gCACvD,MAAM,oBAAoB,sBAAsB,QAAQ,WAAW,OAAO,GAAG;gCAC7E,UAAU;4BACd;wBACJ;+DAAI;oBAER;gBACJ;gBAEA,sCAAsC;gBACtC,IAAI,eAAe,eAAe,QAAQ,IAAI,OAAO,GAAG;gBAExD,IAAI,eAAe,gIAAQ,IAAI,IAAI,aAAa,EAAE;oBAC9C,eAAe,AAAC,GAAmC,OAAjC,cAAa,sBAAsC,OAAlB,IAAI,aAAa,EAAC;oBACrE,QAAQ,GAAG,CAAC,8BAA8B,IAAI,aAAa;gBAC/D;gBAEA,0CAA0C;gBAC1C,UAAU,cAAc;0DAAoB;wBACxC,IAAI;4BACA,OAAO,MAAM;wBACjB,EAAE,OAAO,YAAY;4BACjB,QAAQ,KAAK,CAAC,yCAAyC;4BACvD,MAAM,oBAAoB,sBAAsB,QAAQ,WAAW,OAAO,GAAG;4BAC7E,UAAU;wBACd;oBACJ;2DAAI;gBAEJ;YACJ;QACJ;6CAAG;QAAC;QAAU;QAAU;QAAa;QAAgB;QAAW;KAAW;IAE3E,MAAM,SAAS,IAAA,4KAAW;6CAAC;YACvB,IAAI,mBAAmB,OAAO,EAAE;gBAC5B,mBAAmB,OAAO,CAAC,KAAK;gBAChC,mBAAmB,OAAO,GAAG;YACjC;QACJ;4CAAG,EAAE;IAEL,OAAO;QAAE;QAAS;IAAO;AAC7B;GAhGgB;;QACmB,kLAAO;QACd,4IAAU;QACA,wIAAQ;QACf,0IAAS","debugId":null}},
    {"offset": {"line": 251, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/hooks/useGroupDetails.ts"],"sourcesContent":["import { useState } from 'react';\nimport { useMsal } from '@azure/msal-react';\nimport { GROUPS_ENDPOINT } from '@/lib/constants';\nimport { apiScope } from '@/lib/msalConfig';\nimport { useApiRequest } from '@/hooks/useApiRequest';\n\nexport interface UserMember extends Record<string, unknown> {\n    id: string;\n    displayName: string;\n    accountEnabled: boolean;\n    type: string;\n    userPrincipalName?: string | null;\n}\n\nexport interface GroupDetails {\n    id: string;\n    displayName: string;\n    description: string | null;\n    membershipRule: string | null;\n    createdDateTime: string;\n    groupCount: {\n        userCount: number;\n        deviceCount: number;\n        groupCount: number;\n    } | null;\n    members: UserMember[] | null;\n}\n\nexport const useGroupDetails = () => {\n    const { instance, accounts } = useMsal();\n    const [selectedGroup, setSelectedGroup] = useState<GroupDetails | null>(null);\n    const [groupLoading, setGroupLoading] = useState(false);\n    const [groupError, setGroupError] = useState<string | null>(null);\n    const [isDialogOpen, setIsDialogOpen] = useState(false);\n    const { request } = useApiRequest();\n    const [showConsentDialog, setShowConsentDialog] = useState(false);\n    const [consentUrl, setConsentUrl] = useState('');\n\n    const handleConsentCheck = (response: any): boolean => {\n        if (response.status === 'Error' &&\n            response.message === 'User challenge required' &&\n            typeof response.data === 'object' &&\n            response.data !== null &&\n            'url' in response.data) {\n\n            setConsentUrl(response.data.url);\n            setShowConsentDialog(true);\n            setGroupLoading(false);\n            return true;\n        }\n        return false;\n    };\n\n    const fetchGroupDetails = async (resourceId: string) => {\n        if (!accounts.length) return;\n\n        // Open dialog immediately with loading state\n        setSelectedGroup({\n            id: resourceId,\n            displayName: 'Loading...',\n            description: null,\n            membershipRule: null,\n            createdDateTime: '',\n            groupCount: null,\n            members: null\n        });\n        setIsDialogOpen(true);\n        setGroupLoading(true);\n        setGroupError(null);\n\n        try {\n            const [groupData, membersArray] = await Promise.all([\n                request<any>(`${GROUPS_ENDPOINT}?groupId=${resourceId}`, {\n                    method: 'GET',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                }),\n                request<UserMember[]>(`${GROUPS_ENDPOINT}/${resourceId}/members`, {\n                    method: 'GET',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                })\n            ]);\n\n// Check for consent requirements\n            if (handleConsentCheck(groupData) || handleConsentCheck(membersArray)) {\n                return;\n            }\n\n            if (!groupData || !membersArray) {\n                throw new Error('Failed to fetch group data or members');\n            }\n\n            // Extract group details from the API response structure\n            const group = groupData.data;\n\n            // Process members data\n            const processedMembers = membersArray.map((member: any): UserMember => ({\n                id: member.id || '',\n                displayName: member.displayName || member.userPrincipalName || 'Unknown',\n                type: member.type || (member['@odata.type']?.includes('.user') ? 'User' :\n                    member['@odata.type']?.includes('.group') ? 'Group' : 'Device'),\n                accountEnabled: member.accountEnabled !== undefined ? member.accountEnabled : true,\n                userPrincipalName: member.userPrincipalName || null\n            }));\n\n            // Merge group details with members\n            const groupWithMembers = {\n                id: group.id,\n                displayName: group.displayName,\n                description: group.description,\n                membershipRule: group.membershipRule,\n                createdDateTime: group.createdDateTime,\n                groupCount: group.groupCount,\n                members: processedMembers\n            };\n\n            setSelectedGroup(groupWithMembers);\n\n        } catch (error) {\n            console.error('Failed to fetch group details:', error);\n            setGroupError(error instanceof Error ? error.message : 'Failed to fetch group details');\n        } finally {\n            setGroupLoading(false);\n        }\n    };\n    const handleConsentComplete = () => {\n        setShowConsentDialog(false);\n        setConsentUrl('');\n        // Optionally retry fetching the group details\n    };\n\n    const closeDialog = () => {\n        setIsDialogOpen(false);\n        setSelectedGroup(null);\n        setGroupError(null);\n    };\n\n    return {\n        selectedGroup,\n        groupLoading,\n        groupError,\n        isDialogOpen,\n        showConsentDialog,\n        consentUrl,\n        fetchGroupDetails,\n        closeDialog,\n        handleConsentComplete\n    };\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA;AAEA;;;;;;AAwBO,MAAM,kBAAkB;;IAC3B,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,IAAA,kLAAO;IACtC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAsB;IACxE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAgB;IAC5D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,0IAAa;IACjC,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC;IAC3D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,MAAM,qBAAqB,CAAC;QACxB,IAAI,SAAS,MAAM,KAAK,WACpB,SAAS,OAAO,KAAK,6BACrB,OAAO,SAAS,IAAI,KAAK,YACzB,SAAS,IAAI,KAAK,QAClB,SAAS,SAAS,IAAI,EAAE;YAExB,cAAc,SAAS,IAAI,CAAC,GAAG;YAC/B,qBAAqB;YACrB,gBAAgB;YAChB,OAAO;QACX;QACA,OAAO;IACX;IAEA,MAAM,oBAAoB,OAAO;QAC7B,IAAI,CAAC,SAAS,MAAM,EAAE;QAEtB,6CAA6C;QAC7C,iBAAiB;YACb,IAAI;YACJ,aAAa;YACb,aAAa;YACb,gBAAgB;YAChB,iBAAiB;YACjB,YAAY;YACZ,SAAS;QACb;QACA,gBAAgB;QAChB,gBAAgB;QAChB,cAAc;QAEd,IAAI;YACA,MAAM,CAAC,WAAW,aAAa,GAAG,MAAM,QAAQ,GAAG,CAAC;gBAChD,QAAa,AAAC,GAA6B,OAA3B,sIAAe,EAAC,aAAsB,OAAX,aAAc;oBACrD,QAAQ;oBACR,SAAS;wBACL,gBAAgB;oBACpB;gBACJ;gBACA,QAAsB,AAAC,GAAqB,OAAnB,sIAAe,EAAC,KAAc,OAAX,YAAW,aAAW;oBAC9D,QAAQ;oBACR,SAAS;wBACL,gBAAgB;oBACpB;gBACJ;aACH;YAEb,iCAAiC;YACrB,IAAI,mBAAmB,cAAc,mBAAmB,eAAe;gBACnE;YACJ;YAEA,IAAI,CAAC,aAAa,CAAC,cAAc;gBAC7B,MAAM,IAAI,MAAM;YACpB;YAEA,wDAAwD;YACxD,MAAM,QAAQ,UAAU,IAAI;YAE5B,uBAAuB;YACvB,MAAM,mBAAmB,aAAa,GAAG,CAAC,CAAC;oBAGjB,mBAClB;uBAJgE;oBACpE,IAAI,OAAO,EAAE,IAAI;oBACjB,aAAa,OAAO,WAAW,IAAI,OAAO,iBAAiB,IAAI;oBAC/D,MAAM,OAAO,IAAI,IAAI,CAAC,EAAA,oBAAA,MAAM,CAAC,cAAc,cAArB,wCAAA,kBAAuB,QAAQ,CAAC,YAAW,SAC7D,EAAA,qBAAA,MAAM,CAAC,cAAc,cAArB,yCAAA,mBAAuB,QAAQ,CAAC,aAAY,UAAU,QAAQ;oBAClE,gBAAgB,OAAO,cAAc,KAAK,YAAY,OAAO,cAAc,GAAG;oBAC9E,mBAAmB,OAAO,iBAAiB,IAAI;gBACnD;;YAEA,mCAAmC;YACnC,MAAM,mBAAmB;gBACrB,IAAI,MAAM,EAAE;gBACZ,aAAa,MAAM,WAAW;gBAC9B,aAAa,MAAM,WAAW;gBAC9B,gBAAgB,MAAM,cAAc;gBACpC,iBAAiB,MAAM,eAAe;gBACtC,YAAY,MAAM,UAAU;gBAC5B,SAAS;YACb;YAEA,iBAAiB;QAErB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,kCAAkC;YAChD,cAAc,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAC3D,SAAU;YACN,gBAAgB;QACpB;IACJ;IACA,MAAM,wBAAwB;QAC1B,qBAAqB;QACrB,cAAc;IACd,8CAA8C;IAClD;IAEA,MAAM,cAAc;QAChB,gBAAgB;QAChB,iBAAiB;QACjB,cAAc;IAClB;IAEA,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACJ;AACJ;GA3Ha;;QACsB,kLAAO;QAKlB,0IAAa","debugId":null}},
    {"offset": {"line": 387, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/components/DataTable.tsx"],"sourcesContent":["// components/DataTable.tsx\n'use client';\nimport { useState, useRef, useEffect, useMemo } from 'react';\nimport {ITEMS_PER_PAGE} from \"@/lib/constants\";\nimport { ChevronLeft, ChevronRight, ChevronUp, ChevronDown, ChevronsUpDown, Search, X } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\n\ninterface Column {\n    key: string;\n    label: string;\n    width?: number;\n    minWidth?: number;\n    sortable?: boolean;\n    searchable?: boolean;\n    sortValue?: (row: Record<string, unknown>) => number | string;\n    render?: (value: unknown, row: Record<string, unknown>) => React.ReactNode;\n}\n\ninterface SortConfig {\n    key: string;\n    direction: 'asc' | 'desc';\n}\n\ninterface DataTableProps {\n    data: Record<string, unknown>[];\n    columns: Column[];\n    className?: string;\n    onRowClick?: (row: Record<string, unknown>, index: number, event?: React.MouseEvent) => void;\n    rowClassName?: (row: Record<string, unknown>) => string;\n    currentPage?: number;\n    totalPages?: number;\n    itemsPerPage?: number;\n    onPageChange?: (page: number) => void;\n    onItemsPerPageChange?: (itemsPerPage: number) => void;\n    showPagination?: boolean;\n    showSearch?: boolean;\n    searchPlaceholder?: string;\n    selectedRows?: string[];\n    onSelectionChange?: (rowIds: string[]) => void;\n}\n\nexport function DataTable({\n                              data,\n                              columns: initialColumns,\n                              className = '',\n                              onRowClick,\n                              currentPage = 1,\n                              totalPages = 1,\n                              itemsPerPage = ITEMS_PER_PAGE,\n                              onPageChange,\n                              rowClassName,\n                              onItemsPerPageChange,\n                              showPagination = false,\n                              showSearch = true,\n                              searchPlaceholder = \"Search...\",\n                              onSelectionChange,\n                              selectedRows = [],\n                          }: DataTableProps) {\n\n    // Local pagination state to support uncontrolled usage\n    const [internalCurrentPage, setInternalCurrentPage] = useState<number>(currentPage);\n    const [internalItemsPerPage, setInternalItemsPerPage] = useState<number>(itemsPerPage);\n\n    // Sync internal state when parent updates props\n    useEffect(() => setInternalCurrentPage(currentPage), [currentPage]);\n    useEffect(() => setInternalItemsPerPage(itemsPerPage), [itemsPerPage]);\n\n    // Effective values: prefer controller (props) when callbacks are provided\n    const effectiveCurrentPage = onPageChange ? currentPage : internalCurrentPage;\n    const effectiveItemsPerPage = onItemsPerPageChange ? itemsPerPage : internalItemsPerPage;\n\n    const changePage = (page: number) => {\n        if (onPageChange) {\n            onPageChange(page);\n        } else {\n            setInternalCurrentPage(page);\n        }\n    };\n\n    const changeItemsPerPage = (n: number) => {\n        if (onItemsPerPageChange) {\n            onItemsPerPageChange(n);\n        } else {\n            setInternalItemsPerPage(n);\n        }\n    };\n\n    const isRowSelected = (row: Record<string, unknown>) => {\n        if (!selectedRows || selectedRows.length === 0) return false;\n        const rowId = String(row.id);\n        return selectedRows.includes(rowId);\n    };\n\n    const handleRowSelection = (e: React.MouseEvent | React.ChangeEvent<HTMLInputElement>, row: Record<string, unknown>) => {\n        e.stopPropagation();\n        const rowId = String(row.id);\n\n        if (onSelectionChange) {\n            const isCurrentlySelected = isRowSelected(row);\n            if (isCurrentlySelected) {\n                onSelectionChange(selectedRows.filter(id => id !== rowId));\n            } else {\n                onSelectionChange([...selectedRows, rowId]);\n            }\n        }\n    };\n\n    const columnsWithSelection = useMemo(() => {\n        if (onSelectionChange && !initialColumns.some(col => col.key === '_select')) {\n            return [\n                {\n                    key: '_select',\n                    label: '',\n                    width: 50,\n                    minWidth: 40,\n                    sortable: false,\n                    searchable: false,\n                    sortValue: undefined,\n                    render: (_, row) => (\n                        <input\n                            type=\"checkbox\"\n                            checked={isRowSelected(row)}\n                            onChange={(e) => handleRowSelection(e, row)}\n                            className=\"rounded border-input text-primary focus:ring-ring\"\n                        />\n                    )\n\n                },\n                ...initialColumns\n            ];\n        }\n        return initialColumns;\n    }, [onSelectionChange, selectedRows, initialColumns]);\n\n    const [columns, setColumns] = useState(columnsWithSelection.map(col => ({\n        ...col,\n        width: col.width || 150,\n        minWidth: col.minWidth || 100,\n        searchable: col.searchable !== false && col.key !== '_select',\n        sortValue: col.sortValue\n    })));\n\n    const [sortConfig, setSortConfig] = useState<SortConfig | null>(null);\n    const [searchTerm, setSearchTerm] = useState('');\n    const [resizing, setResizing] = useState<{ columnIndex: number; startX: number; startWidth: number } | null>(null);\n    const tableRef = useRef<HTMLTableElement>(null);\n\n    useEffect(() => {\n        setColumns(columnsWithSelection.map(col => ({\n            ...col,\n            width: col.width || 150,\n            minWidth: col.minWidth || 100,\n            searchable: col.searchable !== false && col.key !== '_select',\n            sortValue: col.sortValue\n        })));\n    }, [columnsWithSelection]);\n\n    // Filter data based on search term\n    const filteredData = data.filter(row => {\n        if (!searchTerm.trim()) return true;\n\n        const searchLower = searchTerm.toLowerCase();\n\n        // Search through ALL properties in the row, not just the column keys\n        return Object.entries(row).some(([key, value]) => {\n            if (value === null || value === undefined) return false;\n            const stringValue = String(value).toLowerCase();\n            return stringValue.includes(searchLower);\n        });\n    });\n\n    // Sort filtered data\n    const sortedData = [...filteredData].sort((a, b) => {\n        if (!sortConfig) return 0;\n\n        // Find the column configuration to check for custom sortValue\n        const column = columns.find(col => col.key === sortConfig.key);\n\n        // Use sortValue function if provided, otherwise fall back to direct value\n        const aValue = column?.sortValue ? column.sortValue(a) : a[sortConfig.key];\n        const bValue = column?.sortValue ? column.sortValue(b) : b[sortConfig.key];\n\n        if (aValue === undefined && bValue === undefined) {\n            return 0;\n        }\n\n        if (aValue === null || aValue === undefined) return 1;\n        if (bValue === null || bValue === undefined) return -1;\n\n        if (typeof aValue === 'number' && typeof bValue === 'number') {\n            return sortConfig.direction === 'asc'\n                ? aValue - bValue\n                : bValue - aValue;\n        }\n\n        const aDate = new Date(aValue as string);\n        const bDate = new Date(bValue as string);\n        if (!isNaN(aDate.getTime()) && !isNaN(bDate.getTime())) {\n            return sortConfig.direction === 'asc'\n                ? aDate.getTime() - bDate.getTime()\n                : bDate.getTime() - aDate.getTime();\n        }\n\n        const aStr = String(aValue).toLowerCase();\n        const bStr = String(bValue).toLowerCase();\n\n        if (aStr < bStr) return sortConfig.direction === 'asc' ? -1 : 1;\n        if (aStr > bStr) return sortConfig.direction === 'asc' ? 1 : -1;\n        return 0;\n    });\n\n\n    // Update pagination to work with filtered/sorted data\n    const startIndex = (effectiveCurrentPage - 1) * effectiveItemsPerPage;\n    const endIndex = startIndex + effectiveItemsPerPage;\n    const paginatedData = sortedData.slice(startIndex, endIndex);\n    const totalFilteredPages = Math.max(1, Math.ceil(sortedData.length / effectiveItemsPerPage));\n\n    const handleSort = (columnKey: string) => {\n        let direction: 'asc' | 'desc' = 'asc';\n\n        if (sortConfig && sortConfig.key === columnKey && sortConfig.direction === 'asc') {\n            direction = 'desc';\n        }\n\n        setSortConfig({ key: columnKey, direction });\n    };\n\n    const getSortIcon = (columnKey: string) => {\n        if (!sortConfig || sortConfig.key !== columnKey) {\n            return <ChevronsUpDown className=\"h-4 w-4 text-muted-foreground\" />;\n        }\n\n        return sortConfig.direction === 'asc'\n            ? <ChevronUp className=\"h-4 w-4 text-foreground\" />\n            : <ChevronDown className=\"h-4 w-4 text-foreground\" />;\n    };\n\n\n    const clearSearch = () => {\n        setSearchTerm('');\n        changePage(1);\n    };\n\n    useEffect(() => {\n        if (effectiveCurrentPage > 1) {\n            changePage(1);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [searchTerm]);\n\n    useEffect(() => {\n        const maxPage = Math.max(1, Math.ceil(sortedData.length / effectiveItemsPerPage));\n        if (effectiveCurrentPage > maxPage) {\n            changePage(1);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [effectiveItemsPerPage, sortedData.length, effectiveCurrentPage]);\n\n    useEffect(() => {\n        const handleMouseMove = (e: MouseEvent) => {\n            if (!resizing) return;\n\n            const diff = e.clientX - resizing.startX;\n            const newWidth = Math.max(resizing.startWidth + diff, columns[resizing.columnIndex].minWidth || 100);\n\n            setColumns(prev => prev.map((col, index) =>\n                index === resizing.columnIndex ? { ...col, width: newWidth } : col\n            ));\n        };\n\n        const handleMouseUp = () => {\n            setResizing(null);\n        };\n\n        if (resizing) {\n            document.addEventListener('mousemove', handleMouseMove);\n            document.addEventListener('mouseup', handleMouseUp);\n        }\n\n        return () => {\n            document.removeEventListener('mousemove', handleMouseMove);\n            document.removeEventListener('mouseup', handleMouseUp);\n        };\n    }, [resizing, columns]);\n\n    const handleResizeStart = (e: React.MouseEvent, columnIndex: number) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setResizing({\n            columnIndex,\n            startX: e.clientX,\n            startWidth: columns[columnIndex].width || 150\n        });\n    };\n\n    const handleRowClick = (e: React.MouseEvent, row: Record<string, unknown>, index: number) => {\n        if (resizing) return;\n\n        const target = e.target as HTMLElement;\n        const isInteractive = target.closest('input[type=\"checkbox\"], input[type=\"radio\"], button, a, [role=\"button\"], [tabindex=\"0\"]');\n\n        if (!isInteractive && onRowClick) {\n            onRowClick(row, index, e);\n        }\n    };\n\n\n    const getCellValue = (row: Record<string, unknown>, column: Column) => {\n        if (column.key === '_select') {\n            return null;\n        }\n        return row[column.key];\n    };\n\n    return (\n        <div className={`bg-background border rounded-lg overflow-hidden shadow-sm ${className}`}>\n            {showSearch && (\n                <div className=\"p-4 bg-muted border-b\">\n                    <div className=\"relative max-w-sm\">\n                        <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                        <input\n                            type=\"text\"\n                            placeholder={searchPlaceholder}\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                            className=\"w-full pl-10 pr-10 py-2 border rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent transition-colors\"\n                        />\n                        {searchTerm && (\n                            <button\n                                onClick={clearSearch}\n                                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\n                            >\n                                <X className=\"h-4 w-4\" />\n                            </button>\n                        )}\n                    </div>\n                    {searchTerm && (\n                        <div className=\"mt-2 text-sm text-muted-foreground\">\n                            {sortedData.length} of {data.length} results\n                        </div>\n                    )}\n                </div>\n            )}\n\n            <div className=\"overflow-auto\">\n                <table ref={tableRef} className=\"w-full text-sm\">\n                    <thead className=\"bg-background sticky top-0 z-10 border-b\">\n\n                    <tr className=\"border-b\">\n                        {columns.map((column, index) => (\n                            <th\n                                key={column.key}\n                                className=\"relative text-left p-3 font-medium text-foreground\"\n                                style={{ width: `${column.width}px` }}\n                            >\n                                <div className=\"flex items-center justify-between\">\n                                    <div\n                                        className={`flex items-center gap-2 flex-1 ${\n                                            column.sortable !== false && column.key !== '_select'\n                                                ? 'cursor-pointer hover:text-primary transition-colors'\n                                                : ''\n                                        }`}\n                                        onClick={() => {\n                                            if (column.sortable !== false && column.key !== '_select') {\n                                                handleSort(column.key);\n                                            }\n                                        }}\n                                    >\n                                        <span className=\"truncate pr-2\">{column.label}</span>\n                                        {column.sortable !== false && column.key !== '_select' && (\n                                            getSortIcon(column.key)\n                                        )}\n                                    </div>\n                                </div>\n\n                                {column.key !== '_select' && (\n                                    <div\n                                        className=\"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-primary group\"\n                                        onMouseDown={(e) => handleResizeStart(e, index)}\n                                    >\n                                        <div className=\"h-full w-px bg-border group-hover:bg-primary transition-colors\" />\n                                    </div>\n                                )}\n                            </th>\n                        ))}\n                    </tr>\n                    </thead>\n                    <tbody className=\"bg-background divide-y divide-border\">\n                    {paginatedData.length > 0 ? (\n                        paginatedData.map((row, rowIndex) => (\n                            <tr\n                                key={rowIndex}\n                                className={`\n                transition-colors\n                ${onRowClick ? 'cursor-pointer' : ''}\n                ${isRowSelected(row)\n                                    ? 'bg-yellow-400 dark:bg-yellow-400/80 text-foreground border-l-4 border-l-yellow-600 dark:border-l-yellow-400 shadow-md ring-1 ring-yellow-500/30'\n                                    : 'hover:bg-muted/50'\n                                }\n                ${rowClassName ? rowClassName(row) : ''}\n            `}\n                                onClick={(e) => handleRowClick(e, row, startIndex + rowIndex)}\n                            >\n\n                            {columns.map((column) => (\n                                    <td\n                                        key={column.key}\n                                        className=\"p-3 text-foreground\"\n                                        style={{ width: `${column.width}px` }}\n                                    >\n                                        <div className=\"overflow-hidden\">\n                                            {column.render\n                                                ? column.render(getCellValue(row, column), row)\n                                                : String(getCellValue(row, column) || '')\n                                            }\n                                        </div>\n                                    </td>\n                                ))}\n                            </tr>\n                        ))\n                    ) : (\n                        <tr>\n                            <td\n                                colSpan={columns.length}\n                                className=\"p-8 text-center text-muted-foreground bg-muted/50\"\n                            >\n                                {searchTerm ? 'No results found for your search.' : 'No data available.'}\n                            </td>\n                        </tr>\n                    )}\n                    </tbody>\n                </table>\n            </div>\n\n            {showPagination && sortedData.length > 0 && (\n                <div className=\"flex items-center justify-between p-4 border-t bg-muted\">\n                    <div className=\"flex items-center gap-4\">\n                        <div className=\"text-sm text-muted-foreground\">\n                            Showing {Math.min(startIndex + 1, sortedData.length)} to {Math.min(endIndex, sortedData.length)} of {sortedData.length} results\n                            {searchTerm && ` (filtered from ${data.length} total)`}\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                            <span className=\"text-sm text-muted-foreground\">Items per page:</span>\n                            <select\n                                value={effectiveItemsPerPage}\n                                onChange={(e) => {\n                                    const newItemsPerPage = Number(e.target.value);\n                                    changeItemsPerPage(newItemsPerPage);\n                                    changePage(1);\n                                }}\n                                className=\"border rounded px-2 py-1 text-sm bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors\"\n                            >\n                                <option value={10}>10</option>\n                                <option value={25}>25</option>\n                                <option value={50}>50</option>\n                                <option value={100}>100</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                        <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => changePage(Math.max(1, effectiveCurrentPage - 1))}\n                            disabled={effectiveCurrentPage === 1}\n                        >\n                            <ChevronLeft className=\"h-4 w-4\" />\n                            Previous\n                        </Button>\n\n                        <div className=\"flex items-center gap-1\">\n                            {Array.from({ length: Math.min(5, totalFilteredPages) }, (_, i) => {\n                                let pageNum;\n                                if (totalFilteredPages <= 5) {\n                                    pageNum = i + 1;\n                                } else if (effectiveCurrentPage <= 3) {\n                                    pageNum = i + 1;\n                                } else if (effectiveCurrentPage >= totalFilteredPages - 2) {\n                                    pageNum = totalFilteredPages - 4 + i;\n                                } else {\n                                    pageNum = effectiveCurrentPage - 2 + i;\n                                }\n\n                                return (\n                                    <Button\n                                        key={pageNum}\n                                        variant={effectiveCurrentPage === pageNum ? \"default\" : \"outline\"}\n                                        size=\"sm\"\n                                        onClick={() => changePage(pageNum)}\n                                        className=\"w-8 h-8 p-0\"\n                                    >\n                                        {pageNum}\n                                    </Button>\n                                );\n                            })}\n                        </div>\n\n                        <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => changePage(Math.min(totalFilteredPages, effectiveCurrentPage + 1))}\n                            disabled={effectiveCurrentPage === totalFilteredPages}\n                        >\n                            Next\n                            <ChevronRight className=\"h-4 w-4\" />\n                        </Button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1098, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/components/PlanProtection.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Crown, Shield, ArrowRight, Zap, Mail, Building2, Hash, ExternalLink, Check } from 'lucide-react';\nimport Link from 'next/link';\nimport {\n    Dialog,\n    DialogContent,\n    DialogDescription,\n    DialogHeader,\n    DialogTitle,\n} from '@/components/ui/dialog';\n\ninterface PlanProtectionProps {\n    children: React.ReactNode;\n    requiredPlan: 'support' | 'extensions';\n    featureName: string;\n}\n\nexport function PlanProtection({ children, requiredPlan, featureName }: PlanProtectionProps) {\n    const [dialogOpen, setDialogOpen] = useState(false);\n    // This would normally come from your user/subscription context\n    const hasValidPlan = true; // Replace with actual plan check logic\n\n    if (hasValidPlan) {\n        return <>{children}</>;\n    }\n\n    const planInfo = {\n        support: {\n            title: 'Support License Required',\n            description: 'Professional support and advanced features',\n            icon: Shield,\n            color: 'blue'\n        },\n        extensions: {\n            title: 'Extensions License Required',\n            description: 'Advanced automation and enterprise features',\n            icon: Crown,\n            color: 'amber'\n        }\n    };\n\n    const plan = planInfo[requiredPlan];\n    const getDialogContent = () => {\n        if (requiredPlan === 'support') {\n            return {\n                title: 'Get Professional Support',\n                description: 'Ready to get professional support for your Intune Assistant usage?',\n                emailSubject: 'Support License Request',\n                features: [\n                    'Priority email support',\n                    'Technical assistance from experts',\n                    'Direct access to developers',\n                    'Custom troubleshooting help'\n                ]\n            };\n        } else {\n            return {\n                title: 'Unlock Advanced Extensions',\n                description: 'Ready to enhance your Intune management with powerful enterprise features?',\n                emailSubject: 'Extensions License Request',\n                features: [\n                    'Assignment Manager extension',\n                    'Advanced automation tools',\n                    'Custom reporting dashboards',\n                    'Bulk operations & API integrations'\n                ]\n            };\n        }\n    };\n\n    const dialogContent = getDialogContent();\n    const emailBody = `Hello,\n\nI'm interested in the ${requiredPlan === 'support' ? 'Support' : 'Extensions'} License for Intune Assistant.\n\nCompany Information:\n- Company Name: [Please provide your company name]\n- Number of Tenants: [Please specify total number of tenants]\n- Use Case: [Brief description of your needs]\n\nPlease provide more information about pricing and next steps.\n\nBest regards,\n[Your name]`;\n\n    const mailtoLink = `mailto:administrator@controlflex.eu?subject=${encodeURIComponent(dialogContent.emailSubject)}&body=${encodeURIComponent(emailBody)}`;\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950\">\n            <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16\">\n                <div className=\"text-center mb-12\">\n                    <div className={`inline-flex p-3 rounded-full mb-6 ${\n                        plan.color === 'blue'\n                            ? 'bg-blue-100 dark:bg-blue-900/50'\n                            : 'bg-amber-100 dark:bg-amber-900/50'\n                    }`}>\n                        <plan.icon className={`h-8 w-8 ${\n                            plan.color === 'blue'\n                                ? 'text-blue-600 dark:text-blue-400'\n                                : 'text-amber-600 dark:text-amber-400'\n                        }`} />\n                    </div>\n                    <h1 className=\"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4\">\n                        {plan.title}\n                    </h1>\n                    <p className=\"text-xl text-gray-600 dark:text-gray-300 mb-2\">\n                        Access to <strong>{featureName}</strong> requires an active license\n                    </p>\n                    <p className=\"text-gray-500 dark:text-gray-400\">\n                        {plan.description}\n                    </p>\n                </div>\n\n                <Card className=\"shadow-xl border-0 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm\">\n                    <CardHeader className=\"text-center pb-4\">\n                        <div className=\"flex justify-center mb-4\">\n                            <Badge className={`${\n                                plan.color === 'blue'\n                                    ? 'bg-gradient-to-r from-blue-500 to-blue-600'\n                                    : 'bg-gradient-to-r from-amber-500 to-orange-600'\n                            } text-white px-4 py-2`}>\n                                Premium Feature\n                            </Badge>\n                        </div>\n                        <CardTitle className=\"text-2xl text-gray-900 dark:text-white\">\n                            Unlock {featureName}\n                        </CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-6\">\n                        <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-6\">\n                            <h3 className=\"font-semibold text-gray-900 dark:text-white mb-4\">\n                                What you&apos;ll get with the {plan.title.replace(' Required', '')}:\n                            </h3>\n                            <ul className=\"space-y-3\">\n                                {requiredPlan === 'extensions' ? (\n                                    <>\n                                        <li className=\"flex items-center gap-3\">\n                                            <Zap className=\"h-5 w-5 text-green-500\" />\n                                            <span>Assignment Manager - Bulk policy assignments</span>\n                                        </li>\n                                        <li className=\"flex items-center gap-3\">\n                                            <Zap className=\"h-5 w-5 text-green-500\" />\n                                            <span>Advanced automation tools and workflows</span>\n                                        </li>\n                                        <li className=\"flex items-center gap-3\">\n                                            <Zap className=\"h-5 w-5 text-green-500\" />\n                                            <span>Custom reporting and analytics</span>\n                                        </li>\n                                        <li className=\"flex items-center gap-3\">\n                                            <Zap className=\"h-5 w-5 text-green-500\" />\n                                            <span>API integrations and bulk operations</span>\n                                        </li>\n                                    </>\n                                ) : (\n                                    <>\n                                        <li className=\"flex items-center gap-3\">\n                                            <Shield className=\"h-5 w-5 text-green-500\" />\n                                            <span>Priority email support from experts</span>\n                                        </li>\n                                        <li className=\"flex items-center gap-3\">\n                                            <Shield className=\"h-5 w-5 text-green-500\" />\n                                            <span>Direct access to developers</span>\n                                        </li>\n                                        <li className=\"flex items-center gap-3\">\n                                            <Shield className=\"h-5 w-5 text-green-500\" />\n                                            <span>Custom troubleshooting assistance</span>\n                                        </li>\n                                        <li className=\"flex items-center gap-3\">\n                                            <Shield className=\"h-5 w-5 text-green-500\" />\n                                            <span>Technical guidance and best practices</span>\n                                        </li>\n                                    </>\n                                )}\n                            </ul>\n                        </div>\n\n                        <div className=\"flex flex-col sm:flex-row gap-4\">\n                            <Button asChild className=\"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white\">\n                                <Link href=\"/plans\">\n                                    View Plans & Pricing\n                                    <ArrowRight className=\"ml-2 h-4 w-4\" />\n                                </Link>\n                            </Button>\n                            <Button\n                                variant=\"outline\"\n                                onClick={() => setDialogOpen(true)}\n                                className=\"flex-1\"\n                            >\n                                Contact\n                            </Button>\n                        </div>\n\n                        <div className=\"text-center\">\n                            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                                Need help choosing the right plan?{' '}\n                                <button\n                                    onClick={() => setDialogOpen(true)}\n                                    className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n                                >\n                                    Contact our team\n                                </button>\n                            </p>\n                        </div>\n                    </CardContent>\n                </Card>\n            </div>\n\n            {/* License Request Dialog */}\n            <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\n                <DialogContent className=\"sm:max-w-md\">\n                    <DialogHeader>\n                        <DialogTitle className=\"flex items-center gap-2 text-xl\">\n                            {requiredPlan === 'support' ? (\n                                <Shield className=\"h-5 w-5 text-blue-500\" />\n                            ) : (\n                                <Crown className=\"h-5 w-5 text-amber-500\" />\n                            )}\n                            {dialogContent.title}\n                        </DialogTitle>\n                        <DialogDescription className=\"text-base\">\n                            {dialogContent.description}\n                        </DialogDescription>\n                    </DialogHeader>\n\n                    <div className=\"space-y-6\">\n                        {/* Features List */}\n                        <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4\">\n                            <h4 className=\"font-medium text-gray-900 dark:text-white mb-3\">\n                                What you&apos;ll get:\n                            </h4>\n                            <ul className=\"space-y-2\">\n                                {dialogContent.features.map((feature, index) => (\n                                    <li key={index} className=\"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300\">\n                                        <Check className=\"h-4 w-4 text-green-500\" />\n                                        {feature}\n                                    </li>\n                                ))}\n                            </ul>\n                        </div>\n\n                        {/* Contact Information */}\n                        <div className=\"border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-950/20 rounded-lg p-4\">\n                            <div className=\"flex items-start gap-3\">\n                                <Mail className=\"h-5 w-5 text-amber-600 dark:text-amber-400 mt-0.5\" />\n                                <div className=\"space-y-2 flex-1\">\n                                    <p className=\"font-medium text-amber-800 dark:text-amber-200\">\n                                        Contact ControlFlex\n                                    </p>\n                                    <p className=\"text-sm text-amber-700 dark:text-amber-300\">\n                                        Send an email to get started with your license request.\n                                        Please include:\n                                    </p>\n                                    <ul className=\"text-xs text-amber-600 dark:text-amber-400 space-y-1 ml-4\">\n                                        <li className=\"flex items-center gap-2\">\n                                            <Building2 className=\"h-3 w-3\" />\n                                            Your company name\n                                        </li>\n                                        <li className=\"flex items-center gap-2\">\n                                            <Hash className=\"h-3 w-3\" />\n                                            Total number of tenants\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Action Buttons */}\n                        <div className=\"flex flex-col sm:flex-row gap-3\">\n                            <Button\n                                asChild\n                                className=\"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white\"\n                            >\n                                <a href={mailtoLink}>\n                                    <Mail className=\"h-4 w-4 mr-2\" />\n                                    Send Email Request\n                                    <ExternalLink className=\"h-3 w-3 ml-2\" />\n                                </a>\n                            </Button>\n                            <Button\n                                variant=\"outline\"\n                                onClick={() => setDialogOpen(false)}\n                                className=\"flex-1\"\n                            >\n                                Maybe Later\n                            </Button>\n                        </div>\n\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 text-center\">\n                            Email: administrator@controlflex.eu\n                        </p>\n                    </div>\n                </DialogContent>\n            </Dialog>\n        </div>\n    );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAEA;AACA;;;AARA;;;;;;;;AAsBO,SAAS,eAAe,KAA4D;QAA5D,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAuB,GAA5D;;IAC3B,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,+DAA+D;IAC/D,MAAM,eAAe,MAAM,uCAAuC;IAElE,wCAAkB;QACd,qBAAO;sBAAG;;IACd;;;IAEA,MAAM;IAeN,MAAM;IACN,MAAM;IA4BN,MAAM;IACN,MAAM;IAcN,MAAM;AAkNV;GAtRgB;KAAA","debugId":null}},
    {"offset": {"line": 1150, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/app/deployment/assignments/page.tsx"],"sourcesContent":["\n'use client';\nimport ReactDOM from 'react-dom';\nimport React, { useState, useCallback, useRef } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport {\n    Upload, FileText, CheckCircle2, XCircle, AlertTriangle,\n    Play, RotateCcw, Eye, ArrowRight, Shield, Users, Info, X, RefreshCw, Circle, Blocks\n} from 'lucide-react';\nimport { useMsal } from '@azure/msal-react';\nimport {ASSIGNMENTS_COMPARE_ENDPOINT, ASSIGNMENTS_ENDPOINT,EXPORT_ENDPOINT,GROUPS_ENDPOINT, ASSIGNMENTS_FILTERS_ENDPOINT, ITEMS_PER_PAGE} from '@/lib/constants';\nimport {apiScope} from \"@/lib/msalConfig\";\nimport { useGroupDetails } from '@/hooks/useGroupDetails';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\n\nimport { DataTable } from '@/components/DataTable';\nimport {useApiRequest} from \"@/hooks/useApiRequest\";\nimport { UserConsentRequiredError } from '@/lib/errors';\nimport { PlanProtection } from '@/components/PlanProtection';\nimport { useConsent } from \"@/contexts/ConsentContext\";\n\ninterface AssignmentCompareApiResponse {\n    status: string;\n    message?: {\n        url?: string;\n        message?: string;\n    }\n    data?: ComparisonResult[] | string;\n    errors?: {\n        [key: string]: string[];\n    };\n}\n\ninterface ValidationApiResponse {\n    status: string;\n    message?: {\n        url?: string;\n        message?: string;\n    }\n    data?: ValidationResult[] | string;\n    errors?: {\n        [key: string]: string[];\n    };\n}\n\ninterface CSVRow {\n    PolicyName: string;\n    GroupName: string;\n    AssignmentDirection: 'Include' | 'Exclude';\n    AssignmentAction: 'Add' | 'Remove' | 'NoAssignment' | 'Replace';\n    FilterName: string | null;\n    FilterType: string | null;\n    isValidAction?: boolean;\n    originalActionValue?: string;\n    validationErrors?: CSVValidationError[]; // Add validation errors\n    isValid?: boolean; // Overall row validity\n    [key: string]: unknown;\n}\n\ninterface Assignment {\n    id: string;\n    target: {\n        groupId: string;\n        '@odata.type': string;\n        deviceAndAppManagementAssignmentFilterId: string | null;\n        deviceAndAppManagementAssignmentFilterType: string;\n    };\n}\n\ninterface PolicySettings {\n    [key: string]: unknown;\n}\n\ninterface AssignedGroup {\n    id: string;\n    displayName: string;\n    type: string;\n}\n\ninterface ComparisonResult {\n    id: string;\n    assignmentId: string;\n    policy: {\n        id: string;\n        name: string;\n        policyType: string;\n        policySubType: string;\n        assignments: Assignment[];\n        platform: string;\n    };\n    policies?: Array<{\n        '@odata.type': string | null;\n        type: string | null;\n        policyType: string;\n        policySubType: string;\n        id: string;\n        isAssigned: boolean;\n        createdDateTime: string;\n        description: string;\n        lastModifiedDateTime: string;\n        name: string;\n        assignments: Assignment[];\n        settingCount: number;\n        platform: string;\n        settings: PolicySettings;\n    }>;\n    providedPolicyName?: string;\n    assignedGroups?: AssignedGroup[];\n    groupToMigrate?: string;\n    assignmentType?: string;\n    assignmentDirection?: 'Include' | 'Exclude';\n    assignmentAction?: 'Add' | 'Remove' | 'NoAssignment';\n    filterToMigrate?: {\n        id: string | null;\n        createdDateTime: string;\n        lastModifiedDateTime: string;\n        displayName: string | null;\n        description: string | null;\n        platform: string | null;\n        rule: string | null;\n        assignmentFilterManagementType: string | null;\n    };\n    filterType?: string;\n    filterName?: string;\n    isMigrated?: boolean;\n    excludeGroupFromSource?: boolean;\n    removeGroupFromSource?: boolean;\n    isReadyForMigration?: boolean;\n    migrationCheckResult?: {\n        assignmentExists: boolean;\n        policyExists: boolean;\n        policyIsUnique: boolean;\n        groupExists: boolean;\n        correctAssignmentTypeProvided: boolean;\n        correctAssignmentActionProvided: boolean;\n        filterExist: boolean;\n        filterIsUnique: boolean;\n        correctFilterPlatform: boolean;\n        correctFilterTypeProvided: boolean;\n        assignmentIsCompatible: boolean;\n        compatibilityErrors: string[];\n    };\n    csvRow?: CSVRow;\n    isBackedUp?: boolean;\n    validationStatus?: 'pending' | 'valid' | 'invalid' | 'warning';\n    validationMessage?: string;\n    isCurrentSessionValidation?: boolean;\n}\n\ninterface MigrationResult {id: string;\n    providedPolicyName: string;\n    policy: null;\n    assignmentId: string;\n    groupToMigrate: string;\n    assignmentType: number;\n    assignmentDirection: number;\n    assignmentAction: number;\n    filterType: string | null;\n    filterName: string | null;\n    isMigrated: boolean;\n    status: 'Success' | 'Failed';\n    errorMessage: string | null;\n    processedAt: string;\n    batchIndex: number | null;\n    [key: string]: unknown;\n}\n\n\ninterface ValidationResult {\n    id: string;\n    hasCorrectAssignment: boolean;\n    message?: {\n        status?: string;\n        reason?: string;\n    }\n    policy?: {\n        id: string;\n        name: string;\n        policyType: string;\n        \"policySubType\": string;\n        \"createdDateTime\": string,\n        \"creationSource\": string,\n        \"description\": string,\n        \"lastModifiedDateTime\": string,\n        \"isAssigned\": boolean,\n        assignments: Assignment[];\n        settingCount: number;\n        platforms: string;\n        settings: PolicySettings;\n}\n}\n\n// Add new interface for validation errors\ninterface CSVValidationError {\n    rowIndex: number;\n    field: string;\n    message: string;\n}\n\ninterface GroupData {\n    id?: string;\n    displayName?: string;\n    description?: string;\n    membershipRule?: string;\n    createdDateTime?: string;\n    groupCount?: {\n        userCount: number;\n        deviceCount: number;\n        groupCount: number;\n    };\n    members?: unknown;\n    memberOf?: Array<{\n        '@odata.type': string;\n        id: string;\n        displayName: string;\n        createdDateTime: string;\n        type: string;\n    }>;\n    error?: string;\n}\n\nfunction AssignmentRolloutContent() {\n    // API CALLS\n    const { instance, accounts } = useMsal();\n    const { request, cancel } = useApiRequest();\n    // Consent dialog state when not enough permissions\n    const [showConsentDialog, setShowConsentDialog] = useState(false);\n    const [consentUrl, setConsentUrl] = useState('');\n\n\n    const fileInputRef = useRef<HTMLInputElement>(null);\n\n    // State management\n    const [currentStep, setCurrentStep] = useState<'upload' | 'compare' | 'migrate' | 'results' | 'validate'>('upload');\n\n    const [csvData, setCsvData] = useState<CSVRow[]>([]);\n    const [comparisonResults, setComparisonResults] = useState<ComparisonResult[]>([]);\n    const [selectedRows, setSelectedRows] = useState<string[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [backupLoading, setBackupLoading] = useState(false);\n\n    const [error, setError] = useState<string | null>(null);\n    const [migrationProgress, setMigrationProgress] = useState(0);\n    const [validationComplete, setValidationComplete] = useState(false);\n    const [validationResults, setValidationResults] = useState<ValidationResult[]>([]);\n    const [migrationResults, setMigrationResults] = useState<MigrationResult[]>([]);\n\n    const [currentPage, setCurrentPage] = useState(1);\n    const [uploadCurrentPage, setUploadCurrentPage] = useState(1);\n    const [compareCurrentPage, setCompareCurrentPage] = useState(1);\n    const [validationCurrentPage, setValidationCurrentPage] = useState(1);\n\n\n    // Group assignments dialog state\n    const [showAssignmentsDialog, setShowAssignmentsDialog] = useState(false);\n    const [selectedAssignments, setSelectedAssignments] = useState<Assignment[]>([]);\n    const [assignmentGroups, setAssignmentGroups] = useState<{[key: string]: GroupData}>({});\n    const [loadingAssignmentGroups, setLoadingAssignmentGroups] = useState<string[]>([]);\n\n\n    // Add pagination logic before the return statement\n    const [itemsPerPage, setItemsPerPage] = useState(ITEMS_PER_PAGE);\n    const startIndex = (currentPage - 1) * itemsPerPage;\n    const endIndex = startIndex + itemsPerPage;\n    const paginatedResults = comparisonResults.slice(startIndex, endIndex);\n    const totalPages = Math.ceil(comparisonResults.length / itemsPerPage);\n\n    const { showConsent } = useConsent();\n\n    const [migrationSuccessful, setMigrationSuccessful] = useState(false);\n\n    const [expandedRows, setExpandedRows] = useState<string[]>([]);\n\n// Add this component before the uploadColumns definition\n    const ValidationStatusCell = ({ csvRow }: { csvRow: CSVRow }) => {\n        const [showTooltip, setShowTooltip] = useState(false);\n        const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 });\n        const iconRef = useRef<HTMLDivElement>(null);\n\n        const handleMouseEnter = () => {\n            if (iconRef.current) {\n                const rect = iconRef.current.getBoundingClientRect();\n                setTooltipPosition({\n                    x: rect.left,\n                    y: rect.bottom + 8\n                });\n                setShowTooltip(true);\n            }\n        };\n\n        if (!csvRow.isValid) {\n            return (\n                <>\n                    <div\n                        ref={iconRef}\n                        onMouseEnter={handleMouseEnter}\n                        onMouseLeave={() => setShowTooltip(false)}\n                        className=\"flex items-center justify-center cursor-help\"\n                    >\n                        <AlertTriangle className=\"h-5 w-5 text-red-500\" />\n                    </div>\n                    {showTooltip && ReactDOM.createPortal(\n                        <div\n                            className=\"fixed z-[10000] bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-3 shadow-xl min-w-[280px] max-w-[400px]\"\n                            style={{\n                                left: `${tooltipPosition.x}px`,\n                                top: `${tooltipPosition.y}px`\n                            }}\n                        >\n                            <div className=\"absolute -top-1 left-4 w-2 h-2 bg-red-50 dark:bg-red-900 border-l border-t border-red-200 dark:border-red-700 transform rotate-45\"></div>\n                            <p className=\"text-xs font-semibold text-red-800 dark:text-red-200 mb-2\">Validation Errors:</p>\n                            <ul className=\"text-xs text-red-700 dark:text-red-300 space-y-1\">\n                                {csvRow.validationErrors?.map((error, idx) => (\n                                    <li key={idx} className=\"leading-relaxed\"> {error.message}</li>\n                                ))}\n                            </ul>\n                        </div>,\n                        document.body\n                    )}\n                </>\n            );\n        }\n\n        return (\n            <div className=\"flex items-center justify-center\">\n                <CheckCircle2 className=\"h-5 w-5 text-green-500\" />\n            </div>\n        );\n    };\n\n    const uploadColumns = [\n        {\n            key: 'validationStatusSort',\n            label: 'Status',\n            width: 25,\n            maxWidth: 25,\n            minWidth: 25,\n            sortable: true,\n            sortValue: (row: Record<string, unknown>) => {\n                const csvRow = row as unknown as CSVRow;\n                // Return 0 for invalid (sorts first), 1 for valid (sorts last)\n                return csvRow.isValid ? 1 : 0;\n            },\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const csvRow = row as unknown as CSVRow;\n                return <ValidationStatusCell csvRow={csvRow} />;\n            }\n        },\n        {\n            key: 'PolicyName',\n            label: 'Policy Name',\n            minWidth: 200,\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const csvRow = row as unknown as CSVRow;\n                const hasError = csvRow.validationErrors?.some(e => e.field === 'PolicyName');\n                return (\n                    <div className={`text-sm font-medium cursor-pointer truncate block w-full text-left ${\n                        hasError ? 'text-red-600 font-bold' : ''\n                    }`} title={String(value)}>\n                        {String(value) || <span className=\"text-red-500 italic\">Missing</span>}\n                    </div>\n                );\n            }\n        },\n        {\n            key: 'GroupName',\n            label: 'Group Name',\n            minWidth: 150,\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const csvRow = row as unknown as CSVRow;\n                const hasError = csvRow.validationErrors?.some(e => e.field === 'GroupName');\n                return (\n                    <div className={`text-sm font-medium cursor-pointer truncate block w-full text-left ${\n                        hasError ? 'text-red-600 font-bold' :\n                            csvRow.AssignmentAction === 'NoAssignment' ? 'text-gray-400' : ''\n                    }`} title={String(value)}>\n                        {String(value) || (hasError ? <span className=\"text-red-500 italic\">Missing</span> : '-')}\n                    </div>\n                );\n            }\n        },\n        {\n            key: 'AssignmentDirection',\n            label: 'Direction',\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const csvRow = row as CSVRow;\n                const hasError = csvRow.validationErrors?.some(e => e.field === 'AssignmentDirection');\n\n                if (hasError) {\n                    return (\n                        <Badge variant=\"destructive\">\n                            <XCircle className=\"h-3 w-3 mr-1\" />\n                            Missing\n                        </Badge>\n                    );\n                }\n\n                return (\n                    <Badge\n                        variant={csvRow.AssignmentDirection === 'Include' ? 'default' : 'destructive'}\n                        className={csvRow.AssignmentAction === 'NoAssignment' ? 'opacity-50' : ''}\n                    >\n                        {csvRow.AssignmentDirection}\n                    </Badge>\n                );\n            }\n        },\n        {\n            key: 'AssignmentAction',\n            label: 'Action',\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const csvRow = row as CSVRow;\n                const hasError = csvRow.validationErrors?.some(e => e.field === 'AssignmentAction');\n\n                if (hasError) {\n                    return (\n                        <div className=\"flex items-center gap-2\">\n                            <Badge variant=\"destructive\">\n                                <XCircle className=\"h-3 w-3 mr-1\" />\n                                Invalid\n                            </Badge>\n                            {csvRow.originalActionValue && (\n                                <span className=\"text-xs text-red-600\">\n                        &quot;{csvRow.originalActionValue}&quot;\n                    </span>\n                            )}\n                        </div>\n                    );\n                }\n\n                if (!csvRow.isValidAction) {\n                    return (\n                        <div className=\"flex items-center gap-2\">\n                            <Badge variant=\"destructive\">Invalid</Badge>\n                            <span className=\"text-xs text-red-600\">\n                    &quot;{csvRow.originalActionValue}&quot;\n                </span>\n                        </div>\n                    );\n                }\n\n                return (\n                    <Badge\n                        variant={\n                            csvRow.AssignmentAction === 'Add' ? 'default' :\n                                csvRow.AssignmentAction === 'Replace' ? 'default' :\n                                    csvRow.AssignmentAction === 'Remove' ? 'destructive' :\n                                        csvRow.AssignmentAction === 'NoAssignment' ? 'secondary' : 'secondary'\n                        }\n                        className={\n                            csvRow.AssignmentAction === 'Add' ? 'bg-green-500 hover:bg-green-600 text-white' :\n                                csvRow.AssignmentAction === 'Replace' ? 'bg-blue-500 hover:bg-blue-600 text-white' :\n                                    csvRow.AssignmentAction === 'Remove' ? 'bg-orange-500 hover:bg-orange-600 text-white' :\n                                        csvRow.AssignmentAction === 'NoAssignment' ? 'bg-gray-500 hover:bg-gray-600 text-white' : ''\n                        }\n                    >\n                        {csvRow.AssignmentAction}\n                    </Badge>\n                );\n            }\n        },\n        {\n            key: 'FilterName',\n            label: 'Filter Name',\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const csvRow = row as CSVRow;\n                return csvRow.FilterName ? (\n                    <div className={`max-w-xs truncate ${csvRow.AssignmentAction === 'NoAssignment' ? 'text-gray-400' : ''}`} title={csvRow.FilterName}>\n                        {csvRow.FilterName}\n                    </div>\n                ) : (\n                    <span className=\"text-gray-400\">-</span>\n                );\n            }\n        },\n        {\n            key: 'FilterType',\n            label: 'Filter Type',\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const csvRow = row as CSVRow;\n                return csvRow.FilterType ? (\n                    <Badge\n                        variant={csvRow.FilterType === 'Include' ? 'default' : 'secondary'}\n                        className={csvRow.AssignmentAction === 'NoAssignment' ? 'opacity-50' : ''}\n                    >\n                        {csvRow.FilterType}\n                    </Badge>\n                ) : (\n                    <span className=\"text-gray-400\">-</span>\n                );\n            }\n        }\n    ];\n\n    const MigrationCheckCell = ({ result }: { result: ComparisonResult }) => {\n        const [showTooltip, setShowTooltip] = useState(false);\n        const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 });\n        const iconRef = useRef<HTMLDivElement>(null);\n\n        const handleMouseEnter = () => {\n            if (iconRef.current) {\n                const rect = iconRef.current.getBoundingClientRect();\n                setTooltipPosition({\n                    x: rect.left,\n                    y: rect.bottom + 8\n                });\n                setShowTooltip(true);\n            }\n        };\n\n        const check = result.migrationCheckResult;\n        if (!check) return null;\n\n        // Check if already migrated\n        if (result.isMigrated) {\n            return (\n                <>\n                    <div\n                        ref={iconRef}\n                        onMouseEnter={handleMouseEnter}\n                        onMouseLeave={() => setShowTooltip(false)}\n                        className=\"flex items-center justify-center cursor-help\"\n                    >\n                        <Circle className=\"h-5 w-5 text-blue-500\" />\n                    </div>\n                    {showTooltip && ReactDOM.createPortal(\n                        <div\n                            className=\"fixed z-[10000] bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-700 rounded-lg p-3 shadow-xl min-w-[280px] max-w-[400px]\"\n                            style={{\n                                left: `${tooltipPosition.x}px`,\n                                top: `${tooltipPosition.y}px`\n                            }}\n                        >\n                            <div className=\"absolute -top-1 left-4 w-2 h-2 bg-blue-50 dark:bg-blue-900 border-l border-t border-blue-200 dark:border-blue-700 transform rotate-45\"></div>\n                            <p className=\"text-xs font-semibold text-blue-800 dark:text-blue-200\">Already Migrated</p>\n                        </div>,\n                        document.body\n                    )}\n                </>\n            );\n        }\n\n        const allChecksPass = check.policyExists && check.policyIsUnique &&\n            check.groupExists && check.correctAssignmentTypeProvided &&\n            check.correctAssignmentActionProvided && check.assignmentIsCompatible;\n\n        const hasWarnings = check.filterExist === false || check.filterIsUnique === false ||\n            check.correctFilterPlatform === false || check.correctFilterTypeProvided === false;\n\n        const errors: string[] = [];\n        const warnings: string[] = [];\n        const compatibilityErrors: string[] = [];\n\n        if (!check.policyExists) errors.push(\"Policy not found\");\n        if (!check.policyIsUnique) errors.push(\"Multiple policies found\");\n        if (!check.groupExists) errors.push(\"Group not found\");\n        if (!check.correctAssignmentTypeProvided) errors.push(\"Invalid assignment type\");\n        if (!check.correctAssignmentActionProvided) errors.push(\"Invalid assignment action\");\n\n        if (check.filterExist === false) warnings.push(\"Filter not found\");\n        if (check.filterIsUnique === false) warnings.push(\"Multiple filters found\");\n        if (check.correctFilterPlatform === false) warnings.push(\"Incorrect filter platform\");\n        if (check.correctFilterTypeProvided === false) warnings.push(\"Invalid filter type\");\n\n        // Add compatibility errors\n        if (check.assignmentIsCompatible === false && check.compatibilityErrors && check.compatibilityErrors.length > 0) {\n            compatibilityErrors.push(...check.compatibilityErrors);\n        }\n\n        // IMPORTANT: If there are compatibility errors, always show red regardless of other checks\n        if (compatibilityErrors.length > 0 || !allChecksPass) {\n            return (\n                <>\n                    <div\n                        ref={iconRef}\n                        onMouseEnter={handleMouseEnter}\n                        onMouseLeave={() => setShowTooltip(false)}\n                        className=\"flex items-center justify-center cursor-help\"\n                    >\n                        <AlertTriangle className=\"h-5 w-5 text-red-500\" />\n                    </div>\n                    {showTooltip && ReactDOM.createPortal(\n                        <div\n                            className=\"fixed z-[10000] bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-3 shadow-xl min-w-[280px] max-w-[400px]\"\n                            style={{\n                                left: `${tooltipPosition.x}px`,\n                                top: `${tooltipPosition.y}px`\n                            }}\n                        >\n                            <div className=\"absolute -top-1 left-4 w-2 h-2 bg-red-50 dark:bg-red-900 border-l border-t border-red-200 dark:border-red-700 transform rotate-45\"></div>\n                            {errors.length > 0 && (\n                                <>\n                                    <p className=\"text-xs font-semibold text-red-800 dark:text-red-200 mb-2\">Migration Check Errors:</p>\n                                    <ul className=\"text-xs text-red-700 dark:text-red-300 space-y-1 mb-3\">\n                                        {errors.map((error, idx) => (\n                                            <li key={idx} className=\"leading-relaxed\"> {error}</li>\n                                        ))}\n                                    </ul>\n                                </>\n                            )}\n                            {compatibilityErrors.length > 0 && (\n                                <>\n                                    <p className=\"text-xs font-semibold text-red-800 dark:text-red-200 mb-2\">Compatibility Issues:</p>\n                                    <ul className=\"text-xs text-red-700 dark:text-red-300 space-y-1\">\n                                        {compatibilityErrors.map((error, idx) => (\n                                            <li key={idx} className=\"leading-relaxed\"> {error}</li>\n                                        ))}\n                                    </ul>\n                                </>\n                            )}\n                        </div>,\n                        document.body\n                    )}\n                </>\n            );\n        }\n\n        // Show yellow warning if all checks pass but there are warnings\n        if (allChecksPass && hasWarnings) {\n            return (\n                <>\n                    <div\n                        ref={iconRef}\n                        onMouseEnter={handleMouseEnter}\n                        onMouseLeave={() => setShowTooltip(false)}\n                        className=\"flex items-center justify-center cursor-help\"\n                    >\n                        <AlertTriangle className=\"h-5 w-5 text-yellow-500\" />\n                    </div>\n                    {showTooltip && ReactDOM.createPortal(\n                        <div\n                            className=\"fixed z-[10000] bg-yellow-50 dark:bg-yellow-900 border border-yellow-200 dark:border-yellow-700 rounded-lg p-3 shadow-xl min-w-[280px] max-w-[400px]\"\n                            style={{\n                                left: `${tooltipPosition.x}px`,\n                                top: `${tooltipPosition.y}px`\n                            }}\n                        >\n                            <div className=\"absolute -top-1 left-4 w-2 h-2 bg-yellow-50 dark:bg-yellow-900 border-l border-t border-yellow-200 dark:border-yellow-700 transform rotate-45\"></div>\n                            <p className=\"text-xs font-semibold text-yellow-800 dark:text-yellow-200 mb-2\">Filter Warnings:</p>\n                            <ul className=\"text-xs text-yellow-700 dark:text-yellow-300 space-y-1\">\n                                {warnings.map((warning, idx) => (\n                                    <li key={idx} className=\"leading-relaxed\"> {warning}</li>\n                                ))}\n                            </ul>\n                        </div>,\n                        document.body\n                    )}\n                </>\n            );\n        }\n\n        // Show green checkmark only if all checks pass and no warnings\n        return (\n            <div className=\"flex items-center justify-center\">\n                <CheckCircle2 className=\"h-5 w-5 text-green-500\" />\n            </div>\n        );\n    };\n\n    const comparisonColumns = [\n        {\n            key: '_select',\n            label: '',\n            width: 10,\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n                const isSelected = selectedRows.includes(result.id);\n                const isDisabled = !result.isReadyForMigration || result.isMigrated;\n\n                return (\n                    <div onClick={(e) => e.stopPropagation()}>\n                        <input\n                            type=\"checkbox\"\n                            disabled={isDisabled}\n                            checked={isSelected}\n                            onChange={(e) => {\n                                e.stopPropagation();\n\n                                const newChecked = e.target.checked;\n                                console.log('Before update:', {\n                                    resultId: result.id,\n                                    newChecked,\n                                    currentSelectedRows: selectedRows\n                                });\n\n                                setSelectedRows(prev => {\n                                    const updated = newChecked\n                                        ? (prev.includes(result.id) ? prev : [...prev, result.id])\n                                        : prev.filter(id => id !== result.id);\n\n                                    console.log('After update:', updated);\n                                    return updated;\n                                });\n                            }}\n                            className={isDisabled ? 'cursor-not-allowed opacity-50' : 'cursor-pointer'}\n                        />\n                    </div>\n                );\n            }\n        },\n        {\n            key: 'migrationCheckSortValue',\n            label: 'Status',\n            width: 25,\n            sortable: true,\n            sortValue: (row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n                const check = result.migrationCheckResult;\n                if (!check) return 2;\n\n                const allChecksPass = check.policyExists && check.policyIsUnique &&\n                    check.groupExists && check.correctAssignmentTypeProvided &&\n                    check.correctAssignmentActionProvided && check.assignmentIsCompatible;\n                return allChecksPass ? 1 : 0;\n            },\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n                return <MigrationCheckCell result={result} />;\n            }\n        },\n        {\n            key: 'providedPolicyName',\n            label: 'Policy Name',\n            minWidth: 250,\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n                const hasDuplicates = result.policies && result.policies.length > 1;\n                const isExpanded = expandedRows.includes(result.id);\n                const displayPolicy = result.policy || (result.policies ? result.policies[0] : null);\n\n                return displayPolicy ? (\n                    <div className=\"flex items-center gap-2\">\n                        {hasDuplicates && (\n                            <button\n                                onClick={() => toggleExpanded(result.id)}\n                                className=\"text-blue-500 hover:text-blue-700\"\n                            >\n                                {isExpanded ? '' : ''}\n                            </button>\n                        )}\n                        <div>\n                            <div className=\"flex items-center gap-2\">\n                                <div className=\"text-sm font-medium cursor-pointer truncate block w-full text-left\" title={displayPolicy.name || 'Unknown Policy'}>\n                                    {displayPolicy.name || 'Unknown Policy'}\n                                </div>\n                                {hasDuplicates && (\n                                    <Badge variant=\"secondary\" className=\"text-xs\">\n                                        {result.policies?.length || 0} duplicates\n                                    </Badge>\n                                )}\n                            </div>\n                            <div className=\"text-xs text-gray-500\">\n                                {displayPolicy.policyType || 'Unknown Type'}  {displayPolicy.platform || 'Unknown Platform'}\n                            </div>\n                        </div>\n                    </div>\n                ) : (\n                    <div className=\"text-red-600 text-sm\">\n                        <XCircle className=\"h-4 w-4 inline mr-1\"/>\n                        <div>\n                            <div className=\"text-sm font-medium cursor-pointer truncate block w-full text-left\">{result.providedPolicyName || 'Unknown policy name'}</div>\n                            <div className=\"text-xs text-red-500\">Policy not found</div>\n                        </div>\n                    </div>\n                );\n            }\n        },\n        {\n            key: 'assignedGroups',\n            label: 'Current Assignments',\n            width: 150,\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n                const displayPolicy = result.policy || (result.policies ? result.policies[0] : null);\n                return displayPolicy ? (\n                    <Badge\n                        variant=\"outline\"\n                        className=\"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800\"\n                        onClick={(e) => {\n                            e.stopPropagation();\n                            handleAssignmentsClick(result);\n                        }}\n                    >\n                        {displayPolicy.assignments?.length || 0} groups\n                    </Badge>\n                ) : (\n                    <Badge variant=\"destructive\">N/A</Badge>\n                );\n            }\n        },\n        {\n            key: 'groupToMigrate',\n            label: 'Target Group',\n            minWidth: 150,\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n                return result.groupToMigrate || result.csvRow?.GroupName || '-';\n            }\n        },\n        {\n            key: 'assignmentDirection',\n            label: 'Direction',\n            width: 100,\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n                return result.assignmentDirection ? (\n                    <Badge variant={result.assignmentDirection === 'Include' ? 'default' : 'destructive'}>\n                        {result.assignmentDirection}\n                    </Badge>\n                ) : null;\n            }\n        },\n        {\n            key: 'assignmentAction',\n            label: 'Action',\n            width: 120,\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n                return result.assignmentAction ? (\n                    <Badge variant={\n                        result.assignmentAction === 'Add' ? 'default' :\n                            result.assignmentAction === 'NoAssignment' ? 'destructive' : 'secondary'\n                    }>\n                        {result.assignmentAction}\n                    </Badge>\n                ) : null;\n            }\n        },\n        {\n            key: 'filterName',\n            label: 'Filter Name',\n            minWidth: 120,\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n                return result.filterName || result.csvRow?.FilterName || '-';\n            }\n        },\n        {\n            key: 'filterType',\n            label: 'Filter Type',\n            minWidth: 120,\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n                if (!result.filterType) return null;\n\n                if (result.filterType.toLowerCase() === 'none') {\n                    return (\n                        <Badge variant=\"outline\" className=\"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400\">\n                            {result.filterType}\n                        </Badge>\n                    );\n                }\n\n                return (\n                    <Badge variant={result.filterType === 'include' ? 'default' : 'destructive'}\n                           className={result.filterType === 'include' ? 'bg-green-500 hover:bg-green-600 text-white' : ''}\n                    >\n                        {result.filterType}\n                    </Badge>\n\n                );\n            }\n        }\n    ];\n\n    const migrationResultsColumns = [\n        {\n            key: 'status',\n            label: 'Status',\n            width: 80,\n            sortable: true,\n            sortValue: (row: Record<string, unknown>) => {\n                const result = row as unknown as MigrationResult;\n                return result.status === 'Success' ? 1 : 0;\n            },\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as MigrationResult;\n                return result.status === 'Success' ? (\n                    <Badge variant=\"default\" className=\"bg-green-600\">\n                        <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n                        Success\n                    </Badge>\n                ) : (\n                    <Badge variant=\"destructive\">\n                        <XCircle className=\"h-3 w-3 mr-1\" />\n                        Failed\n                    </Badge>\n                );\n            }\n        },\n        {\n            key: 'providedPolicyName',\n            label: 'Policy Name',\n            minWidth: 200,\n            render: (value: unknown) => (\n                <span className=\"text-sm font-medium\" title={String(value)}>\n                    {String(value)}\n                </span>\n            )\n        },\n        {\n            key: 'groupToMigrate',\n            label: 'Group',\n            minWidth: 150,\n            render: (value: unknown) => (\n                <span className=\"text-sm\" title={String(value)}>\n                    {String(value)}\n                </span>\n            )\n        },\n        {\n            key: 'assignmentAction',\n            label: 'Action',\n            width: 120,\n            render: (value: unknown) => {\n                const actionMap: Record<number, string> = {\n                    0: 'Add',\n                    1: 'Remove',\n                    2: 'Replace',\n                    3: 'NoAssignment'\n                };\n                const action = actionMap[Number(value)] || 'Unknown';\n                return (\n                    <Badge variant={action === 'Add' ? 'default' : 'secondary'}>\n                        {action}\n                    </Badge>\n                );\n            }\n        },\n        {\n            key: 'errorMessage',\n            label: 'Message',\n            minWidth: 300,\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as MigrationResult;\n                if (result.status === 'Success') {\n                    return <span className=\"text-sm text-green-600\">Successfully migrated</span>;\n                }\n                return (\n                    <span className=\"text-sm text-red-600\" title={String(value)}>\n                        {String(value)}\n                    </span>\n                );\n            }\n        },\n        {\n            key: 'processedAt',\n            label: 'Processed',\n            width: 180,\n            render: (value: unknown) => (\n                <span className=\"text-sm text-gray-500\">\n                    {new Date(String(value)).toLocaleString()}\n                </span>\n            )\n        }\n    ];\n\n    const validationColumns = [\n        {\n            key: 'policyName',\n            label: 'Policy Name',\n            minWidth: 200,\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n                return result.policy ? (\n                    <div className=\"text-sm font-medium cursor-pointer truncate block w-full text-left\" title={result.policy.name}>\n                        {result.policy.name}\n                    </div>\n                ) : (\n                    <span className=\"text-red-600\">Policy not found</span>\n                );\n            }\n        },\n        {\n            key: 'groupName',\n            label: 'Group',\n            minWidth: 150,\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n                return result.csvRow?.GroupName ? (\n                    <div className=\"text-sm font-medium cursor-pointer truncate block w-full text-left\" title={result.csvRow?.GroupName}>\n                        {result.csvRow?.GroupName}\n                    </div>\n                ) : (\n                    <span className=\"text-red-600\">-</span>\n                );\n            }\n        },\n        {\n            key: 'assignmentAction',\n            label: 'Action',\n            width: 120,\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n                return result.csvRow?.AssignmentAction ? (\n                    <Badge variant={result.csvRow.AssignmentAction === 'Add' ? 'default' : 'secondary'}>\n                        {result.csvRow.AssignmentAction}\n                    </Badge>\n                ) : null;\n            }\n        },\n        {\n            key: 'validationStatus',\n            label: 'Validation Status',\n            minWidth: 150,\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n\n                if (result.validationStatus === 'valid') {\n                    return (\n                        <Badge variant=\"default\" className=\"bg-green-100 text-green-800\">\n                            <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n                            Valid\n                        </Badge>\n                    );\n                }\n                if (result.validationStatus === 'invalid') {\n                    return (\n                        <Badge variant=\"destructive\">\n                            <XCircle className=\"h-3 w-3 mr-1\" />\n                            Invalid\n                        </Badge>\n                    );\n                }\n                if (result.validationStatus === 'warning') {\n                    return (\n                        <Badge variant=\"secondary\" className=\"bg-yellow-100 text-yellow-800\">\n                            <AlertTriangle className=\"h-3 w-3 mr-1\" />\n                            Warning\n                        </Badge>\n                    );\n                }\n                if (result.validationStatus === 'pending') {\n                    return <Badge variant=\"outline\">Pending</Badge>;\n                }\n                return null;\n            }\n        },\n        {\n            key: 'validationMessage',\n            label: 'Message',\n            minWidth: 200,\n            render: (_: unknown, row: Record<string, unknown>) => {\n                const result = row as unknown as ComparisonResult;\n                return (\n                    <span className=\"text-sm font-medium cursor-pointer truncate block w-full text-left\">\n                    {result.validationMessage || '-'}\n                </span>\n                );\n            }\n        }\n    ];\n\n    // Drag and drop\n    const [isDragOver, setIsDragOver] = useState(false);\n\n// Add these drag and drop handlers\n    const handleDragOver = useCallback((e: React.DragEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsDragOver(true);\n    }, []);\n\n    const handleDragLeave = useCallback((e: React.DragEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsDragOver(false);\n    }, []);\n\n    const handleDrop = useCallback((e: React.DragEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsDragOver(false);\n\n        const files = e.dataTransfer.files;\n        if (files && files.length > 0) {\n            const file = files[0];\n            if (file.type === 'text/csv' || file.name.endsWith('.csv')) {\n                const reader = new FileReader();\n                reader.onload = (e) => {\n                    try {\n                        const content = e.target?.result as string;\n                        const parsed = parseCSV(content);\n                        setCsvData(parsed);\n                        setError(null);\n                    } catch (err) {\n                        setError('Failed to parse CSV file. Please check the format.');\n                    }\n                };\n                reader.readAsText(file);\n            } else {\n                setError('Please drop a CSV file.');\n            }\n        }\n    }, []);\n\n    const [lastClickedIndex, setLastClickedIndex] = useState<number | null>(null);\n\n    const handleRowClick = (row: Record<string, unknown>, index: number, event?: React.MouseEvent) => {\n        const result = row as unknown as ComparisonResult;\n        const isDisabled = !result.isReadyForMigration || result.isMigrated;\n\n        if (isDisabled) return;\n\n        // Handle shift-click for range selection/deselection\n        if (event?.shiftKey && lastClickedIndex !== null) {\n            const currentIndex = index;\n            const start = Math.min(lastClickedIndex, currentIndex);\n            const end = Math.max(lastClickedIndex, currentIndex);\n\n            const rowsInRange = comparisonResults\n                .slice(start, end + 1)\n                .filter(r => r.isReadyForMigration && !r.isMigrated)\n                .map(r => r.id);\n\n            // Check if all rows in range are already selected\n            const allSelected = rowsInRange.every(id => selectedRows.includes(id));\n\n            setSelectedRows(prev => {\n                if (allSelected) {\n                    // Deselect all rows in range\n                    return prev.filter(id => !rowsInRange.includes(id));\n                } else {\n                    // Select all rows in range\n                    const newSelection = [...prev];\n                    rowsInRange.forEach(id => {\n                        if (!newSelection.includes(id)) {\n                            newSelection.push(id);\n                        }\n                    });\n                    return newSelection;\n                }\n            });\n        } else {\n            // Normal click - toggle single row selection\n            setSelectedRows(prev =>\n                prev.includes(result.id)\n                    ? prev.filter(id => id !== result.id)\n                    : [...prev, result.id]\n            );\n        }\n\n        setLastClickedIndex(index);\n    };\n\nconst MigrationOverlay = ({ progress }: { progress: number }) => {\n    return ReactDOM.createPortal(\n        <div className=\"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center\">\n            <div className=\"relative\">\n                {/* Animated rings */}\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <div className=\"w-64 h-64 border-4 border-blue-500/30 rounded-full animate-ping\" style={{ animationDuration: '2s' }}></div>\n                    <div className=\"absolute w-48 h-48 border-4 border-purple-500/30 rounded-full animate-ping\" style={{ animationDuration: '1.5s' }}></div>\n                    <div className=\"absolute w-32 h-32 border-4 border-green-500/30 rounded-full animate-ping\" style={{ animationDuration: '1s' }}></div>\n                </div>\n\n                {/* Main card */}\n                <div className=\"relative bg-gradient-to-br from-yellow-500 to-amber-600 p-8 rounded-2xl shadow-2xl min-w-[400px]\">\n                    <div className=\"text-center space-y-6\">\n                        {/* Icon */}\n                        <div className=\"flex justify-center\">\n                            <div className=\"relative\">\n                                <ArrowRight className=\"h-16 w-16 text-white animate-pulse\" />\n                                <div className=\"absolute -inset-2 bg-white/20 rounded-full blur-xl animate-pulse\"></div>\n                            </div>\n                        </div>\n\n                        {/* Text */}\n                        <div>\n                            <h3 className=\"text-2xl font-bold text-white mb-2\">\n                                Migrating Assignments\n                            </h3>\n                            <p className=\"text-blue-100\">\n                                Please wait while we process your migrations...\n                            </p>\n                        </div>\n\n\n                        {/* Animated dots */}\n                        <div className=\"flex justify-center gap-2\">\n                            <div className=\"w-2 h-2 bg-white rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\n                            <div className=\"w-2 h-2 bg-white rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\n                            <div className=\"w-2 h-2 bg-white rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>,\n        document.body\n    );\n};\n\n    const toggleExpanded = (resultId: string) => {\n        setExpandedRows(prev =>\n            prev.includes(resultId)\n                ? prev.filter(id => id !== resultId)\n                : [...prev, resultId]\n        );\n    };\n\n    // CSV File Processing\n    const parseCSV = (content: string): CSVRow[] => {\n        const lines = content.split('\\n').filter(line => line.trim());\n        const headers = lines[0].split(';').map(h => h.trim());\n\n        return lines.slice(1).map((line, index) => {\n            const values = line.split(';');\n            const validationErrors: CSVValidationError[] = [];\n\n            const nullIfEmpty = (value: string) => value?.trim() === '' ? null : value?.trim() || null;\n\n            const getAssignmentDirection = (value: string): 'Include' | 'Exclude' => {\n                const normalized = value?.trim().toLowerCase();\n                return normalized === 'exclude' ? 'Exclude' : 'Include';\n            };\n\n            const getAssignmentAction = (value: string): { action: 'Add' | 'Remove' | 'NoAssignment' | 'Replace'; isValid: boolean; originalValue?: string } => {\n                const normalized = value?.trim().toLowerCase();\n                if (normalized === 'add') return { action: 'Add', isValid: true };\n                if (normalized === 'replace') return { action: 'Replace', isValid: true };\n                if (normalized === 'remove') return { action: 'Remove', isValid: true };\n                if (normalized === 'noassignment') return { action: 'NoAssignment', isValid: true };\n\n                if (!value || value.trim() === '') {\n                    return { action: 'Add', isValid: true };\n                }\n\n                return {\n                    action: 'Add',\n                    isValid: false,\n                    originalValue: value?.trim()\n                };\n            };\n\n            console.log('CSV Line:', line);\n            console.log('Values:', values);\n            console.log('FilterName raw value:', values[4]);\n            console.log('FilterName after nullIfEmpty:', nullIfEmpty(values[4]));\n\n            // Validate required fields\n            const policyName = values[0]?.trim() || '';\n            const groupName = values[1]?.trim() || '';\n            const assignmentDirection = values[2]?.trim() || '';\n            const assignmentAction = values[3]?.trim() || '';\n\n            // Get action result first to determine if other fields are needed\n            const actionResult = getAssignmentAction(assignmentAction);\n\n            // Check PolicyName (always required)\n            if (!policyName) {\n                validationErrors.push({\n                    rowIndex: index + 2,\n                    field: 'PolicyName',\n                    message: 'Policy Name is required'\n                });\n            }\n\n            // Only validate GroupName and AssignmentDirection if action is not 'NoAssignment'\n            if (actionResult.action !== 'NoAssignment') {\n                // Check GroupName\n                if (!groupName) {\n                    validationErrors.push({\n                        rowIndex: index + 2,\n                        field: 'GroupName',\n                        message: 'Group Name is required for Add/Remove actions. You can also use All Users or All Devices.'\n                    });\n                }\n\n                // Check AssignmentDirection\n                if (!assignmentDirection) {\n                    validationErrors.push({\n                        rowIndex: index + 2,\n                        field: 'AssignmentDirection',\n                        message: 'Assignment Direction is required for Add/Remove actions'\n                    });\n                }\n            }\n\n            // Check AssignmentAction validity\n            if (!assignmentAction) {\n                validationErrors.push({\n                    rowIndex: index + 2,\n                    field: 'AssignmentAction',\n                    message: 'Assignment Action is required'\n                });\n            } else if (!actionResult.isValid) {\n                validationErrors.push({\n                    rowIndex: index + 2,\n                    field: 'AssignmentAction',\n                    message: `Invalid Assignment Action: \"${actionResult.originalValue}\". Must be Add, Remove, Replace, or NoAssignment`\n                });\n            }\n\n            return {\n                PolicyName: policyName,\n                GroupName: groupName,\n                AssignmentDirection: getAssignmentDirection(assignmentDirection),\n                AssignmentAction: actionResult.action,\n                FilterName: nullIfEmpty(values[4]),\n                FilterType: nullIfEmpty(values[5]),\n                isValidAction: actionResult.isValid,\n                originalActionValue: actionResult.originalValue,\n                validationErrors,\n                isValid: validationErrors.length === 0,\n                validationStatusSort: validationErrors.length === 0 ? 1 : 0\n            };\n        });\n    };\n\n\n\n    // Backup rows\n   const downloadBackups = async () => {\n       const readyForMigration = comparisonResults.filter(r => r.isReadyForMigration && !r.isMigrated);\n\n       if (readyForMigration.length === 0) {\n           alert('No policies ready for migration to backup');\n           return;\n       }\n\n       setBackupLoading(true);\n\n       try {\n           const JSZip = (await import('jszip')).default;\n           const zip = new JSZip();\n           const backupResults: { [id: string]: boolean } = {};\n           const tenantId = accounts[0]?.tenantId || 'unknown-tenant';\n           const loggedInUser = accounts[0]?.username || accounts[0]?.name || 'unknown-user';\n           const backupTimestamp = new Date().toISOString();\n\n           for (const policy of readyForMigration) {\n               try {\n                   const response = await instance.acquireTokenSilent({\n                       scopes: [apiScope],\n                       account: accounts[0]\n                   });\n\n                   const apiResponse = await fetch(`${EXPORT_ENDPOINT}/${policy.policy.policyType}/${policy.policy.id}`, {\n                       headers: {\n                           'Authorization': `Bearer ${response.accessToken}`,\n                           'Content-Type': 'application/json'\n                       }\n                   });\n\n                   if (apiResponse.ok) {\n                       const backupData = await apiResponse.json();\n                       const folderPath = `${policy.policy.policyType}/${policy.policy.name}_${policy.policy.id}.json`;\n                       zip.file(folderPath, JSON.stringify(backupData, null, 2));\n                       backupResults[policy.id] = true;\n                   } else {\n                       console.error(`Failed to backup policy ${policy.policy.id}`);\n                       backupResults[policy.id] = false;\n                   }\n               } catch (error) {\n                   console.error(`Failed to backup policy ${policy.policy.id}:`, error);\n                   backupResults[policy.id] = false;\n               }\n           }\n\n           // Create metadata\n           const metadata = {\n               backupInfo: {\n                   createdAt: backupTimestamp,\n                   createdBy: loggedInUser,\n                   tenantId: tenantId,\n                   backupType: 'policy_assignments',\n                   version: '1.0'\n               },\n               tenantInfo: {\n                   tenantId: tenantId,\n                   userPrincipalName: accounts[0]?.username || 'unknown',\n                   displayName: accounts[0]?.name || 'unknown'\n               },\n               statistics: {\n                   totalPoliciesRequested: readyForMigration.length,\n                   totalPoliciesBackedUp: Object.values(backupResults).filter(success => success).length,\n                   totalPoliciesFailed: Object.values(backupResults).filter(success => !success).length,\n                   policyTypeBreakdown: readyForMigration.reduce((acc, policy) => {\n                       const type = policy.policy.policyType;\n                       acc[type] = (acc[type] || 0) + 1;\n                       return acc;\n                   }, {} as Record<string, number>)\n               },\n               policies: readyForMigration.map(policy => ({\n                   id: policy.policy.id,\n                   name: policy.policy.name,\n                   type: policy.policy.policyType,\n                   platform: policy.policy.platform,\n                   backupSuccessful: backupResults[policy.id] === true,\n                   assignmentAction: policy.assignmentAction,\n                   targetGroup: policy.groupToMigrate\n               }))\n           };\n\n           // Add metadata file to root of ZIP\n           console.log('Adding metadata to ZIP:', metadata);\n           zip.file('backup_metadata.json', JSON.stringify(metadata, null, 2));\n           console.log('ZIP contents after adding metadata:', Object.keys(zip.files));\n\n\n           setComparisonResults(prev =>\n               prev.map(result => ({\n                   ...result,\n                   isBackedUp: backupResults[result.id] === true\n               }))\n           );\n\n           const content = await zip.generateAsync({ type: 'blob' });\n           const url = window.URL.createObjectURL(content);\n           const a = document.createElement('a');\n           a.href = url;\n           a.download = `policy_backups_${tenantId}_${new Date().toISOString().split('T')[0]}.zip`;\n           document.body.appendChild(a);\n           a.click();\n           window.URL.revokeObjectURL(url);\n           document.body.removeChild(a);\n\n           const successCount = Object.values(backupResults).filter(success => success).length;\n           const totalCount = Object.keys(backupResults).length;\n           alert(`Backup completed: ${successCount}/${totalCount} policies backed up successfully`);\n\n       } catch (error) {\n           console.error('Backup failed:', error);\n           alert('Backup failed. Please try again.');\n       } finally {\n           setBackupLoading(false);\n       }\n   };\n\n    const handleFileUpload = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0];\n        if (!file) return;\n\n        const reader = new FileReader();\n        reader.onload = (e) => {\n            try {\n                const content = e.target?.result as string;\n                const parsed = parseCSV(content);\n                setCsvData(parsed);\n                setError(null);\n            } catch (err) {\n                setError('Failed to parse CSV file. Please check the format.');\n            }\n        };\n        reader.readAsText(file);\n    }, []);\n\n\n    // API Calls\n    const compareAssignments = async () => {\n        if (!accounts.length || !csvData.length) return;\n\n        // Filter out invalid rows before sending to API\n        const validCsvData = csvData.filter(row => row.isValid);\n        const invalidRowCount = csvData.length - validCsvData.length;\n\n        if (invalidRowCount > 0) {\n            console.log(`Excluding ${invalidRowCount} invalid rows from comparison`);\n        }\n\n        if (validCsvData.length === 0) {\n            setError('No valid rows found in CSV. Please correct the validation errors and re-upload.');\n            return;\n        }\n\n        setLoading(true);\n        setError(null);\n\n        try {\n\n            const payloadData = validCsvData.map(row => ({\n                PolicyName: row.PolicyName,\n                GroupName: row.GroupName,\n                AssignmentDirection: row.AssignmentDirection,\n                AssignmentAction: row.AssignmentAction,\n                FilterName: row.FilterName,\n                FilterType: row.FilterType\n            }));\n\n            console.log('Payload being sent to API:', payloadData);\n\n            // The UserConsentRequiredError will be caught and handled by the useApiRequest hook\n            // which will automatically call showConsent with the consentUrl\n            const apiResponse = await request<AssignmentCompareApiResponse>(ASSIGNMENTS_COMPARE_ENDPOINT, {\n                method: 'POST',\n                body: JSON.stringify(payloadData)\n            });\n\n            if (!apiResponse?.data || !Array.isArray(apiResponse.data)) {\n                setError('Invalid data format received from server');\n                setLoading(false);\n                return;\n            }\n            const enhancedResults = apiResponse.data.map((item: ComparisonResult, index: number) => {\n                const check = item.migrationCheckResult;\n                let migrationCheckSortValue = 2; // default for no check data\n\n                if (check) {\n                    const allChecksPass = check.policyExists && check.policyIsUnique &&\n                        check.groupExists && check.correctAssignmentTypeProvided &&\n                        check.correctAssignmentActionProvided;\n                    migrationCheckSortValue = allChecksPass ? 1 : 0;\n                }\n\n                return {\n                    ...item,\n                    csvRow: {\n                        ...validCsvData[index],\n                    },\n                    isReadyForMigration: item.isReadyForMigration,\n                    isMigrated: item.isMigrated || false,\n                    isBackedUp: false,\n                    validationStatus: 'pending' as const,\n                    migrationCheckSortValue\n                };\n            });\n            setComparisonResults(enhancedResults);\n            setCurrentStep('migrate');\n        } catch (error) {\n            // Don't set an error if it was a consent error (already handled)\n            if (!(error instanceof UserConsentRequiredError)) {\n                setError(error instanceof Error ? error.message : 'Failed to compare assignments');\n            }\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const migrateSelectedAssignments = async () => {\n    if (!accounts.length || !selectedRows.length) return;\n\n    setLoading(true);\n    setMigrationProgress(1);\n\n    try {\n        const selectedComparisonResults = comparisonResults.filter(result =>\n            selectedRows.includes(result.id)\n        );\n\n        const migrationPayload = selectedComparisonResults.map(result => ({\n            PolicyId: result.policy?.id || '',\n            PolicyName: result.policy?.name || result.providedPolicyName || '',\n            AssignmentResourceName: result.csvRow?.GroupName || result.groupToMigrate || '',\n            AssignmentDirection: result.csvRow?.AssignmentDirection || result.assignmentDirection || 'Include',\n            AssignmentAction: result.csvRow?.AssignmentAction || result.assignmentAction || 'Add',\n            FilterName: result.csvRow?.FilterName || result.filterName || null,\n            FilterType: result.csvRow?.FilterType || result.filterType || 'none'\n        }));\n\n        const apiResponse = await request<AssignmentCompareApiResponse>(`${ASSIGNMENTS_ENDPOINT}/migrate`, {\n            method: 'POST',\n            body: JSON.stringify(migrationPayload)\n        });\n\n        if (!apiResponse || !apiResponse.data) {\n            setError('Failed to get response from server');\n            return;\n        }\n\n        if (apiResponse.status === 'Error' && apiResponse.message?.message === 'User challenge required') {\n            setConsentUrl(apiResponse.message.url || '');\n            setShowConsentDialog(true);\n            setLoading(false);\n            return;\n        }\n\n        for (let i = 0; i <= 100; i += 10) {\n            setMigrationProgress(i);\n            await new Promise(resolve => setTimeout(resolve, 200));\n        }\n\n        setMigrationResults(apiResponse.data as unknown as MigrationResult[]);\n\n        // Update comparison results with migration status AND validation status\n        setComparisonResults(prev =>\n            prev.map(result => {\n                const migrationResult = (apiResponse.data as unknown as MigrationResult[]).find(\n                    mr => mr.id === result.id\n                );\n\n                if (migrationResult) {\n                    return {\n                        ...result,\n                        isMigrated: migrationResult.status === 'Success',\n                        validationStatus: migrationResult.status === 'Success' ? 'pending' as const : result.validationStatus,\n                        isCurrentSessionValidation: migrationResult.status === 'Success'\n                    };\n                }\n                return result;\n            })\n        );\n\n        setCurrentStep('results');\n        setSelectedRows([]);\n\n    } catch (error) {\n        setError(error instanceof Error ? error.message : 'Migration failed');\n    } finally {\n        setLoading(false);\n    }\n};\n\n    const validateMigratedAssignments = async (results?: ComparisonResult[]) => {\n        if (!accounts.length) return;\n\n        // Filter to only validate successfully migrated items\n        const successfulMigrations = results?.filter(r =>\n             r.isMigrated\n        );\n\n        if (!successfulMigrations || successfulMigrations.length === 0) {\n            setError('No successful migrations to validate');\n            return;\n        }\n\n        setLoading(true);\n        setValidationComplete(false);\n\n        try {\n            console.log(`Validating ${successfulMigrations.length} successful migrations`);\n\n            const validationPayload = successfulMigrations.map(result => ({\n                Id: result.id,\n                ResourceType: result.policy?.policyType || '',\n                SubResourceType: result.policy?.policySubType || '',\n                ResourceId: result.policy?.id || result.id,\n                AssignmentId: result.assignmentId,\n                AssignmentType: result.assignmentType,\n                AssignmentDirection: result.csvRow?.AssignmentDirection,\n                AssignmentAction: result.csvRow?.AssignmentAction || '',\n                FilterId: result.filterToMigrate?.id && result.filterToMigrate.id !== \"00000000-0000-0000-0000-000000000000\"\n                    ? result.filterToMigrate.id\n                    : null,\n                FilterType: result.csvRow?.FilterType || null\n            }));\n\n            console.log('Validation payload:', validationPayload);\n\n            const validationData = await request<AssignmentCompareApiResponse>(`${ASSIGNMENTS_ENDPOINT}/validate`, {\n                method: 'POST',\n                body: JSON.stringify(validationPayload)\n            });\n\n            if (!validationData) {\n                setError('Failed to get response from server');\n                return;\n            }\n\n            if (validationData.status === 'Error' &&\n                validationData.message?.message === 'Additional permissions required') {\n\n                setConsentUrl(validationData.message.url || '');\n                setShowConsentDialog(true);\n                setLoading(false);\n                return;\n            }\n\n            if (!validationData.data || !Array.isArray(validationData.data)) {\n                setError('Invalid data format received from server');\n                return;\n            }\n\n            setValidationResults(validationData.data as unknown as ValidationResult[]);\n\n            // Only update the specific results that were validated\n            setComparisonResults(prev =>\n                prev.map(result => {\n                    const validation = (validationData.data as unknown as ValidationResult[]).find(\n                        (v: ValidationResult) => v.id === result.id\n                    );\n\n                    if (validation) {\n                        return {\n                            ...result,\n                            validationStatus: validation.hasCorrectAssignment ? 'valid' : 'invalid',\n                            validationMessage: validation.message?.reason || validation.message?.status || '',\n                            isCurrentSessionValidation: true // Mark as current session\n                        };\n                    }\n                    return result;\n                })\n            );\n\n            setValidationComplete(true);\n            console.log(`Validation completed for ${validationData.data?.length || 0} items`);\n        } catch (error) {\n            setError(error instanceof Error ? error.message : 'Validation failed');\n            console.error('Validation error:', error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const fetchAssignmentGroupDetails = async (groupId: string) => {\n        if (assignmentGroups[groupId] || loadingAssignmentGroups.includes(groupId)) {\n            return;\n        }\n\n        setLoadingAssignmentGroups(prev => [...prev, groupId]);\n\n        try {\n            interface GroupApiResponse {\n                status: string;\n                message: string;\n                details: string;\n                data: GroupData;\n            }\n\n            const response = await request<GroupApiResponse>(`${GROUPS_ENDPOINT}/${groupId}`, {\n                method: 'GET'\n            });\n\n            if (response?.data) {\n                setAssignmentGroups(prev => ({\n                    ...prev,\n                    [groupId]: response.data\n                }));\n            }\n        } catch (error) {\n            console.error(`Failed to fetch group details for ${groupId}:`, error);\n            setAssignmentGroups(prev => ({\n                ...prev,\n                [groupId]: {\n                    error: 'Failed to load group details'\n                } as GroupData\n            }));\n        } finally {\n            setLoadingAssignmentGroups(prev => prev.filter(id => id !== groupId));\n        }\n    };\n\n    const handleAssignmentsClick = async (result: ComparisonResult) => {\n        const displayPolicy = result.policy || (result.policies ? result.policies[0] : null);\n        if (!displayPolicy?.assignments) return;\n\n        setSelectedAssignments(displayPolicy.assignments);\n        setShowAssignmentsDialog(true);\n\n        // Fetch group details for all group assignments\n        for (const assignment of displayPolicy.assignments) {\n            if (assignment.target?.groupId && assignment.target['@odata.type']?.includes('groupAssignmentTarget')) {\n                await fetchAssignmentGroupDetails(assignment.target.groupId);\n            }\n        }\n    };\n\n    const validateAssignments = async () => {\n        // Only validate items that were just migrated in this session\n        const recentlyMigrated = comparisonResults.filter(result =>\n            result.isMigrated && result.validationStatus === 'pending'\n        );\n\n        if (recentlyMigrated.length === 0) {\n            setError('No recently migrated assignments to validate');\n            return;\n        }\n\n        await validateMigratedAssignments(recentlyMigrated);\n    };\n\n    const resetProcess = () => {\n        setCurrentStep('upload');\n        setCsvData([]);\n        setComparisonResults([]);\n        setSelectedRows([]);\n        setMigrationProgress(0);\n        setValidationResults([]);\n        setValidationComplete(false);\n        setError(null);\n        if (fileInputRef.current) {\n            fileInputRef.current.value = '';\n        }\n    };\n\n    const {\n        selectedGroup,\n        groupLoading,\n        groupError,\n        isDialogOpen,\n        fetchGroupDetails,\n        closeDialog\n    } = useGroupDetails();\n\n    // Update the handleResourceClick function to handle GroupAssignment:\n    const handleResourceClick = (resourceId: string, assignmentType: string) => {\n        if (assignmentType === 'GroupAssignment' && resourceId) {\n            fetchGroupDetails(resourceId);\n        } else if ((assignmentType === 'Entra ID Group' || assignmentType === 'Entra ID Group Exclude') && resourceId) {\n            fetchGroupDetails(resourceId);\n        }\n    };\n\n    const AssignmentsDialog = () => (\n        <Dialog open={showAssignmentsDialog} onOpenChange={setShowAssignmentsDialog}>\n            <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-auto\">\n                <DialogHeader>\n                    <DialogTitle className=\"flex items-center gap-2\">\n                        <Users className=\"h-5 w-5\" />\n                        Current Assignments ({selectedAssignments.length})\n                    </DialogTitle>\n                </DialogHeader>\n\n                <div className=\"space-y-4\">\n                    {selectedAssignments.map((assignment) => {\n                        const isGroupAssignment = assignment.target?.['@odata.type']?.includes('groupAssignmentTarget');\n                        const isExcludeAssignment = assignment.target?.['@odata.type']?.includes('exclusionGroupAssignmentTarget');\n                        const groupId = assignment.target?.groupId;\n                        const groupData = groupId ? assignmentGroups[groupId] : null;\n                        const isLoading = groupId ? loadingAssignmentGroups.includes(groupId) : false;\n\n                        // Determine assignment direction\n                        const assignmentDirection = isExcludeAssignment ? 'Exclude' : 'Include';\n                        const directionColor = isExcludeAssignment ? 'destructive' : 'default';\n\n                        return (\n                            <div key={assignment.id} className=\"border rounded-lg p-4 space-y-3\">\n                                <div className=\"flex items-center justify-between\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <Shield className=\"h-4 w-4 text-blue-500\" />\n                                        <span className=\"font-medium\">\n                                        {isGroupAssignment ? 'Group Assignment' : 'All Users/Devices'}\n                                    </span>\n                                        <Badge variant={directionColor} className=\"text-xs\">\n                                            {assignmentDirection}\n                                        </Badge>\n                                    </div>\n                                    <div className=\"flex items-center gap-2\">\n                                        {assignment.target?.deviceAndAppManagementAssignmentFilterType !== 'None' && (\n                                            <Badge variant=\"outline\" className=\"text-xs\">\n                                                Filtered\n                                            </Badge>\n                                        )}\n                                    </div>\n                                </div>\n\n                                {isGroupAssignment && groupId && (\n                                    <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-3\">\n                                        {isLoading ? (\n                                            <div className=\"flex items-center gap-2\">\n                                                <RefreshCw className=\"h-4 w-4 animate-spin\" />\n                                                <span className=\"text-sm\">Loading group details...</span>\n                                            </div>\n                                        ) : groupData?.error ? (\n                                            <div className=\"text-sm text-red-500\">\n                                                Failed to load group details\n                                            </div>\n                                        ) : groupData ? (\n                                            <div className=\"space-y-2\">\n                                                <div className=\"flex items-center justify-between\">\n                                                    <h4 className=\"font-medium text-sm flex items-center gap-1\">\n                                                        {groupData.displayName}\n                                                        {groupData.membershipRule && groupData.membershipRule.trim() !== '' && (\n                                                            <Blocks className=\"h-3 w-3 text-purple-500 flex-shrink-0\" />\n                                                        )}\n                                                    </h4>\n                                                    <Button\n                                                        variant=\"outline\"\n                                                        size=\"sm\"\n                                                        onClick={() => {\n                                                            setShowAssignmentsDialog(false);\n                                                            fetchGroupDetails(groupId);\n                                                        }}\n                                                    >\n                                                        <Eye className=\"h-3 w-3 mr-1\" />\n                                                        View Details\n                                                    </Button>\n                                                </div>\n                                                <p className=\"text-xs text-gray-600 dark:text-gray-400\">\n                                                    {groupData.description || 'No description available'}\n                                                </p>\n                                                <div className=\"flex gap-4 text-xs text-gray-500\">\n                                                    <span>ID: {groupData.id}</span>\n                                                    {groupData.groupCount && (\n                                                        <>\n                                                            <span>Users: {groupData.groupCount.userCount}</span>\n                                                            <span>Devices: {groupData.groupCount.deviceCount}</span>\n                                                            <span>Groups: {groupData.groupCount.groupCount}</span>\n                                                        </>\n                                                    )}\n                                                </div>\n                                            </div>\n                                        ) : (\n                                            <div className=\"text-sm text-gray-500\">\n                                                Group ID: {groupId}\n                                            </div>\n                                        )}\n                                    </div>\n                                )}\n\n                                {!isGroupAssignment && (\n                                    <div className=\"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3\">\n                                        <div className=\"flex items-center gap-2\">\n                                            <Users className=\"h-4 w-4 text-blue-500\" />\n                                            <span className=\"text-sm font-medium\">All Users and Devices</span>\n                                        </div>\n                                        <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\n                                            This assignment applies to all users and devices in your organization\n                                        </p>\n                                    </div>\n                                )}\n\n                                {assignment.target?.deviceAndAppManagementAssignmentFilterId && (\n                                    <div className=\"text-xs text-gray-500\">\n                                        <span className=\"font-medium\">Filter:</span> {assignment.target.deviceAndAppManagementAssignmentFilterType}\n                                        <span className=\"ml-2\">ID: {assignment.target.deviceAndAppManagementAssignmentFilterId}</span>\n                                    </div>\n                                )}\n                            </div>\n                        );\n                    })}\n                </div>\n            </DialogContent>\n        </Dialog>\n    );\n\n    return (\n        <div className=\"p-4 lg:p-8 space-y-6 w-full max-w-none\">\n            {/* Show migration overlay when migrating */}\n            {loading && migrationProgress > 0 && (\n                <MigrationOverlay progress={migrationProgress} />\n            )}\n\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n                <div>\n                    <h1 className=\"text-2xl lg:text-3xl font-bold text-foreground\">Assignments Manager</h1>\n                    <p className=\"text-muted-foreground mt-2\">\n                        Upload, compare, and migrate policy assignments in bulk using a CSV file.\n                    </p>\n                </div>\n                <Button onClick={resetProcess} variant=\"outline\">\n                    <RotateCcw className=\"h-4 w-4 mr-2\" />\n                    Start Over\n                </Button>\n            </div>\n\n            {/* Progress Steps */}\n            <Card>\n                <CardContent className=\"p-6\">\n                    <div className=\"flex items-center justify-between mb-4\">\n                        {[\n                            { key: 'upload', label: 'Upload CSV', icon: Upload },\n                            { key: 'compare', label: 'Compare', icon: Eye },\n                            { key: 'migrate', label: 'Migrate', icon: Play },\n                            { key: 'results', label: 'Results', icon: CheckCircle2 },\n                            { key: 'validate', label: 'Validate', icon: RefreshCw }\n                        ].map((step, index) => {\n                            const stepKeys = ['upload', 'compare', 'migrate', 'results', 'validate'];\n                            const currentStepIndex = stepKeys.indexOf(currentStep);\n                            const thisStepIndex = stepKeys.indexOf(step.key);\n\n                            const isActive = currentStep === step.key;\n                            const isCompleted = thisStepIndex < currentStepIndex;\n                            const Icon = step.icon;\n\n                            return (\n                                <React.Fragment key={step.key}>\n                                    <div className=\"flex items-center\">\n                                        <div className={`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors ${\n                                            isActive\n                                                ? 'border-blue-600 bg-blue-600 text-white'\n                                                : isCompleted\n                                                    ? 'border-green-600 bg-green-600 text-white'\n                                                    : 'border-gray-300 bg-white text-gray-400'\n                                        }`}>\n                                            <Icon className=\"h-5 w-5\" />\n                                        </div>\n                                        <span className={`ml-3 text-sm font-medium ${\n                                            isActive\n                                                ? 'text-blue-600'\n                                                : isCompleted\n                                                    ? 'text-green-600'\n                                                    : 'text-gray-400'\n                                        }`}>\n                    {step.label}\n                </span>\n                                    </div>\n                                    {index < 4 && (\n                                        <ArrowRight className={`h-4 w-4 mx-4 ${\n                                            isCompleted ? 'text-green-600' : 'text-gray-300'\n                                        }`} />\n                                    )}\n                                </React.Fragment>\n                            );\n                        })}\n\n                    </div>\n                </CardContent>\n            </Card>\n\n            {/* Step-specific Error Display */}\n            {error && (\n                <Card className=\"border-red-200\">\n                    <CardContent className=\"p-6\">\n                        <div className=\"flex items-center gap-2 text-red-600\">\n                            <X className=\"h-5 w-5\" />\n                            <span className=\"font-medium\">Error:</span>\n                            <span>{error}</span>\n                        </div>\n\n                        {/* Step-specific error content */}\n                        {currentStep === 'upload' && (\n                            <>\n                                <p className=\"text-sm text-gray-600 mt-2\">\n                                    Error occurred while processing the CSV file. Please check the file format and try again.\n                                </p>\n                                <Button\n                                    onClick={() => setError(null)}\n                                    className=\"mt-4\"\n                                    variant=\"outline\"\n                                >\n                                    <RefreshCw className=\"h-4 w-4 mr-2\" />\n                                    Clear Error\n                                </Button>\n                            </>\n                        )}\n\n                        {currentStep === 'compare' && (\n                            <>\n                                <p className=\"text-sm text-gray-600 mt-2\">\n                                    Error occurred while comparing assignments. Please check your connection and try again.\n                                </p>\n                                <Button\n                                    onClick={compareAssignments}\n                                    className=\"mt-4\"\n                                    variant=\"outline\"\n                                >\n                                    <RefreshCw className=\"h-4 w-4 mr-2\" />\n                                    Try Comparison Again\n                                </Button>\n                            </>\n                        )}\n\n                        {currentStep === 'migrate' && (\n                            <>\n                                <p className=\"text-sm text-gray-600 mt-2\">\n                                    Error occurred during migration. The operation may be partially completed.\n                                </p>\n                                <Button\n                                    onClick={migrateSelectedAssignments}\n                                    className=\"mt-4\"\n                                    variant=\"outline\"\n                                >\n                                    <RefreshCw className=\"h-4 w-4 mr-2\" />\n                                    Retry Migration\n                                </Button>\n                            </>\n                        )}\n\n                        {currentStep === 'validate' && (\n                            <>\n                                <p className=\"text-sm text-gray-600 mt-2\">\n                                    Error occurred while validating assignments. This doesn&apos;t affect your migrations.\n                                </p>\n                                <Button\n                                    onClick={validateAssignments}\n                                    className=\"mt-4\"\n                                    variant=\"outline\"\n                                >\n                                    <RefreshCw className=\"h-4 w-4 mr-2\" />\n                                    Retry Validation\n                                </Button>\n                            </>\n                        )}\n                    </CardContent>\n                </Card>\n            )}\n\n\n            {/* Step Content */}\n            {currentStep === 'upload' && (\n                <Card>\n                    <CardHeader className=\"text-center\">\n                        <Upload className=\"h-12 w-12 text-yellow-500 mx-auto mb-4\" />\n                        <CardTitle>Upload Assignment CSV</CardTitle>\n                        <p className=\"text-gray-600\">\n                            Upload a CSV file containing policy assignments to compare and migrate\n                        </p>\n                    </CardHeader>\n                    <CardContent className=\"space-y-6\">\n                        <div\n                            className={`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\n                                isDragOver\n                                    ? 'border-yellow-500 bg-blue-50'\n                                    : 'border-gray-300'\n                            }`}\n                            onDragOver={handleDragOver}\n                            onDragLeave={handleDragLeave}\n                            onDrop={handleDrop}\n                        >\n                            <FileText className={`h-8 w-8 mx-auto mb-4 ${\n                                isDragOver ? 'text-yellow-500' : 'text-gray-400'\n                            }`} />\n                            <p className={`mb-4 ${\n                                isDragOver ? 'text-yellow-600' : 'text-gray-600'\n                            }`}>\n                                {isDragOver ? 'Drop your CSV file here' : 'Drop your CSV file here or click to browse'}\n                            </p>\n                            <input\n                                ref={fileInputRef}\n                                type=\"file\"\n                                accept=\".csv\"\n                                onChange={handleFileUpload}\n                                className=\"hidden\"\n                            />\n                            <Button onClick={() => fileInputRef.current?.click()}>\n                                Select CSV File\n                            </Button>\n                        </div>\n\n\n                        {csvData.length > 0 && (\n                            <div className=\"space-y-4\">\n                                {/* Validation Summary */}\n                                {csvData.filter(r => !r.isValid).length > 0 && (\n                                    <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4\">\n                                        <div className=\"flex items-start gap-3\">\n                                            <AlertTriangle className=\"h-6 w-6 text-red-600 mt-0.5 flex-shrink-0\" />\n                                            <div className=\"flex-1\">\n                                                <p className=\"font-semibold text-red-800 dark:text-red-200 mb-2\">\n                                                    {csvData.filter(r => !r.isValid).length} Invalid {csvData.filter(r => !r.isValid).length === 1 ? 'Row' : 'Rows'} Detected\n                                                </p>\n                                                <p className=\"text-sm text-red-700 dark:text-red-300 mb-3\">\n                                                    These rows will be <strong>excluded from migration</strong> due to missing or invalid required fields.\n                                                </p>\n\n                                                {/* Group errors by field */}\n                                                <div className=\"space-y-2\">\n                                                    {Array.from(new Set(\n                                                        csvData.flatMap(r => r.validationErrors?.map(e => e.field) || [])\n                                                    )).map(field => {\n                                                        const count = csvData.filter(r =>\n                                                            r.validationErrors?.some(e => e.field === field)\n                                                        ).length;\n                                                        return (\n                                                            <div key={field} className=\"text-sm text-red-700 dark:text-red-300\">\n                                                                 <strong>{count}</strong> row{count !== 1 ? 's' : ''} missing or invalid <code className=\"bg-red-100 dark:bg-red-800 px-1.5 py-0.5 rounded\">{field}</code>\n                                                            </div>\n                                                        );\n                                                    })}\n                                                </div>\n\n                                                <p className=\"text-sm text-red-700 dark:text-red-300 mt-3 font-medium\">\n                                                     Hover over the warning icon () in each row to see specific validation errors.\n                                                </p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                )}\n\n                                <div className=\"flex items-center justify-between\">\n                                    <h3 className=\"font-semibold\">\n                                        CSV Data Overview ({csvData.filter(r => r.isValid).length} valid / {csvData.length} total rows)\n                                    </h3>\n                                    <Button\n                                        onClick={compareAssignments}\n                                        disabled={loading || csvData.filter(r => r.isValid).length === 0}\n                                    >\n                                        {loading ? 'Comparing...' : `Compare ${csvData.filter(r => r.isValid).length} Valid Rows`}\n                                    </Button>\n                                </div>\n\n                                {/* Summary Stats - only count valid rows */}\n                                <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4 bg-gray-50 dark:bg-neutral-800 p-4 rounded-lg\">\n                                    <div className=\"text-center\">\n                                        <div className=\"text-2xl font-bold text-blue-500\">{csvData.filter(r => r.isValid).length}</div>\n                                        <div className=\"text-sm text-gray-600\">Valid Rows</div>\n                                    </div>\n                                    <div className=\"text-center\">\n                                        <div className=\"text-2xl font-bold text-green-500\">\n                                            {csvData.filter(r => r.isValid && r.AssignmentAction === 'Add').length}\n                                        </div>\n                                        <div className=\"text-sm text-gray-600\">Add Actions</div>\n                                    </div>\n                                    <div className=\"text-center\">\n                                        <div className=\"text-2xl font-bold text-orange-500\">\n                                            {csvData.filter(r => r.isValid && r.AssignmentAction === 'Remove').length}\n                                        </div>\n                                        <div className=\"text-sm text-gray-600\">Remove Actions</div>\n                                    </div>\n                                    <div className=\"text-center\">\n                                        <div className=\"text-2xl font-bold text-red-500\">\n                                            {csvData.filter(r => r.isValid && r.AssignmentAction === 'NoAssignment').length}\n                                        </div>\n                                        <div className=\"text-sm text-gray-600\">Clear Actions</div>\n                                    </div>\n                                    <div className=\"text-center\">\n                                        <div className=\"text-2xl font-bold text-purple-500\">\n                                            {csvData.filter(r => r.isValid && r.FilterName).length}\n                                        </div>\n                                        <div className=\"text-sm text-gray-600\">With Filters</div>\n                                    </div>\n                                </div>\n\n                                <div className=\"border rounded-lg overflow-visible\"> {/* Changed from overflow-hidden */}\n                                    <div className=\"overflow-x-auto\"> {/* Only horizontal scroll */}\n                                        <DataTable\n                                            data={csvData}\n                                            columns={uploadColumns}\n                                            currentPage={uploadCurrentPage}\n                                            totalPages={Math.ceil(csvData.length / itemsPerPage)}\n                                            itemsPerPage={itemsPerPage}\n                                            onPageChange={setUploadCurrentPage}\n                                            onItemsPerPageChange={(newItemsPerPage) => {\n                                                setItemsPerPage(newItemsPerPage);\n                                                setUploadCurrentPage(1);\n                                            }}\n                                            showPagination={true}\n                                            searchPlaceholder=\"Search CSV data...\"\n                                        />\n                                    </div>\n                                </div>\n\n                            </div>\n                        )}\n                    </CardContent>\n                </Card>\n            )}\n\n            {currentStep === 'compare' && (\n                <Card>\n                    <CardHeader>\n                        <CardTitle>Assignment Comparison</CardTitle>\n                        <p className=\"text-gray-600\">\n                            Review current assignments vs. planned changes\n                        </p>\n                    </CardHeader>\n                    <CardContent>\n                        <Button onClick={compareAssignments} disabled={loading || csvData.filter(r => r.isValidAction).length === 0}>\n                            {loading ? 'Comparing...' :\n                                csvData.filter(r => !r.isValidAction).length > 0\n                                    ? `Compare ${csvData.filter(r => r.isValidAction).length} Valid Rows (${csvData.filter(r => !r.isValidAction).length} Excluded)`\n                                    : `Compare ${csvData.filter(r => r.isValidAction).length} Assignments`\n                            }\n                        </Button>\n\n                    </CardContent>\n                </Card>\n            )}\n\n            {currentStep === 'migrate' && (\n                <Card>\n                    <CardHeader>\n                        <div className=\"flex items-center justify-between\">\n                            <div>\n                                <CardTitle>Migration Ready</CardTitle>\n                                <p className=\"text-gray-600\">\n                                    Select assignments to migrate\n                                </p>\n                            </div>\n                            <div className=\"flex gap-2\">\n                                <Button\n                                    onClick={() => {\n                                        const readyRows = comparisonResults\n                                            .filter(r => r.isReadyForMigration && !r.isMigrated)\n                                            .map(r => r.id);\n\n                                        // Check if all ready rows are already selected\n                                        const allReadySelected = readyRows.length > 0 &&\n                                            readyRows.every(id => selectedRows.includes(id));\n\n                                        if (allReadySelected) {\n                                            // Deselect all ready rows\n                                            setSelectedRows(selectedRows.filter(id => !readyRows.includes(id)));\n                                        } else {\n                                            // Select all ready rows\n                                            const newSelection = [...new Set([...selectedRows, ...readyRows])];\n                                            setSelectedRows(newSelection);\n                                        }\n                                    }}\n                                    variant=\"outline\"\n                                    size=\"sm\"\n                                >\n                                    {(() => {\n                                        const readyRows = comparisonResults\n                                            .filter(r => r.isReadyForMigration && !r.isMigrated)\n                                            .map(r => r.id);\n                                        const allReadySelected = readyRows.length > 0 &&\n                                            readyRows.every(id => selectedRows.includes(id));\n\n                                        return allReadySelected\n                                            ? `Deselect All Ready (${readyRows.length})`\n                                            : `Select All Ready (${readyRows.length})`;\n                                    })()}\n                                </Button>\n\n\n                                <Button\n                                    onClick={downloadBackups}\n                                    disabled={loading || comparisonResults.filter(r => r.isReadyForMigration && !r.isMigrated).length === 0}\n                                    variant=\"outline\"\n                                >\n                                    {backupLoading ? 'Creating Backup...' : 'Backup Ready Policies'}\n                                </Button>\n                                <Button\n                                    onClick={migrateSelectedAssignments}\n                                    disabled={\n                                        selectedRows.filter(id => {\n                                            const result = comparisonResults.find(r => r.id === id);\n                                            return result?.isReadyForMigration && !result?.isMigrated;\n                                        }).length === 0 || loading\n                                    }\n                                >\n                                    {loading ? 'Migrating...' : `Migrate ${\n                                        selectedRows.filter(id => {\n                                            const result = comparisonResults.find(r => r.id === id);\n                                            return result?.isReadyForMigration && !result?.isMigrated;\n                                        }).length\n                                    } Selected`}\n                                </Button>\n\n                            </div>\n                        </div>\n                    </CardHeader>\n                    <CardContent>\n                        {migrationProgress > 0 && (\n                            <div className=\"mb-4\">\n                                <div className=\"flex items-center justify-between mb-2\">\n                                    <span className=\"text-sm font-medium\">Migration Progress</span>\n                                    <span className=\"text-sm text-gray-600\">{migrationProgress}%</span>\n                                </div>\n                                <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                                    <div\n                                        className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n                                        style={{ width: `${migrationProgress}%` }}\n                                    ></div>\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Comparison Results Table */}\n                        {comparisonResults.length > 0 ? (\n                            <div className=\"space-y-4\">\n                                <div className=\"flex items-center justify-between\">\n                                    <h3 className=\"font-semibold\">Comparison Results ({comparisonResults.length} policies)</h3>\n                                    <div className=\"flex items-center\">\n                                        <input\n                                            type=\"checkbox\"\n                                            onChange={(e) => {\n                                                const readyRows = comparisonResults\n                                                    .filter(r => r.isReadyForMigration && !r.isMigrated)\n                                                    .map(r => r.id);\n\n                                                if (e.target.checked) {\n                                                    setSelectedRows([...selectedRows, ...readyRows.filter(id => !selectedRows.includes(id))]);\n                                                } else {\n                                                    setSelectedRows(selectedRows.filter(id => !readyRows.includes(id)));\n                                                }\n                                            }}\n                                            checked={(() => {\n                                                const readyRows = comparisonResults\n                                                    .filter(r => r.isReadyForMigration && !r.isMigrated)\n                                                    .map(r => r.id);\n                                                return readyRows.length > 0 && readyRows.every(id => selectedRows.includes(id));\n                                            })()}\n                                            className=\"mr-2\"\n                                        />\n                                        <label className=\"text-sm text-gray-600\">Select all ready for migration</label>\n                                    </div>\n                                </div>\n                                <DataTable\n                                    data={comparisonResults.map(result => result as unknown as Record<string, unknown>)}\n                                    columns={comparisonColumns}\n                                    className=\"text-sm\"\n                                    // Instead of using key, pass selectedRows as a prop\n                                    selectedRows={selectedRows}\n                                    onRowClick={(row, index, event) => handleRowClick(row, index, event)}\n                                    currentPage={compareCurrentPage}\n                                    totalPages={Math.ceil(comparisonResults.length / itemsPerPage)}\n                                    itemsPerPage={itemsPerPage}\n                                    onPageChange={setCompareCurrentPage}\n                                    onItemsPerPageChange={(newItemsPerPage) => {\n                                        setItemsPerPage(newItemsPerPage);\n                                        setCompareCurrentPage(1);\n                                    }}\n                                    showPagination={true}\n                                    onSelectionChange={setSelectedRows}\n                                    searchPlaceholder=\"Search policies...\"\n                                />\n                                {/* Summary */}\n                                <div className=\"flex items-center justify-between bg-gray-50 p-4 dark:bg-neutral-900 rounded-lg\">\n                                    <div className=\"flex gap-4 text-sm\">\n                <span>\n                    <strong>{comparisonResults.filter(r => r.isReadyForMigration && !r.isMigrated).length}</strong> ready for migration\n                </span>\n                                        <span>\n                    <strong>{comparisonResults.filter(r => r.isMigrated).length}</strong> migrated\n                </span>\n                                        <span>\n                    <strong>{selectedRows.length}</strong> selected\n                </span>\n                                    </div>\n                                </div>\n                            </div>\n                        ) : (\n                            <div className=\"text-center py-8 text-gray-500\">\n                                <p>No comparison results available. Please run the comparison first.</p>\n                            </div>\n                        )}\n\n                    </CardContent>\n                </Card>\n            )}\n\n            {currentStep === 'results' && (\n                <Card>\n                    <CardHeader>\n                        <div className=\"flex items-center justify-between\">\n                            <div>\n                                <CardTitle>Migration Results</CardTitle>\n                                <p className=\"text-gray-600\">\n                                    Review the outcome of the migration process\n                                </p>\n                            </div>\n                            <Button\n                                onClick={() => setCurrentStep('validate')}\n                                className=\"bg-blue-600 hover:bg-blue-700\"\n                            >\n                                <RefreshCw className=\"h-4 w-4 mr-2\" />\n                                Proceed to Validation\n                            </Button>\n                        </div>\n                    </CardHeader>\n                    <CardContent>\n                        {/* Summary Stats */}\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n                            <div className=\"bg-green-50 p-4 rounded-lg border border-green-200\">\n                                <div className=\"flex items-center gap-2\">\n                                    <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\n                                    <span className=\"font-semibold text-green-600\">Successful</span>\n                                </div>\n                                <div className=\"text-2xl font-bold text-green-600 mt-2\">\n                                    {migrationResults.filter(r => r.status === 'Success').length}\n                                </div>\n                            </div>\n                            <div className=\"bg-red-50 p-4 rounded-lg border border-red-200\">\n                                <div className=\"flex items-center gap-2\">\n                                    <XCircle className=\"h-5 w-5 text-red-600\" />\n                                    <span className=\"font-semibold text-red-600\">Failed</span>\n                                </div>\n                                <div className=\"text-2xl font-bold text-red-600 mt-2\">\n                                    {migrationResults.filter(r => r.status === 'Failed').length}\n                                </div>\n                            </div>\n                            <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\n                                <div className=\"flex items-center gap-2\">\n                                    <Info className=\"h-5 w-5 text-blue-600\" />\n                                    <span className=\"font-semibold text-blue-600\">Total</span>\n                                </div>\n                                <div className=\"text-2xl font-bold text-blue-600 mt-2\">\n                                    {migrationResults.length}\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Results Table */}\n                 <DataTable\n                     columns={migrationResultsColumns}\n                     data={migrationResults}\n                     itemsPerPage={itemsPerPage}\n                     showPagination={true}\n                     onItemsPerPageChange={setItemsPerPage}\n                     currentPage={currentPage}\n                     onPageChange={setCurrentPage}\n                 />\n                    </CardContent>\n                </Card>\n            )}\n\n            {currentStep === 'validate' && (\n                <Card>\n                    <CardHeader>\n                        <div className=\"flex items-center justify-between\">\n                            <div>\n                                <CardTitle>Validation Results</CardTitle>\n                                <p className=\"text-gray-600\">\n                                    Verify migrated assignments\n                                </p>\n                            </div>\n                            {!validationComplete && (\n                                <Button onClick={validateAssignments} disabled={loading}>\n                                    {loading ? (\n                                        <div className=\"flex items-center\">\n                                            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                                            Validating...\n                                        </div>\n                                    ) : (\n                                        'Run Validation'\n                                    )}\n                                </Button>\n                            )}\n                            {validationComplete && (\n                                <div className=\"flex items-center gap-2 text-green-600\">\n                                    <CheckCircle2 className=\"h-5 w-5\" />\n                                    <span className=\"font-medium\">Validation Complete</span>\n                                </div>\n                            )}\n                        </div>\n                    </CardHeader>\n                    <CardContent>\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n                            <div className=\"bg-green-50 p-4 rounded-lg border border-green-200\">\n                                <div className=\"flex items-center gap-2\">\n                                    <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\n                                    <span className=\"font-medium text-green-800\">Successful</span>\n                                </div>\n                                <div className=\"text-2xl font-bold text-green-600 mt-2\">\n                                    {comparisonResults.filter(r => r.isCurrentSessionValidation && r.validationStatus === 'valid').length}\n                                </div>\n                            </div>\n                            <div className=\"bg-yellow-50 p-4 rounded-lg border border-yellow-200\">\n                                <div className=\"flex items-center gap-2\">\n                                    <AlertTriangle className=\"h-5 w-5 text-yellow-600\" />\n                                    <span className=\"font-medium text-yellow-800\">Warnings</span>\n                                </div>\n                                <div className=\"text-2xl font-bold text-yellow-600 mt-2\">\n                                    {comparisonResults.filter(r => r.isCurrentSessionValidation && r.validationStatus === 'warning').length}\n                                </div>\n                            </div>\n                            <div className=\"bg-red-50 p-4 rounded-lg border border-red-200\">\n                                <div className=\"flex items-center gap-2\">\n                                    <XCircle className=\"h-5 w-5 text-red-600\" />\n                                    <span className=\"font-medium text-red-800\">Failed</span>\n                                </div>\n                                <div className=\"text-2xl font-bold text-red-600 mt-2\">\n                                    {comparisonResults.filter(r => r.isCurrentSessionValidation && r.validationStatus === 'invalid').length}\n                                </div>\n                            </div>\n                        </div>\n\n\n                        {/* Validation Results Table */}\n                        {comparisonResults.filter(r => r.isCurrentSessionValidation).length > 0 && (\n                            <div className=\"space-y-4\">\n                                <h3 className=\"font-semibold\">Validated Assignments ({comparisonResults.filter(r => r.isCurrentSessionValidation).length} items)</h3>\n                                <div className=\"border rounded-lg overflow-visible\">\n                                    <div className=\"overflow-x-auto overflow-y-visible\">\n                                        <DataTable\n                                            data={comparisonResults.filter(r => r.isCurrentSessionValidation).map(result => result as unknown as Record<string, unknown>)}\n                                            columns={validationColumns}\n                                            className=\"text-sm\"\n                                            currentPage={validationCurrentPage}\n                                            totalPages={Math.ceil(comparisonResults.filter(r => r.isCurrentSessionValidation).length / itemsPerPage)}\n                                            itemsPerPage={itemsPerPage}\n                                            onPageChange={setValidationCurrentPage}\n                                            onItemsPerPageChange={(newItemsPerPage) => {\n                                                setItemsPerPage(newItemsPerPage);\n                                                setValidationCurrentPage(1);\n                                            }}\n                                            showPagination={true}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </CardContent>\n                </Card>\n            )}\n            {/* Group Details Dialog */}\n            <Dialog open={isDialogOpen} onOpenChange={closeDialog}>\n                <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-auto\">\n                    <DialogHeader>\n                        <DialogTitle className=\"flex items-center gap-2\">\n                            <Users className=\"h-5 w-5\" />\n                            Group Details\n                        </DialogTitle>\n                    </DialogHeader>\n\n                    {groupLoading && (\n                        <div className=\"flex items-center justify-center py-8\">\n                            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n                            <span className=\"ml-2\">Loading group details...</span>\n                        </div>\n                    )}\n\n                    {groupError && (\n                        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                            <div className=\"flex items-center gap-2 text-red-600\">\n                                <AlertTriangle className=\"h-5 w-5\" />\n                                <span>{groupError}</span>\n                            </div>\n                        </div>\n                    )}\n\n                    {selectedGroup && (\n                        <div className=\"space-y-6\">\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <label className=\"text-sm font-medium text-gray-500\">Display Name</label>\n                                    <p className=\"text-sm font-semibold\">{selectedGroup.displayName}</p>\n                                </div>\n                                <div>\n                                    <label className=\"text-sm font-medium text-gray-500\">Group ID</label>\n                                    <p className=\"text-sm font-mono text-gray-600\">{selectedGroup.id}</p>\n                                </div>\n                            </div>\n\n                            {selectedGroup.description && (\n                                <div>\n                                    <label className=\"text-sm font-medium text-gray-500\">Description</label>\n                                    <p className=\"text-sm text-gray-600\">{selectedGroup.description}</p>\n                                </div>\n                            )}\n\n                            {selectedGroup.groupCount && (\n                                <div className=\"grid grid-cols-3 gap-4 bg-gray-50 p-4 rounded-lg\">\n                                    <div className=\"text-center\">\n                                        <div className=\"text-2xl font-bold text-blue-600\">\n                                            {selectedGroup.groupCount.userCount}\n                                        </div>\n                                        <div className=\"text-sm text-gray-600\">Users</div>\n                                    </div>\n                                    <div className=\"text-center\">\n                                        <div className=\"text-2xl font-bold text-green-600\">\n                                            {selectedGroup.groupCount.deviceCount}\n                                        </div>\n                                        <div className=\"text-sm text-gray-600\">Devices</div>\n                                    </div>\n                                    <div className=\"text-center\">\n                                        <div className=\"text-2xl font-bold text-purple-600\">\n                                            {selectedGroup.groupCount.groupCount}\n                                        </div>\n                                        <div className=\"text-sm text-gray-600\">Groups</div>\n                                    </div>\n                                </div>\n                            )}\n\n                            {selectedGroup.members && selectedGroup.members.length > 0 ? (\n                                <div>\n                                    <label className=\"text-sm font-medium text-gray-500 mb-2 block\">\n                                        Members ({selectedGroup.members.length})\n                                    </label>\n                                    <div className=\"border rounded-lg overflow-hidden max-h-60 overflow-y-auto\">\n                                        <table className=\"w-full text-sm\">\n                                            <thead className=\"bg-gray-50 sticky top-0\">\n                                            <tr>\n                                                <th className=\"text-left p-3 border-b\">Name</th>\n                                                <th className=\"text-left p-3 border-b\">Type</th>\n                                                <th className=\"text-left p-3 border-b\">Status</th>\n                                            </tr>\n                                            </thead>\n                                            <tbody>\n                                            {selectedGroup.members.map((member, index) => (\n                                                <tr key={member.id || index} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\n                                                    <td className=\"p-3 border-b\">\n                                                        <div className=\"font-medium\">{member.displayName || 'Unknown'}</div>\n                                                        <div className=\"text-xs text-gray-500\">{member.id || 'No ID'}</div>\n                                                    </td>\n                                                    <td className=\"p-3 border-b\">\n                                                        <Badge variant=\"outline\">{member.type || 'Unknown'}</Badge>\n                                                    </td>\n                                                    <td className=\"p-3 border-b\">\n                                                        <Badge variant={member.accountEnabled ? 'default' : 'secondary'}>\n                                                            {member.accountEnabled ? 'Enabled' : 'Disabled'}\n                                                        </Badge>\n                                                    </td>\n                                                </tr>\n                                            ))}\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                </div>\n                            ) : (\n                                <div className=\"bg-gray-50 p-4 rounded-lg text-center\">\n                                    <p className=\"text-sm text-gray-600\">No members found or unable to load member details.</p>\n                                </div>\n                            )}\n\n                        </div>\n                    )}\n                </DialogContent>\n            </Dialog>\n\n            <AssignmentsDialog />\n        </div>\n    );\n}\n\nexport default function AssignmentRolloutPage() {\n    return (\n        <PlanProtection requiredPlan=\"extensions\" featureName=\"Assignments Manager\">\n            <AssignmentRolloutContent />\n        </PlanProtection>\n    );\n}"],"names":[],"mappings":"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","debugId":null}}]
}