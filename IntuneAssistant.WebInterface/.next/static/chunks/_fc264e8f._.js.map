{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/components/DataTable.tsx"],"sourcesContent":["// components/DataTable.tsx\n'use client';\nimport { useState, useRef, useEffect, useMemo } from 'react';\nimport {ITEMS_PER_PAGE} from \"@/lib/constants\";\nimport { ChevronLeft, ChevronRight, ChevronUp, ChevronDown, ChevronsUpDown, Search, X } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\n\ninterface Column {\n    key: string;\n    label: string;\n    width?: number;\n    minWidth?: number;\n    sortable?: boolean;\n    searchable?: boolean;\n    sortValue?: (row: Record<string, unknown>) => number | string;\n    render?: (value: unknown, row: Record<string, unknown>) => React.ReactNode;\n}\n\ninterface SortConfig {\n    key: string;\n    direction: 'asc' | 'desc';\n}\n\ninterface DataTableProps {\n    data: Record<string, unknown>[];\n    columns: Column[];\n    className?: string;\n    onRowClick?: (row: Record<string, unknown>, index: number, event?: React.MouseEvent) => void;\n    rowClassName?: (row: Record<string, unknown>) => string;\n    currentPage?: number;\n    totalPages?: number;\n    itemsPerPage?: number;\n    onPageChange?: (page: number) => void;\n    onItemsPerPageChange?: (itemsPerPage: number) => void;\n    showPagination?: boolean;\n    showSearch?: boolean;\n    searchPlaceholder?: string;\n    selectedRows?: string[];\n    onSelectionChange?: (rowIds: string[]) => void;\n}\n\nexport function DataTable({\n                              data,\n                              columns: initialColumns,\n                              className = '',\n                              onRowClick,\n                              currentPage = 1,\n                              totalPages = 1,\n                              itemsPerPage = ITEMS_PER_PAGE,\n                              onPageChange,\n                              rowClassName,\n                              onItemsPerPageChange,\n                              showPagination = false,\n                              showSearch = true,\n                              searchPlaceholder = \"Search...\",\n                              onSelectionChange,\n                              selectedRows = [],\n                          }: DataTableProps) {\n\n    // Local pagination state to support uncontrolled usage\n    const [internalCurrentPage, setInternalCurrentPage] = useState<number>(currentPage);\n    const [internalItemsPerPage, setInternalItemsPerPage] = useState<number>(itemsPerPage);\n\n    // Sync internal state when parent updates props\n    useEffect(() => setInternalCurrentPage(currentPage), [currentPage]);\n    useEffect(() => setInternalItemsPerPage(itemsPerPage), [itemsPerPage]);\n\n    // Effective values: prefer controller (props) when callbacks are provided\n    const effectiveCurrentPage = onPageChange ? currentPage : internalCurrentPage;\n    const effectiveItemsPerPage = onItemsPerPageChange ? itemsPerPage : internalItemsPerPage;\n\n    const changePage = (page: number) => {\n        if (onPageChange) {\n            onPageChange(page);\n        } else {\n            setInternalCurrentPage(page);\n        }\n    };\n\n    const changeItemsPerPage = (n: number) => {\n        if (onItemsPerPageChange) {\n            onItemsPerPageChange(n);\n        } else {\n            setInternalItemsPerPage(n);\n        }\n    };\n\n    const isRowSelected = (row: Record<string, unknown>) => {\n        if (!selectedRows || selectedRows.length === 0) return false;\n        const rowId = String(row.id);\n        return selectedRows.includes(rowId);\n    };\n\n    const handleRowSelection = (e: React.MouseEvent | React.ChangeEvent<HTMLInputElement>, row: Record<string, unknown>) => {\n        e.stopPropagation();\n        const rowId = String(row.id);\n\n        if (onSelectionChange) {\n            const isCurrentlySelected = isRowSelected(row);\n            if (isCurrentlySelected) {\n                onSelectionChange(selectedRows.filter(id => id !== rowId));\n            } else {\n                onSelectionChange([...selectedRows, rowId]);\n            }\n        }\n    };\n\n    const columnsWithSelection = useMemo(() => {\n        if (onSelectionChange && !initialColumns.some(col => col.key === '_select')) {\n            return [\n                {\n                    key: '_select',\n                    label: '',\n                    width: 50,\n                    minWidth: 40,\n                    sortable: false,\n                    searchable: false,\n                    sortValue: undefined,\n                    render: (_, row) => (\n                        <input\n                            type=\"checkbox\"\n                            checked={isRowSelected(row)}\n                            onChange={(e) => handleRowSelection(e, row)}\n                            className=\"rounded border-input text-primary focus:ring-ring\"\n                        />\n                    )\n\n                },\n                ...initialColumns\n            ];\n        }\n        return initialColumns;\n    }, [onSelectionChange, selectedRows, initialColumns]);\n\n    const [columns, setColumns] = useState(columnsWithSelection.map(col => ({\n        ...col,\n        width: col.width || 150,\n        minWidth: col.minWidth || 100,\n        searchable: col.searchable !== false && col.key !== '_select',\n        sortValue: col.sortValue\n    })));\n\n    const [sortConfig, setSortConfig] = useState<SortConfig | null>(null);\n    const [searchTerm, setSearchTerm] = useState('');\n    const [resizing, setResizing] = useState<{ columnIndex: number; startX: number; startWidth: number } | null>(null);\n    const tableRef = useRef<HTMLTableElement>(null);\n\n    useEffect(() => {\n        setColumns(columnsWithSelection.map(col => ({\n            ...col,\n            width: col.width || 150,\n            minWidth: col.minWidth || 100,\n            searchable: col.searchable !== false && col.key !== '_select',\n            sortValue: col.sortValue\n        })));\n    }, [columnsWithSelection]);\n\n    // Filter data based on search term\n    const filteredData = data.filter(row => {\n        if (!searchTerm.trim()) return true;\n\n        const searchLower = searchTerm.toLowerCase();\n\n        // Search through ALL properties in the row, not just the column keys\n        return Object.entries(row).some(([key, value]) => {\n            if (value === null || value === undefined) return false;\n            const stringValue = String(value).toLowerCase();\n            return stringValue.includes(searchLower);\n        });\n    });\n\n    // Sort filtered data\n    const sortedData = [...filteredData].sort((a, b) => {\n        if (!sortConfig) return 0;\n\n        // Find the column configuration to check for custom sortValue\n        const column = columns.find(col => col.key === sortConfig.key);\n\n        // Use sortValue function if provided, otherwise fall back to direct value\n        const aValue = column?.sortValue ? column.sortValue(a) : a[sortConfig.key];\n        const bValue = column?.sortValue ? column.sortValue(b) : b[sortConfig.key];\n\n        if (aValue === undefined && bValue === undefined) {\n            return 0;\n        }\n\n        if (aValue === null || aValue === undefined) return 1;\n        if (bValue === null || bValue === undefined) return -1;\n\n        if (typeof aValue === 'number' && typeof bValue === 'number') {\n            return sortConfig.direction === 'asc'\n                ? aValue - bValue\n                : bValue - aValue;\n        }\n\n        const aDate = new Date(aValue as string);\n        const bDate = new Date(bValue as string);\n        if (!isNaN(aDate.getTime()) && !isNaN(bDate.getTime())) {\n            return sortConfig.direction === 'asc'\n                ? aDate.getTime() - bDate.getTime()\n                : bDate.getTime() - aDate.getTime();\n        }\n\n        const aStr = String(aValue).toLowerCase();\n        const bStr = String(bValue).toLowerCase();\n\n        if (aStr < bStr) return sortConfig.direction === 'asc' ? -1 : 1;\n        if (aStr > bStr) return sortConfig.direction === 'asc' ? 1 : -1;\n        return 0;\n    });\n\n\n    // Update pagination to work with filtered/sorted data\n    const startIndex = (effectiveCurrentPage - 1) * effectiveItemsPerPage;\n    const endIndex = startIndex + effectiveItemsPerPage;\n    const paginatedData = sortedData.slice(startIndex, endIndex);\n    const totalFilteredPages = Math.max(1, Math.ceil(sortedData.length / effectiveItemsPerPage));\n\n    const handleSort = (columnKey: string) => {\n        let direction: 'asc' | 'desc' = 'asc';\n\n        if (sortConfig && sortConfig.key === columnKey && sortConfig.direction === 'asc') {\n            direction = 'desc';\n        }\n\n        setSortConfig({ key: columnKey, direction });\n    };\n\n    const getSortIcon = (columnKey: string) => {\n        if (!sortConfig || sortConfig.key !== columnKey) {\n            return <ChevronsUpDown className=\"h-4 w-4 text-muted-foreground\" />;\n        }\n\n        return sortConfig.direction === 'asc'\n            ? <ChevronUp className=\"h-4 w-4 text-foreground\" />\n            : <ChevronDown className=\"h-4 w-4 text-foreground\" />;\n    };\n\n\n    const clearSearch = () => {\n        setSearchTerm('');\n        changePage(1);\n    };\n\n    useEffect(() => {\n        if (effectiveCurrentPage > 1) {\n            changePage(1);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [searchTerm]);\n\n    useEffect(() => {\n        const maxPage = Math.max(1, Math.ceil(sortedData.length / effectiveItemsPerPage));\n        if (effectiveCurrentPage > maxPage) {\n            changePage(1);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [effectiveItemsPerPage, sortedData.length, effectiveCurrentPage]);\n\n    useEffect(() => {\n        const handleMouseMove = (e: MouseEvent) => {\n            if (!resizing) return;\n\n            const diff = e.clientX - resizing.startX;\n            const newWidth = Math.max(resizing.startWidth + diff, columns[resizing.columnIndex].minWidth || 100);\n\n            setColumns(prev => prev.map((col, index) =>\n                index === resizing.columnIndex ? { ...col, width: newWidth } : col\n            ));\n        };\n\n        const handleMouseUp = () => {\n            setResizing(null);\n        };\n\n        if (resizing) {\n            document.addEventListener('mousemove', handleMouseMove);\n            document.addEventListener('mouseup', handleMouseUp);\n        }\n\n        return () => {\n            document.removeEventListener('mousemove', handleMouseMove);\n            document.removeEventListener('mouseup', handleMouseUp);\n        };\n    }, [resizing, columns]);\n\n    const handleResizeStart = (e: React.MouseEvent, columnIndex: number) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setResizing({\n            columnIndex,\n            startX: e.clientX,\n            startWidth: columns[columnIndex].width || 150\n        });\n    };\n\n    const handleRowClick = (e: React.MouseEvent, row: Record<string, unknown>, index: number) => {\n        if (resizing) return;\n\n        const target = e.target as HTMLElement;\n        const isInteractive = target.closest('input[type=\"checkbox\"], input[type=\"radio\"], button, a, [role=\"button\"], [tabindex=\"0\"]');\n\n        if (!isInteractive && onRowClick) {\n            onRowClick(row, index, e);\n        }\n    };\n\n\n    const getCellValue = (row: Record<string, unknown>, column: Column) => {\n        if (column.key === '_select') {\n            return null;\n        }\n        return row[column.key];\n    };\n\n    return (\n        <div className={`bg-background border rounded-lg overflow-hidden shadow-sm ${className}`}>\n            {showSearch && (\n                <div className=\"p-4 bg-muted border-b\">\n                    <div className=\"relative max-w-sm\">\n                        <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                        <input\n                            type=\"text\"\n                            placeholder={searchPlaceholder}\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                            className=\"w-full pl-10 pr-10 py-2 border rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent transition-colors\"\n                        />\n                        {searchTerm && (\n                            <button\n                                onClick={clearSearch}\n                                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\n                            >\n                                <X className=\"h-4 w-4\" />\n                            </button>\n                        )}\n                    </div>\n                    {searchTerm && (\n                        <div className=\"mt-2 text-sm text-muted-foreground\">\n                            {sortedData.length} of {data.length} results\n                        </div>\n                    )}\n                </div>\n            )}\n\n            <div className=\"overflow-auto\">\n                <table ref={tableRef} className=\"w-full text-sm\">\n                    <thead className=\"bg-background sticky top-0 z-10 border-b\">\n\n                    <tr className=\"border-b\">\n                        {columns.map((column, index) => (\n                            <th\n                                key={column.key}\n                                className=\"relative text-left p-3 font-medium text-foreground\"\n                                style={{ width: `${column.width}px` }}\n                            >\n                                <div className=\"flex items-center justify-between\">\n                                    <div\n                                        className={`flex items-center gap-2 flex-1 ${\n                                            column.sortable !== false && column.key !== '_select'\n                                                ? 'cursor-pointer hover:text-primary transition-colors'\n                                                : ''\n                                        }`}\n                                        onClick={() => {\n                                            if (column.sortable !== false && column.key !== '_select') {\n                                                handleSort(column.key);\n                                            }\n                                        }}\n                                    >\n                                        <span className=\"truncate pr-2\">{column.label}</span>\n                                        {column.sortable !== false && column.key !== '_select' && (\n                                            getSortIcon(column.key)\n                                        )}\n                                    </div>\n                                </div>\n\n                                {column.key !== '_select' && (\n                                    <div\n                                        className=\"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-primary group\"\n                                        onMouseDown={(e) => handleResizeStart(e, index)}\n                                    >\n                                        <div className=\"h-full w-px bg-border group-hover:bg-primary transition-colors\" />\n                                    </div>\n                                )}\n                            </th>\n                        ))}\n                    </tr>\n                    </thead>\n                    <tbody className=\"bg-background divide-y divide-border\">\n                    {paginatedData.length > 0 ? (\n                        paginatedData.map((row, rowIndex) => (\n                            <tr\n                                key={rowIndex}\n                                className={`\n                transition-colors\n                ${onRowClick ? 'cursor-pointer' : ''}\n                ${isRowSelected(row)\n                                    ? 'bg-yellow-400 dark:bg-yellow-400/80 text-foreground border-l-4 border-l-yellow-600 dark:border-l-yellow-400 shadow-md ring-1 ring-yellow-500/30'\n                                    : 'hover:bg-muted/50'\n                                }\n                ${rowClassName ? rowClassName(row) : ''}\n            `}\n                                onClick={(e) => handleRowClick(e, row, startIndex + rowIndex)}\n                            >\n\n                            {columns.map((column) => (\n                                    <td\n                                        key={column.key}\n                                        className=\"p-3 text-foreground\"\n                                        style={{ width: `${column.width}px` }}\n                                    >\n                                        <div className=\"overflow-hidden\">\n                                            {column.render\n                                                ? column.render(getCellValue(row, column), row)\n                                                : String(getCellValue(row, column) || '')\n                                            }\n                                        </div>\n                                    </td>\n                                ))}\n                            </tr>\n                        ))\n                    ) : (\n                        <tr>\n                            <td\n                                colSpan={columns.length}\n                                className=\"p-8 text-center text-muted-foreground bg-muted/50\"\n                            >\n                                {searchTerm ? 'No results found for your search.' : 'No data available.'}\n                            </td>\n                        </tr>\n                    )}\n                    </tbody>\n                </table>\n            </div>\n\n            {showPagination && sortedData.length > 0 && (\n                <div className=\"flex items-center justify-between p-4 border-t bg-muted\">\n                    <div className=\"flex items-center gap-4\">\n                        <div className=\"text-sm text-muted-foreground\">\n                            Showing {Math.min(startIndex + 1, sortedData.length)} to {Math.min(endIndex, sortedData.length)} of {sortedData.length} results\n                            {searchTerm && ` (filtered from ${data.length} total)`}\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                            <span className=\"text-sm text-muted-foreground\">Items per page:</span>\n                            <select\n                                value={effectiveItemsPerPage}\n                                onChange={(e) => {\n                                    const newItemsPerPage = Number(e.target.value);\n                                    changeItemsPerPage(newItemsPerPage);\n                                    changePage(1);\n                                }}\n                                className=\"border rounded px-2 py-1 text-sm bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors\"\n                            >\n                                <option value={10}>10</option>\n                                <option value={25}>25</option>\n                                <option value={50}>50</option>\n                                <option value={100}>100</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                        <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => changePage(Math.max(1, effectiveCurrentPage - 1))}\n                            disabled={effectiveCurrentPage === 1}\n                        >\n                            <ChevronLeft className=\"h-4 w-4\" />\n                            Previous\n                        </Button>\n\n                        <div className=\"flex items-center gap-1\">\n                            {Array.from({ length: Math.min(5, totalFilteredPages) }, (_, i) => {\n                                let pageNum;\n                                if (totalFilteredPages <= 5) {\n                                    pageNum = i + 1;\n                                } else if (effectiveCurrentPage <= 3) {\n                                    pageNum = i + 1;\n                                } else if (effectiveCurrentPage >= totalFilteredPages - 2) {\n                                    pageNum = totalFilteredPages - 4 + i;\n                                } else {\n                                    pageNum = effectiveCurrentPage - 2 + i;\n                                }\n\n                                return (\n                                    <Button\n                                        key={pageNum}\n                                        variant={effectiveCurrentPage === pageNum ? \"default\" : \"outline\"}\n                                        size=\"sm\"\n                                        onClick={() => changePage(pageNum)}\n                                        className=\"w-8 h-8 p-0\"\n                                    >\n                                        {pageNum}\n                                    </Button>\n                                );\n                            })}\n                        </div>\n\n                        <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => changePage(Math.min(totalFilteredPages, effectiveCurrentPage + 1))}\n                            disabled={effectiveCurrentPage === totalFilteredPages}\n                        >\n                            Next\n                            <ChevronRight className=\"h-4 w-4\" />\n                        </Button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 715, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitive from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Switch({\n  className,\n  ...props\n}: React.ComponentProps<typeof SwitchPrimitive.Root>) {\n  return (\n    <SwitchPrimitive.Root\n      data-slot=\"switch\"\n      className={cn(\n        \"peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <SwitchPrimitive.Thumb\n        data-slot=\"switch-thumb\"\n        className={cn(\n          \"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0\"\n        )}\n      />\n    </SwitchPrimitive.Root>\n  )\n}\n\nexport { Switch }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,KAGoC;QAHpC,EACd,SAAS,EACT,GAAG,OAC+C,GAHpC;IAId,qBACE,6LAAC,6KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,6WACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,8KAAqB;YACpB,aAAU;YACV,WAAW,IAAA,qHAAE,EACX;;;;;;;;;;;AAKV;KArBS","debugId":null}},
    {"offset": {"line": 757, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,KAA4D;QAA5D,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC,GAA5D;IACb,qBACE,6LAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,mcACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 789, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,KAGoC;QAHpC,EACb,SAAS,EACT,GAAG,OAC8C,GAHpC;IAIb,qBACE,6LAAC,4KAAmB;QAClB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 823, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/lib/errors.ts"],"sourcesContent":["export class UserConsentRequiredError extends Error {\n    consentUrl: string;\n\n    constructor(url: string, message: string = 'Additional permissions required') {\n        super(message);\n        this.name = 'UserConsentRequiredError';\n        this.consentUrl = url;\n    }\n}"],"names":[],"mappings":";;;;;;AAAO,MAAM,iCAAiC;IAG1C,YAAY,GAAW,EAAE,UAAkB,iCAAiC,CAAE;QAC1E,KAAK,CAAC,UAHV,+KAAA,cAAA,KAAA;QAII,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,UAAU,GAAG;IACtB;AACJ","debugId":null}},
    {"offset": {"line": 843, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/lib/apiRequest.ts"],"sourcesContent":["// lib/apiRequest.ts\nimport { UserConsentRequiredError } from '@/lib/errors';\n\nexport class ApiError extends Error {\n    public correlationId?: string | null;\n    public status?: number;\n\n    constructor(message: string, correlationId?: string | null, status?: number) {\n        super(message);\n        this.name = 'ApiError';\n        this.correlationId = correlationId;\n        this.status = status;\n    }\n}\n\nexport async function apiRequest<T>(url: string, options: RequestInit = {}, token?: string): Promise<T> {\n    try {\n        // Add authorization header if token is provided\n        const headers = {\n            'Content-Type': 'application/json',\n            ...options.headers,\n            ...(token && { Authorization: `Bearer ${token}` })\n        };\n\n        const response = await fetch(url, {\n            ...options,\n            headers\n        });\n\n        // Extract correlation ID from response headers ALWAYS\n        const correlationId = response.headers.get('x-correlation-id') ||\n            response.headers.get('X-Correlation-ID') ||\n            response.headers.get('correlation-id') ||\n            response.headers.get('Correlation-ID');\n\n        // Handle non-JSON responses\n        const contentType = response.headers.get('content-type');\n        const isJson = contentType && contentType.includes('application/json');\n\n        // Parse response\n        const data = isJson ? await response.json() : await response.text();\n\n        // Handle 401 specifically for consent\n        if (response.status === 401) {\n            console.log(\"401 response detected:\", JSON.stringify(data, null, 2));\n\n            if (data?.message?.url) {\n                console.log(\"Consent URL found:\", data.message.url);\n                throw new UserConsentRequiredError(\n                    data.message.url,\n                    data.message.message || \"Additional permissions required\"\n                );\n            }\n\n            const consentUrl = data?.consentUrl || data?.message?.url;\n            if (consentUrl) {\n                console.log(\"Consent URL detected:\", consentUrl);\n                throw new UserConsentRequiredError(consentUrl);\n            }\n        }\n\n        // Handle ALL other error status codes (400, 500, etc.)\n        if (!response.ok) {\n            console.log(`Error ${response.status} response data:`, JSON.stringify(data, null, 2));\n\n            // Debug: Log ALL headers to see what we actually have\n            console.log(\"=== ALL RESPONSE HEADERS ===\");\n            for (const [key, value] of response.headers) {\n                console.log(`${key}: ${value}`);\n            }\n\n\n\n            // Create error message based on status code, not response content\n            const errorMessage = `API request failed: ${response.status} - ${response.statusText || 'HTTP Error'}`;\n\n            console.log(\"Final error message:\", errorMessage);\n            throw new ApiError(errorMessage, correlationId, response.status);\n        }\n\n        // Success case\n        console.log(\"Success response, correlation ID:\", correlationId);\n        return data as T;\n    } catch (error) {\n        // Re-throw specific errors\n        if (error instanceof UserConsentRequiredError || error instanceof ApiError) {\n            throw error;\n        }\n\n        console.error(\"API request error:\", error);\n        throw error;\n    }\n}\n"],"names":[],"mappings":"AAAA,oBAAoB;;;;;;;;AACpB;;;AAEO,MAAM,iBAAiB;IAI1B,YAAY,OAAe,EAAE,aAA6B,EAAE,MAAe,CAAE;QACzE,KAAK,CAAC,UAJV,+KAAO,iBAAP,KAAA,IACA,+KAAO,UAAP,KAAA;QAII,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,MAAM,GAAG;IAClB;AACJ;AAEO,eAAe,WAAc,GAAW;QAAE,UAAA,iEAAuB,CAAC,GAAG;IACxE,IAAI;QACA,gDAAgD;QAChD,MAAM,UAAU;YACZ,gBAAgB;YAChB,GAAG,QAAQ,OAAO;YAClB,GAAI,SAAS;gBAAE,eAAe,AAAC,UAAe,OAAN;YAAQ,CAAC;QACrD;QAEA,MAAM,WAAW,MAAM,MAAM,KAAK;YAC9B,GAAG,OAAO;YACV;QACJ;QAEA,sDAAsD;QACtD,MAAM,gBAAgB,SAAS,OAAO,CAAC,GAAG,CAAC,uBACvC,SAAS,OAAO,CAAC,GAAG,CAAC,uBACrB,SAAS,OAAO,CAAC,GAAG,CAAC,qBACrB,SAAS,OAAO,CAAC,GAAG,CAAC;QAEzB,4BAA4B;QAC5B,MAAM,cAAc,SAAS,OAAO,CAAC,GAAG,CAAC;QACzC,MAAM,SAAS,eAAe,YAAY,QAAQ,CAAC;QAEnD,iBAAiB;QACjB,MAAM,OAAO,SAAS,MAAM,SAAS,IAAI,KAAK,MAAM,SAAS,IAAI;QAEjE,sCAAsC;QACtC,IAAI,SAAS,MAAM,KAAK,KAAK;gBAGrB,eAQmC;YAVvC,QAAQ,GAAG,CAAC,0BAA0B,KAAK,SAAS,CAAC,MAAM,MAAM;YAEjE,IAAI,iBAAA,4BAAA,gBAAA,KAAM,OAAO,cAAb,oCAAA,cAAe,GAAG,EAAE;gBACpB,QAAQ,GAAG,CAAC,sBAAsB,KAAK,OAAO,CAAC,GAAG;gBAClD,MAAM,IAAI,4IAAwB,CAC9B,KAAK,OAAO,CAAC,GAAG,EAChB,KAAK,OAAO,CAAC,OAAO,IAAI;YAEhC;YAEA,MAAM,aAAa,CAAA,iBAAA,2BAAA,KAAM,UAAU,MAAI,iBAAA,4BAAA,iBAAA,KAAM,OAAO,cAAb,qCAAA,eAAe,GAAG;YACzD,IAAI,YAAY;gBACZ,QAAQ,GAAG,CAAC,yBAAyB;gBACrC,MAAM,IAAI,4IAAwB,CAAC;YACvC;QACJ;QAEA,uDAAuD;QACvD,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,QAAQ,GAAG,CAAC,AAAC,SAAwB,OAAhB,SAAS,MAAM,EAAC,oBAAkB,KAAK,SAAS,CAAC,MAAM,MAAM;YAElF,sDAAsD;YACtD,QAAQ,GAAG,CAAC;YACZ,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,SAAS,OAAO,CAAE;gBACzC,QAAQ,GAAG,CAAC,AAAC,GAAU,OAAR,KAAI,MAAU,OAAN;YAC3B;YAIA,kEAAkE;YAClE,MAAM,eAAe,AAAC,uBAA2C,OAArB,SAAS,MAAM,EAAC,OAAyC,OAApC,SAAS,UAAU,IAAI;YAExF,QAAQ,GAAG,CAAC,wBAAwB;YACpC,MAAM,IAAI,SAAS,cAAc,eAAe,SAAS,MAAM;QACnE;QAEA,eAAe;QACf,QAAQ,GAAG,CAAC,qCAAqC;QACjD,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,2BAA2B;QAC3B,IAAI,iBAAiB,4IAAwB,IAAI,iBAAiB,UAAU;YACxE,MAAM;QACV;QAEA,QAAQ,KAAK,CAAC,sBAAsB;QACpC,MAAM;IACV;AACJ","debugId":null}},
    {"offset": {"line": 930, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/hooks/useApiRequest.ts"],"sourcesContent":["// hooks/useApiRequest.ts\nimport { useRef, useCallback } from 'react';\nimport { useMsal } from '@azure/msal-react';\nimport { useConsent } from \"@/contexts/ConsentContext\";\nimport { useTenant } from \"@/contexts/TenantContext\";\nimport { apiRequest, ApiError } from \"@/lib/apiRequest\";\nimport { apiScope } from '@/lib/msalConfig';\nimport { UserConsentRequiredError } from '@/lib/errors';\nimport { useError } from '@/contexts/ErrorContext';\n\nexport function useApiRequest() {\n    const { instance, accounts } = useMsal();\n    const { showConsent } = useConsent();\n    const { showError, clearError } = useError();\n    const { selectedTenant } = useTenant();\n    const abortControllerRef = useRef<AbortController | null>(null);\n\n    const request = useCallback(async function<T>(\n        url: string,\n        options: RequestInit = {},\n        onConsentComplete?: () => Promise<T>\n    ): Promise<T | undefined> {\n        // Cancel previous request if still running\n        clearError();\n\n        if (abortControllerRef.current) {\n            abortControllerRef.current.abort();\n        }\n\n        // Create new abort controller\n        abortControllerRef.current = new AbortController();\n\n        try {\n            // Get access token\n            let accessToken: string | undefined;\n            if (accounts.length > 0) {\n                const response = await instance.acquireTokenSilent({\n                    scopes: [apiScope],\n                    account: accounts[0],\n                });\n                accessToken = response.accessToken;\n            }\n\n            // Add tenant header and signal to options\n            const requestOptions = {\n                ...options,\n                signal: abortControllerRef.current.signal,\n                headers: {\n                    ...options.headers,\n                    ...(selectedTenant && { 'X-Tenant-ID': selectedTenant.tenantId })\n                }\n            };\n\n            return await apiRequest<T>(url, requestOptions, accessToken);\n        } catch (err) {\n            if (err instanceof Error && err.name === 'AbortError') {\n                return;\n            }\n\n            if (err instanceof UserConsentRequiredError) {\n                console.log(\"Consent required, showing consent dialog with URL:\", err.consentUrl);\n                showConsent(err.consentUrl, onConsentComplete ?\n                    async () => {\n                        try {\n                            return await onConsentComplete();\n                        } catch (retryError) {\n                            console.error(\"Error retrying request after consent:\", retryError);\n                            const retryErrorMessage = retryError instanceof Error ? retryError.message : 'Retry failed';\n                            showError(retryErrorMessage);\n                        }\n                    } : undefined\n                );\n                return;\n            }\n\n            // Handle ApiError with correlation ID\n            let errorMessage = err instanceof Error ? err.message : 'An error occurred';\n\n            if (err instanceof ApiError && err.correlationId) {\n                errorMessage = `${errorMessage} (Correlation ID: ${err.correlationId})`;\n                console.log('Error with correlation ID:', err.correlationId);\n            }\n\n            // Show error through global error handler\n            showError(errorMessage, onConsentComplete ? async () => {\n                try {\n                    return await onConsentComplete();\n                } catch (retryError) {\n                    console.error(\"Error retrying request after consent:\", retryError);\n                    const retryErrorMessage = retryError instanceof Error ? retryError.message : 'Retry failed';\n                    showError(retryErrorMessage);\n                }\n            } : undefined);\n\n            return;\n        }\n    }, [instance, accounts, showConsent, selectedTenant, showError, clearError]);\n\n    const cancel = useCallback(() => {\n        if (abortControllerRef.current) {\n            abortControllerRef.current.abort();\n            abortControllerRef.current = null;\n        }\n    }, []);\n\n    return { request, cancel };\n}\n"],"names":[],"mappings":"AAAA,yBAAyB;;;;;AACzB;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AAEO,SAAS;;IACZ,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,IAAA,kLAAO;IACtC,MAAM,EAAE,WAAW,EAAE,GAAG,IAAA,4IAAU;IAClC,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,IAAA,wIAAQ;IAC1C,MAAM,EAAE,cAAc,EAAE,GAAG,IAAA,0IAAS;IACpC,MAAM,qBAAqB,IAAA,uKAAM,EAAyB;IAE1D,MAAM,UAAU,IAAA,4KAAW;8CAAC,eACxB,GAAW;gBACX,UAAA,iEAAuB,CAAC,GACxB;YAEA,2CAA2C;YAC3C;YAEA,IAAI,mBAAmB,OAAO,EAAE;gBAC5B,mBAAmB,OAAO,CAAC,KAAK;YACpC;YAEA,8BAA8B;YAC9B,mBAAmB,OAAO,GAAG,IAAI;YAEjC,IAAI;gBACA,mBAAmB;gBACnB,IAAI;gBACJ,IAAI,SAAS,MAAM,GAAG,GAAG;oBACrB,MAAM,WAAW,MAAM,SAAS,kBAAkB,CAAC;wBAC/C,QAAQ;4BAAC,gIAAQ;yBAAC;wBAClB,SAAS,QAAQ,CAAC,EAAE;oBACxB;oBACA,cAAc,SAAS,WAAW;gBACtC;gBAEA,0CAA0C;gBAC1C,MAAM,iBAAiB;oBACnB,GAAG,OAAO;oBACV,QAAQ,mBAAmB,OAAO,CAAC,MAAM;oBACzC,SAAS;wBACL,GAAG,QAAQ,OAAO;wBAClB,GAAI,kBAAkB;4BAAE,eAAe,eAAe,QAAQ;wBAAC,CAAC;oBACpE;gBACJ;gBAEA,OAAO,MAAM,IAAA,kIAAU,EAAI,KAAK,gBAAgB;YACpD,EAAE,OAAO,KAAK;gBACV,IAAI,eAAe,SAAS,IAAI,IAAI,KAAK,cAAc;oBACnD;gBACJ;gBAEA,IAAI,eAAe,4IAAwB,EAAE;oBACzC,QAAQ,GAAG,CAAC,sDAAsD,IAAI,UAAU;oBAChF,YAAY,IAAI,UAAU,EAAE;8DACxB;4BACI,IAAI;gCACA,OAAO,MAAM;4BACjB,EAAE,OAAO,YAAY;gCACjB,QAAQ,KAAK,CAAC,yCAAyC;gCACvD,MAAM,oBAAoB,sBAAsB,QAAQ,WAAW,OAAO,GAAG;gCAC7E,UAAU;4BACd;wBACJ;+DAAI;oBAER;gBACJ;gBAEA,sCAAsC;gBACtC,IAAI,eAAe,eAAe,QAAQ,IAAI,OAAO,GAAG;gBAExD,IAAI,eAAe,gIAAQ,IAAI,IAAI,aAAa,EAAE;oBAC9C,eAAe,AAAC,GAAmC,OAAjC,cAAa,sBAAsC,OAAlB,IAAI,aAAa,EAAC;oBACrE,QAAQ,GAAG,CAAC,8BAA8B,IAAI,aAAa;gBAC/D;gBAEA,0CAA0C;gBAC1C,UAAU,cAAc;0DAAoB;wBACxC,IAAI;4BACA,OAAO,MAAM;wBACjB,EAAE,OAAO,YAAY;4BACjB,QAAQ,KAAK,CAAC,yCAAyC;4BACvD,MAAM,oBAAoB,sBAAsB,QAAQ,WAAW,OAAO,GAAG;4BAC7E,UAAU;wBACd;oBACJ;2DAAI;gBAEJ;YACJ;QACJ;6CAAG;QAAC;QAAU;QAAU;QAAa;QAAgB;QAAW;KAAW;IAE3E,MAAM,SAAS,IAAA,4KAAW;6CAAC;YACvB,IAAI,mBAAmB,OAAO,EAAE;gBAC5B,mBAAmB,OAAO,CAAC,KAAK;gBAChC,mBAAmB,OAAO,GAAG;YACjC;QACJ;4CAAG,EAAE;IAEL,OAAO;QAAE;QAAS;IAAO;AAC7B;GAhGgB;;QACmB,kLAAO;QACd,4IAAU;QACA,wIAAQ;QACf,0IAAS","debugId":null}},
    {"offset": {"line": 1070, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/hooks/useGdapTenantOnboarding.ts"],"sourcesContent":["import { useState, useCallback } from 'react';\nimport {PARTNER_TENANTS_ENDPOINT, CONSENT_URL_ENDPOINT} from '@/lib/constants';\nimport {useApiRequest} from \"@/hooks/useApiRequest\";\nimport {apiScope} from \"@/lib/msalConfig\";\nimport {useMsal} from \"@azure/msal-react\";\n\nexport interface PartnerTenant {\n    tenantId: string;\n    displayName: string;\n    domain: string;\n    country: string;\n    createdDateTime: string | null;\n    isOnboarded: boolean;\n    isLinked: boolean;\n}\n\ninterface ApiResponse {\n    message: string | { url: string; message: string }; // Updated to handle both cases\n    details: string;\n    data: PartnerTenant[];\n    status: string;\n}\n\nexport const useGdapTenantOnboarding = (partnerTenantId?: string) => {\n    const [partnerTenants, setPartnerTenants] = useState<PartnerTenant[]>([]);\n    const [selectedTenant, setSelectedTenant] = useState<PartnerTenant | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const { request } = useApiRequest();\n\n    const fetchPartnerTenants = useCallback(async (): Promise<ApiResponse> => {\n        if (!partnerTenantId) {\n            setError('Your tenant ID is required to fetch partner tenants');\n            throw new Error('Your tenant ID is required to fetch partner tenants');\n        }\n\n        setLoading(true);\n        setError(null);\n\n        try {\n            const data = await request<ApiResponse>(\n                PARTNER_TENANTS_ENDPOINT,\n                {\n                    method: 'GET',\n                    headers: {\n                        'X-Tenant-ID': partnerTenantId,\n                        'Content-Type': 'application/json'\n                    }\n                },\n                fetchPartnerTenants\n            );\n\n            // Handle the case where data might be undefined\n            if (!data) {\n                throw new Error('No data received from API');\n            }\n\n            if (data.status === 'Success' && Array.isArray(data.data)) {\n                setPartnerTenants(data.data);\n                setError(null);\n            } else if (data.message) {\n                const errorMessage = typeof data.message === 'string'\n                    ? data.message\n                    : 'Failed to fetch partner tenants';\n                setError(errorMessage);\n            }\n\n            return data;\n        } catch (error) {\n            console.error('Failed to fetch partner tenants:', error);\n            setError('Failed to fetch partner tenants');\n            throw error;\n        } finally {\n            setLoading(false);\n        }\n    }, [partnerTenantId, request]);\n\n\n\n    const resetSelection = useCallback(() => {\n        setSelectedTenant(null);\n        setPartnerTenants([]);\n        setError(null);\n    }, []);\n\n    return {\n        partnerTenants,\n        selectedTenant,\n        setSelectedTenant,\n        loading,\n        error,\n        fetchPartnerTenants,\n        resetSelection\n    };\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAqBO,MAAM,0BAA0B,CAAC;;IACpC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAkB,EAAE;IACxE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAuB;IAC3E,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAClD,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,0IAAa;IAEjC,MAAM,sBAAsB,IAAA,4KAAW;oEAAC;YACpC,IAAI,CAAC,iBAAiB;gBAClB,SAAS;gBACT,MAAM,IAAI,MAAM;YACpB;YAEA,WAAW;YACX,SAAS;YAET,IAAI;gBACA,MAAM,OAAO,MAAM,QACf,+IAAwB,EACxB;oBACI,QAAQ;oBACR,SAAS;wBACL,eAAe;wBACf,gBAAgB;oBACpB;gBACJ,GACA;gBAGJ,gDAAgD;gBAChD,IAAI,CAAC,MAAM;oBACP,MAAM,IAAI,MAAM;gBACpB;gBAEA,IAAI,KAAK,MAAM,KAAK,aAAa,MAAM,OAAO,CAAC,KAAK,IAAI,GAAG;oBACvD,kBAAkB,KAAK,IAAI;oBAC3B,SAAS;gBACb,OAAO,IAAI,KAAK,OAAO,EAAE;oBACrB,MAAM,eAAe,OAAO,KAAK,OAAO,KAAK,WACvC,KAAK,OAAO,GACZ;oBACN,SAAS;gBACb;gBAEA,OAAO;YACX,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,oCAAoC;gBAClD,SAAS;gBACT,MAAM;YACV,SAAU;gBACN,WAAW;YACf;QACJ;mEAAG;QAAC;QAAiB;KAAQ;IAI7B,MAAM,iBAAiB,IAAA,4KAAW;+DAAC;YAC/B,kBAAkB;YAClB,kBAAkB,EAAE;YACpB,SAAS;QACb;8DAAG,EAAE;IAEL,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;QACA;IACJ;AACJ;GAvEa;;QAKW,0IAAa","debugId":null}},
    {"offset": {"line": 1157, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/components/ui/command.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { SearchIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\"\n\nfunction Command({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive>) {\n  return (\n    <CommandPrimitive\n      data-slot=\"command\"\n      className={cn(\n        \"bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandDialog({\n  title = \"Command Palette\",\n  description = \"Search for a command to run...\",\n  children,\n  className,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof Dialog> & {\n  title?: string\n  description?: string\n  className?: string\n  showCloseButton?: boolean\n}) {\n  return (\n    <Dialog {...props}>\n      <DialogHeader className=\"sr-only\">\n        <DialogTitle>{title}</DialogTitle>\n        <DialogDescription>{description}</DialogDescription>\n      </DialogHeader>\n      <DialogContent\n        className={cn(\"overflow-hidden p-0\", className)}\n        showCloseButton={showCloseButton}\n      >\n        <Command className=\"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nfunction CommandInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Input>) {\n  return (\n    <div\n      data-slot=\"command-input-wrapper\"\n      className=\"flex h-9 items-center gap-2 border-b px-3\"\n    >\n      <SearchIcon className=\"size-4 shrink-0 opacity-50\" />\n      <CommandPrimitive.Input\n        data-slot=\"command-input\"\n        className={cn(\n          \"placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction CommandList({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.List>) {\n  return (\n    <CommandPrimitive.List\n      data-slot=\"command-list\"\n      className={cn(\n        \"max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandEmpty({\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Empty>) {\n  return (\n    <CommandPrimitive.Empty\n      data-slot=\"command-empty\"\n      className=\"py-6 text-center text-sm\"\n      {...props}\n    />\n  )\n}\n\nfunction CommandGroup({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Group>) {\n  return (\n    <CommandPrimitive.Group\n      data-slot=\"command-group\"\n      className={cn(\n        \"text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Separator>) {\n  return (\n    <CommandPrimitive.Separator\n      data-slot=\"command-separator\"\n      className={cn(\"bg-border -mx-1 h-px\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CommandItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Item>) {\n  return (\n    <CommandPrimitive.Item\n      data-slot=\"command-item\"\n      className={cn(\n        \"data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandShortcut({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"command-shortcut\"\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AACA;AAPA;;;;;;AAeA,SAAS,QAAQ,KAG+B;QAH/B,EACf,SAAS,EACT,GAAG,OAC2C,GAH/B;IAIf,qBACE,6LAAC,oJAAgB;QACf,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,6FACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS;AAgBT,SAAS,cAAc,KAYtB;QAZsB,EACrB,QAAQ,iBAAiB,EACzB,cAAc,gCAAgC,EAC9C,QAAQ,EACR,SAAS,EACT,kBAAkB,IAAI,EACtB,GAAG,OAMJ,GAZsB;IAarB,qBACE,6LAAC,wIAAM;QAAE,GAAG,KAAK;;0BACf,6LAAC,8IAAY;gBAAC,WAAU;;kCACtB,6LAAC,6IAAW;kCAAE;;;;;;kCACd,6LAAC,mJAAiB;kCAAE;;;;;;;;;;;;0BAEtB,6LAAC,+IAAa;gBACZ,WAAW,IAAA,qHAAE,EAAC,uBAAuB;gBACrC,iBAAiB;0BAEjB,cAAA,6LAAC;oBAAQ,WAAU;8BAChB;;;;;;;;;;;;;;;;;AAKX;MA7BS;AA+BT,SAAS,aAAa,KAGgC;QAHhC,EACpB,SAAS,EACT,GAAG,OACiD,GAHhC;IAIpB,qBACE,6LAAC;QACC,aAAU;QACV,WAAU;;0BAEV,6LAAC,2NAAU;gBAAC,WAAU;;;;;;0BACtB,6LAAC,oJAAgB,CAAC,KAAK;gBACrB,aAAU;gBACV,WAAW,IAAA,qHAAE,EACX,4JACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIjB;MApBS;AAsBT,SAAS,YAAY,KAGgC;QAHhC,EACnB,SAAS,EACT,GAAG,OACgD,GAHhC;IAInB,qBACE,6LAAC,oJAAgB,CAAC,IAAI;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,+DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,aAAa,KAEgC;QAFhC,EACpB,GAAG,OACiD,GAFhC;IAGpB,qBACE,6LAAC,oJAAgB,CAAC,KAAK;QACrB,aAAU;QACV,WAAU;QACT,GAAG,KAAK;;;;;;AAGf;MAVS;AAYT,SAAS,aAAa,KAGgC;QAHhC,EACpB,SAAS,EACT,GAAG,OACiD,GAHhC;IAIpB,qBACE,6LAAC,oJAAgB,CAAC,KAAK;QACrB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0NACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,iBAAiB,KAGgC;QAHhC,EACxB,SAAS,EACT,GAAG,OACqD,GAHhC;IAIxB,qBACE,6LAAC,oJAAgB,CAAC,SAAS;QACzB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,wBAAwB;QACrC,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,KAGgC;QAHhC,EACnB,SAAS,EACT,GAAG,OACgD,GAHhC;IAInB,qBACE,6LAAC,oJAAgB,CAAC,IAAI;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,uYACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,gBAAgB,KAGM;QAHN,EACvB,SAAS,EACT,GAAG,OAC0B,GAHN;IAIvB,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,yDACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS","debugId":null}},
    {"offset": {"line": 1379, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/components/onboarding/tenant-onboarding.tsx"],"sourcesContent":["'use client';\nimport { useState, useEffect } from 'react';\nimport { useMsal } from '@azure/msal-react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Switch } from '@/components/ui/switch';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport {\n    Info, Users, Building, Lock, AlertCircle, Loader2, CheckCircle,\n    Shield, ExternalLink, X\n} from 'lucide-react';\nimport { useGdapTenantOnboarding, type PartnerTenant } from '@/hooks/useGdapTenantOnboarding';\nimport { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem, CommandList } from '@/components/ui/command';\nimport {CONSENT_URL_ENDPOINT, CONSENT_CALLBACK, CUSTOMER_ENDPOINT} from '@/lib/constants';\nimport { apiScope } from '@/lib/msalConfig';\n\ninterface TenantOnboardingModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    customerId: string;\n    customerName: string;\n    onSuccess: () => void;\n    gdapTenant?: PartnerTenant;\n    type?: 'regular' | 'gdap';\n}\n\ninterface OnboardingResult {\n    status: string;\n    message: string;\n    data?: string;\n}\n\nconst TenantOnboardingModal: React.FC<TenantOnboardingModalProps> = ({\n                                                                         isOpen,\n                                                                         onClose,\n                                                                         customerId,\n                                                                         customerName,\n                                                                         onSuccess,\n                                                                         gdapTenant,\n                                                                         type = 'regular'\n                                                                     }) => {\n    // State management\n    const {instance, accounts} = useMsal();\n    const [consentState, setConsentState] = useState<string | null>(null);\n    const [onboardingResult, setOnboardingResult] = useState<OnboardingResult | null>(null);\n\n    const [currentStep, setCurrentStep] = useState(0);\n    const [isGdapMode, setIsGdapMode] = useState(true);\n    const [tenantId, setTenantId] = useState(gdapTenant?.tenantId || '');\n    const [tenantDomainName, setTenantDomainName] = useState(gdapTenant?.domain || '');\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const [consentWindow, setConsentWindow] = useState<Window | null>(null);\n    const [consentCompleted, setConsentCompleted] = useState(false);\n\n    const loggedInUserTenantId = accounts[0]?.tenantId || accounts[0]?.homeAccountId?.split('.')[1];\n\n    const {\n        partnerTenants,\n        selectedTenant,\n        setSelectedTenant,\n        loading: gdapLoading,\n        error: gdapError,\n        fetchPartnerTenants,\n        resetSelection\n    } = useGdapTenantOnboarding(loggedInUserTenantId);\n\n    // Initialize component when opening\n    useEffect(() => {\n        if (isOpen) {\n            if (gdapTenant) {\n                setIsGdapMode(true);\n                setTenantId(gdapTenant.tenantId);\n                setTenantDomainName(gdapTenant.domain);\n                setCurrentStep(1); // Skip step 0 for pre-selected GDAP tenant\n            } else {\n                setCurrentStep(0);\n                setIsGdapMode(true); // Always default to GDAP\n                setTenantId('');\n                setTenantDomainName('');\n            }\n            setError(null);\n            setConsentCompleted(false);\n            resetSelection();\n        }\n    }, [isOpen, gdapTenant, type, resetSelection]);\n\n    // Handle consent window messages\n    useEffect(() => {\n        const handleMessage = (event: MessageEvent) => {\n            if (event.origin !== window.location.origin) {\n                console.log('Message from different origin ignored:', event.origin);\n                return;\n            }\n            if (event.data.type === 'CONSENT_SUCCESS') {\n                console.log('Consent success received');\n                setConsentCompleted(true);\n                setLoading(false);\n\n                if (consentWindow) {\n                    consentWindow.close();\n                    setConsentWindow(null);\n                }\n                handleConsentCallback();\n\n            } else if (event.data.type === 'CONSENT_ERROR') {\n                console.log('Consent error received:', event.data);\n                setError(`Consent failed: ${event.data.errorDescription || event.data.error || 'Unknown error'}`);\n                setLoading(false);\n\n                if (consentWindow) {\n                    consentWindow.close();\n                    setConsentWindow(null);\n                }\n            }\n        };\n\n        window.addEventListener('message', handleMessage);\n        return () => window.removeEventListener('message', handleMessage);\n    }, [consentWindow]);\n\n    // Monitor consent window closure\n    useEffect(() => {\n        if (!consentWindow) return;\n\n        const checkClosed = setInterval(() => {\n            if (consentWindow.closed && !consentCompleted) {\n                console.log('Consent window closed without completion');\n                setError('Consent window was closed. Please try again.');\n                setLoading(false);\n                setConsentWindow(null);\n            }\n        }, 1000);\n\n        return () => clearInterval(checkClosed);\n    }, [consentWindow, consentCompleted]);\n\n    const linkExistingTenant = async () => {\n        try {\n            setLoading(true);\n            setError(null);\n\n            const finalTenantId = isGdapMode ? selectedTenant?.tenantId : tenantId;\n\n            if (!finalTenantId) {\n                throw new Error('Missing tenant ID');\n            }\n\n            const token = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            const response = await fetch(\n                `${CUSTOMER_ENDPOINT}/tenants`,\n                {\n                    method: 'POST',\n                    headers: {\n                        'Authorization': `Bearer ${token.accessToken}`,\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({\n                        isEnabled: true,\n                        isGdap: isGdapMode,\n                        tenantId: finalTenantId\n                    })\n                }\n            );\n\n            if (!response.ok) {\n                const errorData = await response.json().catch(() => null);\n                throw new Error(errorData?.message || `Failed to link tenant: ${response.statusText}`);\n            }\n\n            const result = await response.json();\n            console.log('Tenant linked successfully:', result);\n\n            setOnboardingResult({\n                status: 'success',\n                message: 'Tenant linked successfully'\n            });\n            setCurrentStep(3);\n        } catch (err) {\n            console.error('Error linking tenant:', err);\n            setError(err instanceof Error ? err.message : 'Failed to link tenant');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n\n    const handleConsentCallback = async () => {\n        try {\n            setLoading(true);\n            setError(null);\n\n            console.log('Processing consent callback...');\n\n            // Wait a moment for the consent to be processed\n            await new Promise(resolve => setTimeout(resolve, 2000));\n\n            const token = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            // Check onboarding status or complete the process\n            const response = await fetch(\n                `${CONSENT_CALLBACK}${consentState ? `?state=${consentState}` : ''}`,\n                {\n                    method: 'GET',\n                    headers: {\n                        'Authorization': `Bearer ${token.accessToken}`,\n                        'Content-Type': 'application/json',\n                    }\n                }\n            );\n\n            if (!response.ok) {\n                const errorData = await response.json().catch(() => null);\n                throw new Error(errorData?.message || `Failed to complete onboarding: ${response.statusText}`);\n            }\n\n            let result = null;\n            if (response.status === 204) {\n                console.log('Onboarding completed (204 No Content)');\n                result = { status: 'success', message: 'Onboarding completed successfully' };\n            } else {\n                result = await response.json();\n                console.log('Onboarding completed:', result);\n            }\n\n            setOnboardingResult(result);\n            setCurrentStep(3);\n        } catch (err) {\n            console.error('Error completing onboarding:', err);\n            setError(err instanceof Error ? err.message : 'Failed to complete onboarding');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n\n    // Step navigation\n    const handleNext = () => {\n        setError(null);\n\n        if (currentStep === 0) {\n            // Step 1: Method selection and data entry\n            if (isGdapMode && !selectedTenant) {\n                setError('Please select a partner tenant for GDAP onboarding');\n                return;\n            }\n            if (!isGdapMode && (!tenantId || !tenantDomainName)) {\n                setError('Please enter tenant ID and domain name');\n                return;\n            }\n            setCurrentStep(1);\n        } else if (currentStep === 1) {\n            // Check if tenant is already onboarded but not linked\n            const isOnboardedNotLinked = isGdapMode\n                ? selectedTenant?.isOnboarded && !selectedTenant?.isLinked\n                : false; // For manual entry, we can't determine this easily\n\n            if (isOnboardedNotLinked) {\n                // Skip consent step and go directly to linking\n                linkExistingTenant();\n            } else {\n                // Step 2: Validation -> Admin Consent\n                setCurrentStep(2);\n                initiateConsent();\n            }\n        } else if (currentStep === 2) {\n            // This step is handled by consent completion\n            setCurrentStep(3);\n        }\n    };\n\n    const handleBack = () => {\n        if (currentStep > 0) {\n            setCurrentStep(currentStep - 1);\n        }\n    };\n\n    const initiateConsent = async () => {\n        try {\n            setLoading(true);\n            setError(null);\n\n            const finalTenantId = isGdapMode ? selectedTenant?.tenantId : tenantId;\n            const finalDomainName = isGdapMode ? selectedTenant?.domain : tenantDomainName;\n            const finalDisplayName = isGdapMode ? selectedTenant?.displayName : undefined;\n\n            console.log('Initiating consent for tenant:', {\n                tenantId: finalTenantId,\n                domainName: finalDomainName,\n                displayName: finalDisplayName,\n                isGdap: isGdapMode\n            });\n\n            if (!finalTenantId || !finalDomainName) {\n                throw new Error('Missing tenant information');\n            }\n            const tokenResponse = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            // Build API URL to get consent URL\n            const apiUrl = `${CUSTOMER_ENDPOINT}/${customerId}/tenants/onboarding?tenantid=${finalTenantId}&tenantName=${finalDisplayName}&domainName=${encodeURIComponent(finalDomainName)}&isGdap=${isGdapMode}`;\n            console.log(' API URL:', apiUrl);\n\n            // Make API call to get consent URL\n            const response = await fetch(apiUrl, {\n                method: 'GET',\n                headers: {\n                    'Authorization': `Bearer ${tokenResponse.accessToken}`,\n                    'Content-Type': 'application/json',\n                },\n            });\n\n            if (!response.ok) {\n                const errorData = await response.json().catch(() => null);\n                throw new Error(errorData?.message || `Failed to get consent URL: ${response.statusText}`);\n            }\n\n            const result = await response.json();\n            console.log(' API Response:', result);\n\n            // Extract consent URL from API response\n            const consentUrl = result.data?.url || result.url;\n            if (!consentUrl) {\n                throw new Error('No consent URL received from API');\n            }\n            const state = extractStateFromConsentUrl(result.data.url);\n            setConsentState(state);\n            console.log(' Opening consent URL:', consentUrl);\n\n            // Open consent window with the URL from API\n            const popup = window.open(\n                consentUrl,\n                'consentWindow',\n                'width=600,height=700,scrollbars=yes,resizable=yes,status=yes,location=yes,toolbar=no,menubar=no'\n            );\n\n            if (popup) {\n                setConsentWindow(popup);\n                popup.focus();\n            } else {\n                throw new Error('Failed to open consent window. Please check your popup blocker settings.');\n            }\n\n        } catch (err) {\n            console.error('Error initiating consent:', err);\n            setError(err instanceof Error ? err.message : 'Failed to initiate consent');\n            setLoading(false);\n        }\n    };\n\n    const extractStateFromConsentUrl = (url: string): string | null => {\n        try {\n            const urlObj = new URL(url);\n            return urlObj.searchParams.get('state');\n        } catch (error) {\n            console.error('Failed to parse consent URL:', error);\n            return null;\n        }\n    };\n\n    const handleComplete = () => {\n        onSuccess();\n        onClose();\n    };\n\n    // Step content rendering\n    const renderStepContent = () => {\n        switch (currentStep) {\n            case 0:\n                return (\n                    <Card>\n                        <CardHeader>\n                            <CardTitle>Step 1: Choose Onboarding Method</CardTitle>\n                            <CardDescription>Select how you want to onboard this tenant</CardDescription>\n                        </CardHeader>\n                        <CardContent className=\"space-y-6\">\n                            {/* Method Selection */}\n                            <div className=\"flex items-center justify-between p-4 border rounded-lg\">\n                                <div className=\"flex-1\">\n                                    <div className=\"flex items-center gap-2 mb-2\">\n                                        <h4 className=\"font-medium\">Authentication Method</h4>\n                                        <Info className=\"h-4 w-4 text-blue-500\" />\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <div className=\"flex items-center gap-3\">\n                                            <Switch\n                                                checked={isGdapMode}\n                                                onCheckedChange={(checked) => {\n                                                    setIsGdapMode(checked);\n                                                    setError(null);\n                                                    // Reset selections when switching modes\n                                                    if (!checked) {\n                                                        setSelectedTenant(null);\n                                                        resetSelection();\n                                                    }\n                                                    setTenantId('');\n                                                    setTenantDomainName('');\n                                                }}\n                                                disabled={true}\n                                            />\n\n                                            <span className=\"font-medium\">\n                    {isGdapMode ? 'GDAP (Recommended)' : 'Interactive Authentication'}\n                </span>\n                                        </div>\n                                        <div className=\"text-sm text-gray-600 ml-8\">\n                                            {isGdapMode ? (\n                                                <span>\n                        Use Granular Delegated Admin Privileges for secure partner access.\n                        Select from your existing GDAP relationships.\n                    </span>\n                                            ) : (\n                                                <span>\n                        Traditional interactive authentication requiring customer admin consent.\n                        Enter tenant details manually.\n                    </span>\n                                            )}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n\n                            {/* GDAP Tenant Selection */}\n                            {isGdapMode && (\n                                <Card className=\"border-primary/20 bg-primary/5\">\n                                    <CardHeader>\n                                        <div className=\"flex items-center justify-between\">\n                                            <div>\n                                                <CardTitle className=\"flex items-center gap-2\">\n                                                    <Shield className=\"h-5 w-5\" />\n                                                    Select Partner Tenant\n                                                </CardTitle>\n                                                <CardDescription>\n                                                    Choose from your available GDAP partner tenants\n                                                </CardDescription>\n                                            </div>\n                                            <Button\n                                                variant=\"outline\"\n                                                size=\"sm\"\n                                                onClick={fetchPartnerTenants}\n                                                disabled={gdapLoading}\n                                            >\n                                                {gdapLoading ? (\n                                                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                                                ) : (\n                                                    'Refresh'\n                                                )}\n                                            </Button>\n                                        </div>\n                                    </CardHeader>\n                                    <CardContent className=\"space-y-4\">\n                                        {partnerTenants.length === 0 && !gdapLoading && !gdapError && (\n                                            <Button onClick={fetchPartnerTenants} >\n                                                Load Partner Tenants\n                                            </Button>\n                                        )}\n\n                                        {gdapLoading && (\n                                            <div className=\"text-center py-4\">\n                                                <Loader2 className=\"h-6 w-6 animate-spin mx-auto mb-2\" />\n                                                <p className=\"text-sm text-gray-600\">Loading partner tenants...</p>\n                                            </div>\n                                        )}\n\n                                        {gdapError && (\n                                            <div className=\"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-md\">\n                                                <AlertCircle className=\"h-4 w-4\" />\n                                                {gdapError}\n                                            </div>\n                                        )}\n\n                                        {!gdapLoading && !gdapError && partnerTenants.length > 0 && (\n                                            <Command className=\"rounded-lg border shadow-md\">\n                                                <CommandInput placeholder=\"Search tenants...\" />\n                                                <CommandList className=\"max-h-[300px]\">\n                                                    <CommandEmpty>No tenants found.</CommandEmpty>\n                                                    <CommandGroup>\n                                                        {partnerTenants.map((tenant) => (\n                                                            <CommandItem\n                                                                key={tenant.tenantId}\n                                                                value={`${tenant.domain} ${tenant.displayName || ''}`}\n                                                                onSelect={() => {\n                                                                    setSelectedTenant(tenant);\n                                                                    setTenantId(tenant.tenantId);\n                                                                    setTenantDomainName(tenant.domain);\n                                                                }}\n                                                                disabled={tenant.isLinked}\n                                                                className={`flex items-center justify-between p-3 cursor-pointer hover:bg-gray-50 ${\n                                                                    tenant.isLinked ? 'opacity-50 cursor-not-allowed hover:bg-transparent' : ''\n                                                                }`}\n                                                            >\n                                                                <div className=\"flex-1\">\n                                                                    <div className=\"flex items-center gap-2\">\n                                                                        <p className=\"font-medium\">{tenant.domain}</p>\n                                                                        {tenant.displayName && (\n                                                                            <span className=\"text-sm text-gray-500\">\n                        ({tenant.displayName})\n                    </span>\n                                                                        )}\n                                                                    </div>\n                                                                    <p className=\"text-xs text-gray-400 font-mono\">\n                                                                        {tenant.tenantId}\n                                                                    </p>\n                                                                    <div className=\"flex gap-1 mt-1\">\n                                                                        <Badge\n                                                                            variant={tenant.isOnboarded ? \"default\" : \"secondary\"}\n                                                                            className=\"text-xs\"\n                                                                        >\n                                                                            {tenant.isOnboarded ? 'Onboarded' : 'Not Onboarded'}\n                                                                        </Badge>\n                                                                        <Badge\n                                                                            variant=\"secondary\"\n                                                                            className={`text-xs ${tenant.isLinked ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' : ''}`}\n                                                                        >\n                                                                            {tenant.isLinked ? 'Linked' : 'Not Linked'}\n                                                                        </Badge>\n                                                                    </div>\n                                                                </div>\n                                                                {selectedTenant?.tenantId === tenant.tenantId && (\n                                                                    <CheckCircle className=\"h-5 w-5 text-green-600\" />\n                                                                )}\n                                                            </CommandItem>\n                                                        ))}\n                                                    </CommandGroup>\n                                                </CommandList>\n                                            </Command>\n                                        )}\n\n                                        {selectedTenant && (\n                                            <Card className=\"bg-green-50 border-green-200\">\n                                                <CardContent className=\"p-4\">\n                                                    <div className=\"flex items-center justify-between\">\n                                                        <div>\n                                                            <p className=\"font-medium text-green-800\">\n                                                                Selected: {selectedTenant.domain}\n                                                            </p>\n                                                            <p className=\"text-sm text-green-600\">\n                                                                {selectedTenant.displayName || 'No display name'}\n                                                            </p>\n                                                            <p className=\"text-xs text-green-500 font-mono\">\n                                                                {selectedTenant.tenantId}\n                                                            </p>\n                                                        </div>\n                                                        <Button\n                                                            variant=\"ghost\"\n                                                            size=\"sm\"\n                                                            onClick={() => {\n                                                                setSelectedTenant(null);\n                                                                setTenantId('');\n                                                                setTenantDomainName('');\n                                                            }}\n                                                        >\n                                                            <X className=\"h-4 w-4\" />\n                                                        </Button>\n                                                    </div>\n                                                </CardContent>\n                                            </Card>\n                                        )}\n                                    </CardContent>\n                                </Card>\n                            )}\n\n                            {/* Manual Entry for Interactive Mode */}\n                            {!isGdapMode && (\n                                <div className=\"space-y-4\">\n                                    <div>\n                                        <Label htmlFor=\"tenantId\">Tenant ID</Label>\n                                        <Input\n                                            id=\"tenantId\"\n                                            value={tenantId}\n                                            onChange={(e) => setTenantId(e.target.value)}\n                                            placeholder=\"Enter tenant ID (UUID format)\"\n                                            className=\"font-mono\"\n                                        />\n                                        <p className=\"text-xs text-gray-500 mt-1\">\n                                            The Azure AD tenant ID in UUID format\n                                        </p>\n                                    </div>\n                                    <div>\n                                        <Label htmlFor=\"domain\">Domain Name</Label>\n                                        <Input\n                                            id=\"domain\"\n                                            value={tenantDomainName}\n                                            onChange={(e) => setTenantDomainName(e.target.value)}\n                                            placeholder=\"Enter domain name (e.g., contoso.onmicrosoft.com)\"\n                                        />\n                                        <p className=\"text-xs text-gray-500 mt-1\">\n                                            The primary domain name of the tenant\n                                        </p>\n                                    </div>\n                                </div>\n                            )}\n\n                        </CardContent>\n                    </Card>\n                );\n\n            case 1:\n                return (\n                    <Card>\n                        <CardHeader>\n                            <CardTitle>Step 2: Validation</CardTitle>\n                            <CardDescription>Verify and confirm information</CardDescription>\n                        </CardHeader>\n                         {/*Validation step display*/}\n                        <CardContent className=\"space-y-4\">\n                            <div className=\"bg-gray-50 p-4 rounded-lg space-y-2\">\n                                <div className=\"flex justify-between\">\n                                    <span className=\"font-medium\">Customer:</span>\n                                    <span>{customerName}</span>\n                                </div>\n                                <div className=\"flex justify-between\">\n                                    <span className=\"font-medium\">Method:</span>\n                                    <Badge variant={isGdapMode ? \"default\" : \"secondary\"}>\n                                        {isGdapMode ? 'GDAP' : 'Interactive'}\n                                    </Badge>\n                                </div>\n                                <div className=\"flex justify-between\">\n                                    <span className=\"font-medium\">Tenant ID:</span>\n                                    <span className=\"font-mono text-sm\">\n            {isGdapMode ? selectedTenant?.tenantId : tenantId}\n        </span>\n                                </div>\n                                <div className=\"flex justify-between\">\n                                    <span className=\"font-medium\">Domain:</span>\n                                    <span>{isGdapMode ? selectedTenant?.domain : tenantDomainName}</span>\n                                </div>\n                                {isGdapMode && selectedTenant?.displayName && (\n                                    <div className=\"flex justify-between\">\n                                        <span className=\"font-medium\">Display Name:</span>\n                                        <span>{selectedTenant.displayName}</span>\n                                    </div>\n                                )}\n                                {isGdapMode && selectedTenant && (\n                                    <div className=\"flex justify-between\">\n                                        <span className=\"font-medium\">Status:</span>\n                                        <Badge variant=\"outline\" className=\"text-xs\">\n                                            {selectedTenant.isOnboarded ? 'Previously Onboarded' : 'New Tenant'}\n                                        </Badge>\n                                    </div>\n                                )}\n                            </div>\n                            <div className=\"bg-blue-50 p-4 rounded-lg\">\n                                <div className=\"flex items-start gap-2\">\n                                    <Info className=\"h-5 w-5 text-blue-600 mt-0.5\" />\n                                    <div className=\"text-sm text-blue-800\">\n                                        <p className=\"font-medium\">Next Step:</p>\n                                        {isGdapMode && selectedTenant?.isOnboarded && !selectedTenant?.isLinked ? (\n                                            <p>This tenant is already onboarded. We will link it to your customer account.</p>\n                                        ) : (\n                                            <>\n                                                <p>Admin consent will be initiated to grant necessary permissions for monitoring and management.</p>\n                                                {isGdapMode && (\n                                                    <p className=\"mt-1\">Using GDAP relationship for secure delegated access.</p>\n                                                )}\n                                            </>\n                                        )}\n                                    </div>\n                                </div>\n                            </div>\n                        </CardContent>\n                    </Card>\n                );\n\n            case 2:\n                return (\n                    <Card>\n                        <CardHeader>\n                            <CardTitle>Step 3: Admin Consent</CardTitle>\n                            <CardDescription>Grant necessary permissions</CardDescription>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                            {loading && (\n                                <div className=\"text-center py-6\">\n                                    <Loader2 className=\"h-8 w-8 animate-spin mx-auto mb-4\" />\n                                    <p className=\"font-medium\">Initiating consent process...</p>\n                                    <p className=\"text-sm text-gray-600 mt-2\">\n                                        A popup window will open for admin consent\n                                    </p>\n                                </div>\n                            )}\n\n                            {consentWindow && !consentCompleted && (\n                                <div className=\"text-center py-6\">\n                                    <ExternalLink className=\"h-8 w-8 mx-auto mb-4 text-blue-600\" />\n                                    <p className=\"font-medium\">Consent window is open</p>\n                                    <p className=\"text-sm text-gray-600 mt-2\">\n                                        Please complete the consent process in the popup window\n                                    </p>\n                                    <Button\n                                        variant=\"outline\"\n                                        size=\"sm\"\n                                        onClick={() => {\n                                            if (consentWindow) {\n                                                consentWindow.focus();\n                                            }\n                                        }}\n                                        className=\"mt-4\"\n                                    >\n                                        Focus Consent Window\n                                    </Button>\n                                </div>\n                            )}\n\n                            {!loading && !consentWindow && !consentCompleted && (\n                                <div className=\"text-center py-6\">\n                                    <Shield className=\"h-8 w-8 mx-auto mb-4 text-gray-400\" />\n                                    <p className=\"text-gray-600\">Consent process will start automatically</p>\n                                </div>\n                            )}\n                        </CardContent>\n                    </Card>\n                );\n\n            case 3:\n                return (\n                    <Card>\n                        <CardHeader>\n                            <CardTitle>Step 4: Complete</CardTitle>\n                            <CardDescription>Onboarding completed successfully</CardDescription>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                            <div className=\"text-center py-6\">\n                                <CheckCircle className=\"h-12 w-12 mx-auto mb-4 text-green-600\" />\n                                <p className=\"text-lg font-medium mb-2\">Onboarding Complete!</p>\n                                <p className=\"text-gray-600\">\n                                    {customerName} has been successfully onboarded and is ready for monitoring.\n                                </p>\n                            </div>\n                            <div className=\"bg-green-50 p-4 rounded-lg\">\n                                <div className=\"text-sm text-green-800\">\n                                    <p className=\"font-medium mb-1\">What happens next:</p>\n                                    <ul className=\"space-y-1 list-disc list-inside\">\n                                        <li>Tenant monitoring will begin shortly</li>\n                                        <li>Security alerts and reports will be available</li>\n                                        <li>Customer will appear in your dashboard</li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </CardContent>\n                    </Card>\n                );\n\n            default:\n                return null;\n        }\n    };\n\n    return (\n        <Dialog open={isOpen} onOpenChange={onClose}>\n            <DialogContent className=\"!w-[90vw] !max-w-[90vw] h-[75vh] max-h-none overflow-y-auto\">\n            <DialogHeader>\n                    <DialogTitle className=\"flex items-center gap-2\">\n                        <Building className=\"h-5 w-5\" />\n                        Tenant Onboarding - {customerName}\n                    </DialogTitle>\n                </DialogHeader>\n\n                {/* Process Overview */}\n                <Card>\n                    <CardHeader>\n                        <CardTitle>Onboarding Process</CardTitle>\n                        <CardDescription>4-step process to onboard your customer</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                            <div className={`text-center p-4 ${currentStep >= 0 ? 'opacity-100' : 'opacity-50'}`}>\n                                <div className={`w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center ${\n                                    currentStep >= 0 ? 'bg-blue-100 dark:bg-blue-900' : 'bg-gray-100'\n                                }`}>\n                                    <Building className={`h-6 w-6 ${currentStep >= 0 ? 'text-blue-600' : 'text-gray-400'}`} />\n                                </div>\n\n                                <h4 className=\"font-semibold mb-2\">1. Method Selection</h4>\n                                <p className=\"text-sm text-muted-foreground\">Choose onboarding method</p>\n                            </div>\n                            <div className={`text-center p-4 ${currentStep >= 1 ? 'opacity-100' : 'opacity-50'}`}>\n                                <div className={`w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center ${\n                                    currentStep >= 1 ? 'bg-green-100 dark:bg-green-900' : 'bg-gray-100'\n                                }`}>\n                                    <CheckCircle className={`h-6 w-6 ${currentStep >= 1 ? 'text-green-600' : 'text-gray-400'}`} />\n                                </div>\n\n                                <h4 className=\"font-semibold mb-2\">2. Validation</h4>\n                                <p className=\"text-sm text-muted-foreground\">Verify information</p>\n                            </div>\n                            <div className={`text-center p-4 ${currentStep >= 2 ? 'opacity-100' : 'opacity-50'}`}>\n                                <div className={`w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center ${\n                                    currentStep >= 2 ? 'bg-purple-100 dark:bg-purple-900' : 'bg-gray-100'\n                                }`}>\n                                    <Lock className={`h-6 w-6 ${currentStep >= 2 ? 'text-purple-600' : 'text-gray-400'}`} />\n                                </div>\n\n                                <h4 className=\"font-semibold mb-2\">3. Admin Consent</h4>\n                                <p className=\"text-sm text-muted-foreground\">Grant permissions</p>\n                            </div>\n                            <div className={`text-center p-4 ${currentStep >= 3 ? 'opacity-100' : 'opacity-50'}`}>\n                                <div className={`w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center ${\n                                    currentStep >= 3 ? 'bg-yellow-100 dark:bg-yellow-900' : 'bg-gray-100'\n                                }`}>\n                                    <Users className={`h-6 w-6 ${currentStep >= 3 ? 'text-yellow-600' : 'text-gray-400'}`} />\n                                </div>\n\n                                <h4 className=\"font-semibold mb-2\">4. Complete</h4>\n                                <p className=\"text-sm text-muted-foreground\">Ready for monitoring</p>\n                            </div>\n                        </div>\n                    </CardContent>\n                </Card>\n\n                {/* Current Step Content */}\n                {renderStepContent()}\n\n                {/* Error Display */}\n                {error && (\n                    <div className=\"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-md\">\n                        <AlertCircle className=\"h-4 w-4\" />\n                        {error}\n                    </div>\n                )}\n\n                {/* Navigation Buttons */}\n                <div className=\"flex gap-3 pt-4\">\n                    {currentStep > 0 && currentStep < 3 && (\n                        <Button variant=\"outline\" onClick={handleBack} disabled={loading}>\n                            Back\n                        </Button>\n                    )}\n\n                    {currentStep < 2 && (\n                        <Button onClick={handleNext} disabled={loading}>\n                            {currentStep === 1 && isGdapMode && selectedTenant?.isOnboarded && !selectedTenant?.isLinked\n                                ? 'Link Customer'\n                                : currentStep === 1\n                                    ? 'Start Consent'\n                                    : 'Next'\n                            }\n                        </Button>\n                    )}\n\n                    {currentStep === 3 && (\n                        <Button onClick={handleComplete} >\n                            Complete Onboarding\n                        </Button>\n                    )}\n\n                    <Button variant=\"outline\" onClick={onClose} disabled={loading}>\n                        {currentStep === 3 ? 'Close' : 'Cancel'}\n                    </Button>\n                </div>\n            </DialogContent>\n        </Dialog>\n    );\n};\n\nexport default TenantOnboardingModal;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3158, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/app/customer/page.tsx"],"sourcesContent":["'use client';\nimport { useState, useEffect } from 'react';\nimport { useMsal } from '@azure/msal-react';\nimport { useTenant } from '@/contexts/TenantContext';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Switch } from '@/components/ui/switch';\nimport { useRouter } from 'next/navigation';\nimport { useCustomer } from '@/contexts/CustomerContext';\nimport { DataTable } from '@/components/DataTable';\n\nimport {\n    Building,\n    Mail,\n    Home,\n    Users,\n    Shield,\n    AlertCircle,\n    CheckCircle,\n    Loader2,\n    Plus,\n    Edit,\n    Trash2,\n    ExternalLink,\n    Lock\n} from 'lucide-react';\nimport {CONSENT_CALLBACK, CUSTOMER_ENDPOINT, ITEMS_PER_PAGE} from '@/lib/constants';\nimport { apiScope } from \"@/lib/msalConfig\";\nimport TenantOnboardingModal from '@/components/onboarding/tenant-onboarding';\n\ninterface TenantUpdateData {\n    isActive: boolean;\n    isPrimary: boolean;\n    isTrial: boolean;\n    licenseType: number;\n}\n\ninterface CustomerTenantLicense {\n    id: string;\n    createdAt: string;\n    expiresAt: string | null;\n    isActive: boolean;\n    isTrial: boolean;\n    licenseType: number;\n    activatedBy: string;\n    isConsentGranted: boolean;\n    consentGrantedAt: string | null;\n    consentGrantedBy: string | null;\n    isOnboarded: boolean;\n    onboardedAt: string | null;\n    consentUrl: string | null;\n}\n\ninterface Tenant {\n    id: string;\n    tenantId: string;\n    displayName: string;\n    domainName: string;\n    isActive: boolean;\n    isPrimary: boolean;\n    isGdap: boolean;\n    isTrial: boolean;\n    lastLogin: string | null;\n    licenseType: number;\n    licenses?: CustomerTenantLicense[];\n}\n\ninterface License {\n    id: string; // Add this property\n    licenseType: number;\n    isActive: boolean;\n    isTrial: boolean;\n    maxTenants: number;\n    expiryDate: string | null;\n}\n\n\nexport default function CustomerPage() {\n    const { accounts, instance } = useMsal();\n    const { setSelectedTenant, selectedTenant } = useTenant();\n    const [currentPage, setCurrentPage] = useState(1);\n    const [itemsPerPage, setItemsPerPage] = useState(ITEMS_PER_PAGE);\n    const [scrollPosition, setScrollPosition] = useState(0);\n\n    const router = useRouter();\n    const { customerData, customerLoading: loading, customerError: error, refetchCustomerData } = useCustomer();\n\n    const [updatingTenants, setUpdatingTenants] = useState<Set<string>>(new Set());\n    const [showOnboardingModal, setShowOnboardingModal] = useState(false);\n    const [updateError, setUpdateError] = useState<string | null>(null);\n    const [showClickOverlay, setShowClickOverlay] = useState(false);\n    const [selectedTenantId, setSelectedTenantId] = useState<string | null>(null);\n    const { isActiveCustomer, customerLoading } = useCustomer();\n\n    const currentTenantId = accounts[0]?.tenantId;\n\n    useEffect(() => {\n        const handleScroll = () => {\n            const position = window.pageYOffset || document.documentElement.scrollTop;\n            setScrollPosition(position);\n            sessionStorage.setItem('customerPageScrollPosition', position.toString());\n        };\n\n        window.addEventListener('scroll', handleScroll);\n        return () => {\n            window.removeEventListener('scroll', handleScroll);\n            // Save final position when component unmounts\n            sessionStorage.setItem('customerPageScrollPosition', scrollPosition.toString());\n        };\n    }, [scrollPosition]);\n\n    useEffect(() => {\n        if (!loading && customerData) {\n            const savedPosition = sessionStorage.getItem('customerPageScrollPosition');\n            if (savedPosition) {\n                // Use setTimeout to ensure DOM is fully rendered\n                setTimeout(() => {\n                    window.scrollTo({\n                        top: parseInt(savedPosition),\n                        behavior: 'smooth'\n                    });\n                }, 100);\n            }\n        }\n    }, [loading, customerData]);\n    useEffect(() => {\n        return () => {\n            sessionStorage.removeItem('customerPageScrollPosition');\n        };\n    }, []);\n\n    const [licenseManagement, setLicenseManagement] = useState<{\n        isOpen: boolean;\n        tenant: Tenant | null;\n    } | null>(null);\n\n    const [updatingLicense, setUpdatingLicense] = useState<Set<string>>(new Set());\n    const [licenseError, setLicenseError] = useState<string | null>(null);\n\n    const updateTenantLicense = async (tenantId: string, licenseId: string, licenseData: {\n        isActive: boolean;\n        isPrimary: boolean;\n        isTrial: boolean;\n        licenseType: number;\n    }) => {\n        try {\n            setUpdatingLicense(prev => new Set(prev).add(`${tenantId}-${licenseId}`));\n            setLicenseError(null);\n\n            const response = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            const apiResponse = await fetch(`${CUSTOMER_ENDPOINT}/tenants/${tenantId}/license/${licenseId}`, {\n                method: 'PATCH',\n                headers: {\n                    'Authorization': `Bearer ${response.accessToken}`,\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    IsActive: licenseData.isActive,\n                    IsPrimary: licenseData.isPrimary,\n                    IsTrial: licenseData.isTrial,\n                    LicenseType: licenseData.licenseType\n                }),\n            });\n\n            if (!apiResponse.ok) {\n                throw new Error(`Failed to update license: ${apiResponse.statusText}`);\n            }\n\n            // Parse the API response to get updated license data\n            const responseData = await apiResponse.json();\n            console.log('License update response:', responseData);\n\n            // Force a complete data refresh\n            await refetchCustomerData();\n\n            // Update the local license management state with fresh data\n            if (licenseManagement?.tenant) {\n                // Find the updated tenant in the fresh data\n                const updatedCustomerData = await refetchCustomerData();\n                // This will automatically update the UI with the fresh data\n            }\n\n        } catch (err) {\n            console.error('Failed to update tenant license:', err);\n            setLicenseError(err instanceof Error ? err.message : 'Failed to update license');\n        } finally {\n            setUpdatingLicense(prev => {\n                const newSet = new Set(prev);\n                newSet.delete(`${tenantId}-${licenseId}`);\n                return newSet;\n            });\n        }\n    };\n\n    useEffect(() => {\n        if (editTenant && customerData && editTenant.tenant) {\n            const updatedTenant = customerData.tenants.find(\n                (t: Tenant) => t.tenantId === editTenant.tenant!.tenantId\n            );\n\n            if (updatedTenant) {\n                setEditTenant({\n                    ...editTenant,\n                    tenant: updatedTenant\n                });\n            }\n        }\n    }, [customerData]);\n\n\n    const getLicenseTypeName = (licenseType: number): string => {\n        switch (licenseType) {\n            case 0:\n                return 'Assistant';\n            case 1:\n                return 'Assignments Manager';\n            default:\n                return 'Unknown';\n        }\n    };\n\n    const getLicenseTypeVariant = (licenseType: number): \"default\" | \"secondary\" | \"destructive\" | \"outline\" => {\n        switch (licenseType) {\n            case 0:\n                return 'outline';\n            case 1:\n                return 'secondary';\n            case 2:\n                return 'default';\n            default:\n                return 'destructive';\n        }\n    };\n\n    // Add this state for the add license dialog\n    const [addLicenseDialog, setAddLicenseDialog] = useState<{\n        isOpen: boolean;\n        tenantId: string;\n        tenantName: string;\n    } | null>(null);\n\n    const [newLicenseData, setNewLicenseData] = useState({\n        licenseType: 0,\n        isEnabled: true,\n        isTrial: false\n    });\n\n\n    const hasOnlyCommunityLicense = (): boolean => {\n        if (!customerData?.licenses || customerData.licenses.length === 0) {\n            return false;\n        }\n\n        return customerData.licenses.every(license => license.licenseType === 0);\n    };\n\n    const columns = [\n        {\n            key: \"displayName\",\n            label: \"Display Name\",\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const tenant = row as unknown as Tenant;\n                return (\n                    <div className=\"flex items-center gap-2 text-sm font-medium truncate w-full text-left\">\n                <span className=\"font-medium truncate transition-colors duration-200\">\n                    {tenant.displayName}\n                </span>\n                    </div>\n                );\n            },\n        },\n        {\n            key: \"tenantId\",\n            label: \"Tenant ID\",\n            render: (value: unknown) => (\n                <code className=\"text-sm font-medium cursor-pointer truncate block w-full text-left\">\n                    {value as string}\n                </code>\n            ),\n        },\n        {\n            key: \"isActive\",\n            label: \"Status\",\n            render: (value: unknown) => {\n                const isActive = value as boolean;\n                return (\n                    <Badge variant={isActive ? \"default\" : \"secondary\"}>\n                        {isActive ? 'Active' : 'Inactive'}\n                    </Badge>\n                );\n            },\n        },\n        {\n            key: \"isPrimary\",\n            label: \"Type\",\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const tenant = row as unknown as Tenant;\n                return (\n                    <div className=\"flex gap-1\">\n                        {tenant.isPrimary && (\n                            <Badge variant=\"default\" className=\"text-xs\">Primary</Badge>\n                        )}\n                        {tenant.isTrial && (\n                            <Badge variant=\"outline\" className=\"text-xs\">Trial</Badge>\n                        )}\n                        {!tenant.isPrimary && !tenant.isTrial && (\n                            <Badge variant=\"secondary\" className=\"text-xs\">Standard</Badge>\n                        )}\n                    </div>\n                );\n            },\n        },\n        {\n            key: \"isGdap\",\n            label: \"GDAP\",\n            render: (value: unknown) => {\n                const isGdap = value as boolean;\n                return (\n                    <Badge variant={isGdap ? \"default\" : \"outline\"}>\n                        {isGdap ? 'Enabled' : 'Disabled'}\n                    </Badge>\n                );\n            },\n        },\n        {\n            key: \"domainName\",\n            label: \"Domain\",\n            render: (value: unknown) => (\n                <code className=\"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded font-medium\">\n                    {value as string}\n                </code>\n            ),\n        },\n        // Only include license type column if customer is active\n        ...(isActiveCustomer && !hasOnlyCommunityLicense() ? [{\n            key: \"licenseType\",\n            label: \"License Status\",\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const tenant = row as unknown as Tenant;\n                const licenseType = value as number;\n\n                // Check if any license needs consent\n                const hasLicenseNeedingConsent = tenant.licenses?.some(\n                    license => !license.isConsentGranted && license.consentUrl\n                );\n\n                const licenseCount = tenant.licenses?.length || 0;\n\n                return (\n                    <div className=\"flex items-center gap-2\">\n                        {hasLicenseNeedingConsent ? (\n                            <div\n                                className=\"relative cursor-help transition-colors duration-200\"\n                                title=\"One or more licenses require consent, use action button to manage licenses\"\n                            >\n                                <AlertCircle className=\"h-4 w-4 text-orange-500 flex-shrink-0 group-hover:text-orange-600\" />\n                            </div>\n                        ) : (\n                            <div\n                                className=\"relative cursor-help transition-colors duration-200\"\n                                title=\"All licenses are properly configured\"\n                            >\n                                <CheckCircle className=\"h-4 w-4 text-green-500 flex-shrink-0 group-hover:text-green-600\" />\n                            </div>\n                        )}\n                            <span className=\"text-xs text-gray-500 dark:text-gray-400 font-mono bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded-full\">\n                            license count: {licenseCount}\n                </span>\n                    </div>\n                );\n            },\n        }] : []),\n\n        {\n            key: \"actions\",\n            label: \"Actions\",\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const tenant = row as unknown as Tenant;\n                const isUpdating = updatingTenants.has(tenant.tenantId);\n\n                return (\n                    <div className=\"flex items-center gap-1\">\n                        <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={(e) => {\n                                e.stopPropagation();\n                                setEditTenant({\n                                    isOpen: true,\n                                    tenant: tenant\n                                });\n                            }}\n                            disabled={isUpdating}\n                            className=\"h-8 w-8 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-50 dark:hover:bg-blue-950\"\n                        >\n                            <Edit className=\"h-3 w-3\" />\n                        </Button>\n                    </div>\n                );\n            },\n        },\n    ];\n\n// Add this helper function to calculate max tenants from all active licenses\n    const getMaxAllowedTenants = (): number => {\n        if (!customerData?.licenses || customerData.licenses.length === 0) {\n            return 0;\n        }\n\n        return customerData.licenses\n            .filter(license => license.isActive)\n            .reduce((total, license) => total + license.maxTenants, 0);\n    };\n\n// Add this helper to check if tenant limit is reached\n    const isTenantLimitReached = (): boolean => {\n        const maxTenants = getMaxAllowedTenants();\n        const currentTenantCount = customerData?.tenants?.length || 0;\n        return maxTenants > 0 && currentTenantCount >= maxTenants;\n    };\n\n    const [deletingTenants, setDeletingTenants] = useState<Set<string>>(new Set());\n    const [deleteError, setDeleteError] = useState<string | null>(null);\n    const deleteTenant = async (tenantId: string) => {\n        try {\n            // Save current scroll position before delete\n            const currentScroll = window.pageYOffset || document.documentElement.scrollTop;\n            sessionStorage.setItem('customerPageScrollPosition', currentScroll.toString());\n\n            setDeletingTenants(prev => new Set(prev).add(tenantId));\n            setDeleteError(null);\n\n            const response = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            const apiResponse = await fetch(`${CUSTOMER_ENDPOINT}/tenants/${tenantId}`, {\n                method: 'DELETE',\n                headers: {\n                    'Authorization': `Bearer ${response.accessToken}`,\n                },\n            });\n\n            if (!apiResponse.ok) {\n                throw new Error(`Failed to delete tenant: ${apiResponse.statusText}`);\n            }\n\n            // Refresh customer data after successful deletion\n            await refetchCustomerData();\n\n            // Restore scroll position after data refresh\n            setTimeout(() => {\n                const savedPosition = sessionStorage.getItem('customerPageScrollPosition');\n                if (savedPosition) {\n                    window.scrollTo({\n                        top: parseInt(savedPosition),\n                        behavior: 'smooth'\n                    });\n                }\n            }, 100);\n\n        } catch (err) {\n            console.error('Failed to delete tenant:', err);\n            setDeleteError(err instanceof Error ? err.message : 'Failed to delete tenant');\n        } finally {\n            setDeletingTenants(prev => {\n                const newSet = new Set(prev);\n                newSet.delete(tenantId);\n                return newSet;\n            });\n        }\n    };\n    const [deleteConfirmation, setDeleteConfirmation] = useState<{\n        isOpen: boolean;\n        tenantId: string;\n        tenantName: string;\n    } | null>(null);\n\n    const [editTenant, setEditTenant] = useState<{\n        isOpen: boolean;\n        tenant: Tenant | null;\n    } | null>(null);\n\n    const [editingTenant, setEditingTenant] = useState(false);\n    const [editError, setEditError] = useState<string | null>(null);\n\n    const updateTenantSettings = async (tenantId: string, settings: {\n        displayName: string;\n        isActive: boolean;\n        isPrimary: boolean;\n        isTrial: boolean;\n        licenseType: number;\n    }) => {\n        try {\n            setEditingTenant(true);\n            setEditError(null);\n\n            const response = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            const apiResponse = await fetch(`${CUSTOMER_ENDPOINT}/tenants/${tenantId}/settings`, {\n                method: 'PATCH',\n                headers: {\n                    'Authorization': `Bearer ${response.accessToken}`,\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    displayName: settings.displayName,\n                    isActive: settings.isActive,\n                    isPrimary: settings.isPrimary,\n                    isTrial: settings.isTrial,\n                    licenseType: settings.licenseType\n                }),\n            });\n\n\n            if (!apiResponse.ok) {\n                throw new Error(`Failed to update tenant settings: ${apiResponse.statusText}`);\n            }\n\n            await refetchCustomerData();\n            setEditTenant(null);\n\n        } catch (err) {\n            console.error('Failed to update tenant settings:', err);\n            setEditError(err instanceof Error ? err.message : 'Failed to update tenant settings');\n        } finally {\n            setEditingTenant(false);\n        }\n    };\n\n    const deleteTenantLicense = async (tenantId: string, licenseId: string) => {\n        try {\n            setUpdatingLicense(prev => new Set(prev).add(`${tenantId}-${licenseId}`));\n            setLicenseError(null);\n\n            const response = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            const apiResponse = await fetch(`${CUSTOMER_ENDPOINT}/tenants/${tenantId}/license/${licenseId}`, {\n                method: 'DELETE',\n                headers: {\n                    'Authorization': `Bearer ${response.accessToken}`,\n                },\n            });\n\n            if (!apiResponse.ok) {\n                throw new Error(`Failed to delete license: ${apiResponse.statusText}`);\n            }\n\n            await refetchCustomerData();\n\n        } catch (err) {\n            console.error('Failed to delete tenant license:', err);\n            setLicenseError(err instanceof Error ? err.message : 'Failed to delete license');\n        } finally {\n            setUpdatingLicense(prev => {\n                const newSet = new Set(prev);\n                newSet.delete(`${tenantId}-${licenseId}`);\n                return newSet;\n            });\n        }\n    };\n\n    // Add new state for license onboarding wizard\n    const [licenseOnboardingWizard, setLicenseOnboardingWizard] = useState<{\n        isOpen: boolean;\n        tenantId: string;\n        tenantName: string;\n        licenseType: number;\n        currentStep: number;\n        consentWindow: Window | null;\n        consentCompleted: boolean;\n        loading: boolean;\n        error: string | null;\n        consentState?: string | null;\n    } | null>(null);\n\n// Replace the existing add license dialog with this new wizard\n    const openLicenseOnboardingWizard = (tenantId: string, tenantName: string) => {\n        setLicenseOnboardingWizard({\n            isOpen: true,\n            tenantId,\n            tenantName,\n            licenseType: 0,\n            currentStep: 0, // 0: Select license, 1: Consent, 2: Complete\n            consentWindow: null,\n            consentCompleted: false,\n            loading: false,\n            error: null\n        });\n    };\n\n// Handle consent window messages for license wizard\n    useEffect(() => {\n        const handleLicenseConsentMessage = (event: MessageEvent) => {\n            if (event.origin !== window.location.origin || !licenseOnboardingWizard?.consentWindow) {\n                return;\n            }\n\n            if (event.data.type === 'CONSENT_SUCCESS') {\n                console.log('License consent success received');\n                setLicenseOnboardingWizard(prev => prev ? {\n                    ...prev,\n                    consentCompleted: true,\n                    loading: false\n                } : null);\n\n                if (licenseOnboardingWizard.consentWindow) {\n                    licenseOnboardingWizard.consentWindow.close();\n                    setLicenseOnboardingWizard(prev => prev ? {\n                        ...prev,\n                        consentWindow: null\n                    } : null);\n                }\n\n                // Complete the license creation process\n                completeLicenseCreation();\n\n            } else if (event.data.type === 'CONSENT_ERROR') {\n                console.log('License consent error received:', event.data);\n                setLicenseOnboardingWizard(prev => prev ? {\n                    ...prev,\n                    error: `Consent failed: ${event.data.errorDescription || event.data.error || 'Unknown error'}`,\n                    loading: false\n                } : null);\n\n                if (licenseOnboardingWizard.consentWindow) {\n                    licenseOnboardingWizard.consentWindow.close();\n                    setLicenseOnboardingWizard(prev => prev ? {\n                        ...prev,\n                        consentWindow: null\n                    } : null);\n                }\n            }\n        };\n\n        window.addEventListener('message', handleLicenseConsentMessage);\n        return () => window.removeEventListener('message', handleLicenseConsentMessage);\n    }, [licenseOnboardingWizard]);\n\n    const extractStateFromConsentUrl = (url: string): string | null => {\n        try {\n            const urlObj = new URL(url);\n            return urlObj.searchParams.get('state');\n        } catch (error) {\n            console.error('Failed to parse consent URL:', error);\n            return null;\n        }\n    };\n    const initiateLicenseConsent = async () => {\n        if (!licenseOnboardingWizard) return;\n\n        try {\n            setLicenseOnboardingWizard(prev => prev ? {\n                ...prev,\n                loading: true,\n                error: null\n            } : null);\n\n            const tokenResponse = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            // First create the license\n            const createLicenseResponse = await fetch(`${CUSTOMER_ENDPOINT}/tenants/${licenseOnboardingWizard.tenantId}/license`, {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${tokenResponse.accessToken}`,\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    isEnabled: true,\n                    LicenseType: licenseOnboardingWizard.licenseType\n                }),\n            });\n\n            if (!createLicenseResponse.ok) {\n                const errorData = await createLicenseResponse.json().catch(() => null);\n                throw new Error(errorData?.message || `Failed to create license: ${createLicenseResponse.statusText}`);\n            }\n\n            const licenseResult = await createLicenseResponse.json();\n\n            // Get consent URL from the license creation response\n            const consentUrl = licenseResult.data?.consentUrl || licenseResult.consentUrl;\n\n            if (!consentUrl) {\n                throw new Error('No consent URL received from license creation');\n            }\n\n            const extractedState = extractStateFromConsentUrl(consentUrl);\n            setLicenseOnboardingWizard(prev => prev ? {\n                ...prev,\n                consentState: extractedState\n            } : null);\n\n\n            // Open consent window with the URL from license creation\n            const popup = window.open(\n                consentUrl,\n                'licenseConsentWindow',\n                'width=600,height=700,scrollbars=yes,resizable=yes,status=yes,location=yes,toolbar=no,menubar=no'\n            );\n\n            if (popup) {\n                setLicenseOnboardingWizard(prev => prev ? {\n                    ...prev,\n                    consentWindow: popup,\n                    currentStep: 1\n                } : null);\n                popup.focus();\n            } else {\n                throw new Error('Failed to open consent window. Please check your popup blocker settings.');\n            }\n\n        } catch (err) {\n            console.error('Error initiating license consent:', err);\n            setLicenseOnboardingWizard(prev => prev ? {\n                ...prev,\n                error: err instanceof Error ? err.message : 'Failed to initiate consent',\n                loading: false\n            } : null);\n        }\n    };\n\n\n// Complete license creation after consent\n    const completeLicenseCreation = async () => {\n        if (!licenseOnboardingWizard) return;\n\n        try {\n            setLicenseOnboardingWizard(prev => prev ? {\n                ...prev,\n                loading: true,\n                error: null\n            } : null);\n\n            const tokenResponse = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            // Use the consent state in the callback URL\n\n            const response = await fetch(`${CONSENT_CALLBACK}?state=${licenseOnboardingWizard.consentState}`, {\n                method: 'GET',\n                headers: {\n                    'Authorization': `Bearer ${tokenResponse.accessToken}`,\n                    'Content-Type': 'application/json',\n                }\n            });\n\n            if (!response.ok) {\n                const errorData = await response.json().catch(() => null);\n                throw new Error(errorData?.message || `Failed to complete consent callback: ${response.statusText}`);\n            }\n\n            await refetchCustomerData();\n\n            setLicenseOnboardingWizard(prev => prev ? {\n                ...prev,\n                currentStep: 2,\n                loading: false\n            } : null);\n\n        } catch (err) {\n            console.error('Failed to complete license creation:', err);\n            setLicenseOnboardingWizard(prev => prev ? {\n                ...prev,\n                error: err instanceof Error ? err.message : 'Failed to complete license creation',\n                loading: false\n            } : null);\n        }\n    };\n\n\n// Wizard navigation\n    const handleLicenseWizardNext = () => {\n        if (!licenseOnboardingWizard) return;\n\n        if (licenseOnboardingWizard.currentStep === 0) {\n            // Start consent process\n            initiateLicenseConsent();\n        }\n    };\n\n\n    const assignNewLicense = async (tenantId: string, licenseType: number, licenseData: {\n        isActive: boolean;\n        isPrimary: boolean;\n        isTrial: boolean;\n        licenseType: number;\n    }) => {\n        try {\n            setUpdatingLicense(prev => new Set(prev).add(`${tenantId}-assign-${licenseType}`));\n            setLicenseError(null);\n\n            const response = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            const apiResponse = await fetch(`${CUSTOMER_ENDPOINT}/tenants/${tenantId}/license`, {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${response.accessToken}`,\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    isActive: licenseData.isActive,\n                    IsPrimary: licenseData.isPrimary,\n                    IsTrial: licenseData.isTrial,\n                    LicenseType: licenseData.licenseType\n                }),\n            });\n\n            if (!apiResponse.ok) {\n                throw new Error(`Failed to assign license: ${apiResponse.statusText}`);\n            }\n\n            await refetchCustomerData();\n            setLicenseManagement(null);\n\n        } catch (err) {\n            console.error('Failed to assign license:', err);\n            setLicenseError(err instanceof Error ? err.message : 'Failed to assign license');\n        } finally {\n            setUpdatingLicense(prev => {\n                const newSet = new Set(prev);\n                newSet.delete(`${tenantId}-assign-${licenseType}`);\n                return newSet;\n            });\n        }\n    };\n\n\n    const getCustomerLicenseTypeName = (licenseType: number): string => {\n        switch (licenseType) {\n            case 0:\n                return 'Community';\n            case 1:\n                return 'Standard';\n            case 2:\n                return 'Enterprise';\n            default:\n                return 'Unknown';\n        }\n    };\n\n    const getCustomerLicenseVariant = (licenseType: number): \"default\" | \"secondary\" | \"destructive\" | \"outline\" => {\n        switch (licenseType) {\n            case 0:\n                return 'outline';\n            case 1:\n                return 'secondary';\n            case 2:\n                return 'default';\n            default:\n                return 'destructive';\n        }\n    };\n    const createNewLicense = async (tenantId: string, licenseData: {\n        isEnabled: boolean;\n        LicenseType: number;\n    }) => {\n        try {\n            setUpdatingLicense(prev => new Set(prev).add(`${tenantId}-new`));\n            setLicenseError(null);\n\n            const response = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            const apiResponse = await fetch(`${CUSTOMER_ENDPOINT}/tenants/${tenantId}/license`, {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${response.accessToken}`,\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    isEnabled: licenseData.isEnabled,\n                    LicenseType: licenseData.LicenseType\n                }),\n            });\n\n            if (!apiResponse.ok) {\n                throw new Error(`Failed to create license: ${apiResponse.statusText}`);\n            }\n\n            const responseData = await apiResponse.json();\n            console.log('License creation response:', responseData);\n\n            await refetchCustomerData();\n            setAddLicenseDialog(null);\n\n        } catch (err) {\n            console.error('Failed to create license:', err);\n            setLicenseError(err instanceof Error ? err.message : 'Failed to create license');\n        } finally {\n            setUpdatingLicense(prev => {\n                const newSet = new Set(prev);\n                newSet.delete(`${tenantId}-new`);\n                return newSet;\n            });\n        }\n    };\n\n\n\n\n    const handleTenantSelect = (tenant: Tenant) => {\n        setShowClickOverlay(true);\n        setSelectedTenant(tenant);\n        setSelectedTenantId(tenant.id);\n        setTimeout(() => {\n            setShowClickOverlay(false);\n        }, 200);\n    };\n\n    const handleTenantOnboardingSuccess = async () => {\n        setShowOnboardingModal(false);\n        await refetchCustomerData();\n    };\n\n    if (loading) {\n        return (\n            <div className=\"p-6 max-w-6xl mx-auto\">\n                <div className=\"flex items-center justify-center h-64\">\n                    <Loader2 className=\"h-8 w-8 animate-spin\" />\n                    <span className=\"ml-2\">Loading customer information...</span>\n                </div>\n            </div>\n        );\n    }\n\n    if (error) {\n        return (\n            <div className=\"p-6 max-w-6xl mx-auto\">\n                <Card className=\"border-red-200\">\n                    <CardContent className=\"p-6\">\n                        <div className=\"flex items-center gap-2 text-red-600\">\n                            <AlertCircle className=\"h-5 w-5\" />\n                            <span>Error: {error}</span>\n                        </div>\n                        <Button onClick={refetchCustomerData} className=\"mt-4\">\n                            Retry\n                        </Button>\n                    </CardContent>\n                </Card>\n            </div>\n        );\n    }\n\n    if (!customerData) {\n        return (\n            <div className=\"p-6 max-w-6xl mx-auto\">\n                <Card>\n                    <CardContent className=\"p-6 text-center\">\n                        <p>No customer data available</p>\n                        <Button onClick={() => router.back()} className=\"mt-4\">\n                            Go Back\n                        </Button>\n                    </CardContent>\n                </Card>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"p-6 w-full max-w-none mx-auto px-8\">\n            <div className=\"mb-6\">\n                <Button\n                    variant=\"outline\"\n                    onClick={() => router.back()}\n                    className=\"mb-4\"\n                >\n                     Back\n                </Button>\n                <h1 className=\"text-3xl font-bold text-gray-900 dark:text-gray-100\">Customer Information</h1>\n                <p className=\"text-gray-600 dark:text-gray-300 mt-2\">Manage customer details and tenant access</p>\n            </div>\n\n\n            {/* Show update error if any */}\n            {updateError && (\n                <Card className=\"border-red-200 mb-6\">\n                    <CardContent className=\"p-4\">\n                        <div className=\"flex items-center gap-2 text-red-600\">\n                            <AlertCircle className=\"h-4 w-4\" />\n                            <span className=\"text-sm\">{updateError}</span>\n                        </div>\n                    </CardContent>\n                </Card>\n            )}\n            {/* Show delete error if any */}\n            {deleteError && (\n                <Card className=\"border-red-200 mb-6\">\n                    <CardContent className=\"p-4\">\n                        <div className=\"flex items-center gap-2 text-red-600\">\n                            <AlertCircle className=\"h-4 w-4\" />\n                            <span className=\"text-sm\">{deleteError}</span>\n                        </div>\n                    </CardContent>\n                </Card>\n            )}\n\n            <div className=\"flex flex-col xl:flex-row gap-6 mb-6\">\n                {/* Customer Basic Information */}\n                <div className=\"xl:w-1/2\">\n                    <Card>\n                        <CardHeader>\n                            <CardTitle className=\"flex items-center gap-2\">\n                                <Building className=\"h-5 w-5\" />\n                                Customer Details\n                            </CardTitle>\n                        </CardHeader>\n                        <CardContent className=\"space-y-6\">\n                            {/* Basic Information */}\n                            <div className=\"space-y-3\">\n                                <div className=\"flex items-center gap-3\">\n                                    <Building className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />\n                                    <div>\n                                        <p className=\"text-sm font-medium\">Customer Name</p>\n                                        <p className=\"text-sm text-gray-600 dark:text-gray-300\">{customerData.name}</p>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex items-center gap-3\">\n                                    <Home className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />\n                                    <div>\n                                        <p className=\"text-sm font-medium\">Address</p>\n                                        <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                                            {customerData.address || 'Not provided'}\n                                        </p>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex items-center gap-3\">\n                                    <Mail className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />\n                                    <div>\n                                        <p className=\"text-sm font-medium\">Primary Contact</p>\n                                        <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                                            {customerData.primaryContactEmail || 'Not provided'}\n                                        </p>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex items-center gap-3\">\n                                    <Shield className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />\n                                    <div>\n                                        <p className=\"text-sm font-medium\">Account Type</p>\n                                        <div className=\"flex gap-2 mt-1\">\n                                            <Badge variant={customerData.isMsp ? \"default\" : \"secondary\"}>\n                                                {customerData.isMsp ? 'MSP' : 'Direct'}\n                                            </Badge>\n                                            <Badge variant={customerData.isActive ? \"default\" : \"outline\"}>\n                                                {customerData.isActive ? 'Active' : 'Community'}\n                                            </Badge>\n                                            <Badge variant={customerData.isGdap ? \"default\" : \"secondary\"}>\n                                                {customerData.isGdap ? 'GDAP' : 'No GDAP'}\n                                            </Badge>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex items-center gap-3\">\n                                    <Users className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />\n                                    <div>\n                                        <p className=\"text-sm font-medium\">Home Tenant ID</p>\n                                        <code className=\"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded\">\n                                            {customerData.homeTenantId}\n                                        </code>\n                                    </div>\n                                </div>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </div>\n\n                {/* Right side - License Info and Summary */}\n                <div className=\"xl:w-1/2 flex flex-col gap-6\">\n                    {/* License Information */}\n                    {customerData.licenses && customerData.licenses.length > 0 && !hasOnlyCommunityLicense() && (\n                        <Card>\n                            <CardHeader>\n                                <CardTitle className=\"flex items-center gap-2\">\n                                    <Shield className=\"h-5 w-5\" />\n                                    License Information\n                                </CardTitle>\n                            </CardHeader>\n                            <CardContent>\n                                {/* Tenant Limit Warning */}\n                                {isTenantLimitReached() && (\n                                    <div className=\"mb-4 p-3 border border-amber-200 bg-amber-50 dark:bg-amber-950 dark:border-amber-800 rounded-lg\">\n                                        <div className=\"flex items-center gap-2 text-amber-700 dark:text-amber-300\">\n                                            <AlertCircle className=\"h-4 w-4\" />\n                                            <span className=\"text-sm font-medium\">\n                                                Maximum tenant limit reached ({customerData.tenants.length}/{getMaxAllowedTenants()} tenants)\n                                            </span>\n                                        </div>\n                                        <p className=\"text-xs text-amber-600 dark:text-amber-400 mt-1 ml-6\">\n                                            Contact support to increase your tenant limit or upgrade your license.\n                                        </p>\n                                    </div>\n                                )}\n\n                                <div className=\"space-y-2\">\n                                    {customerData.licenses.map((license, index) => (\n                                        <div key={index} className=\"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg border\">\n                                            <div className=\"flex items-center justify-between mb-3\">\n                                                <Badge variant={getCustomerLicenseVariant(license.licenseType)} className=\"text-xs\">\n                                                    {getCustomerLicenseTypeName(license.licenseType)}\n                                                </Badge>\n                                                <div className=\"flex items-center gap-1\">\n                                                    <Badge variant={license.isActive ? \"default\" : \"secondary\"} className=\"text-xs\">\n                                                        {license.isActive ? 'Active' : 'Inactive'}\n                                                    </Badge>\n                                                    {license.isTrial && (\n                                                        <Badge variant=\"outline\" className=\"text-xs\">Trial</Badge>\n                                                    )}\n                                                </div>\n                                            </div>\n                                            <div className=\"flex items-center justify-between text-xs\">\n                                                <div className=\"flex items-center gap-1\">\n                                                    <span className=\"text-gray-500 dark:text-gray-400\">Max Tenants:</span>\n                                                    <span className=\"font-medium\">{license.maxTenants}</span>\n                                                </div>\n                                                <div className=\"flex items-center gap-1\">\n                                                    <span className=\"text-gray-500 dark:text-gray-400\">Expires:</span>\n                                                    <span className=\"font-medium\">\n                                                        {license.expiryDate\n                                                            ? new Date(license.expiryDate).toLocaleDateString()\n                                                            : 'Never'\n                                                        }\n                                                    </span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                            </CardContent>\n                        </Card>\n                    )}\n\n                    {/* Summary Stats */}\n                    <Card>\n                        <CardHeader>\n                            <CardTitle>Summary</CardTitle>\n                        </CardHeader>\n                        <CardContent>\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div className=\"text-center p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800\">\n                                    <div className=\"text-2xl font-bold text-blue-700 dark:text-blue-300\">\n                                        {customerData.tenants.length}\n                                    </div>\n                                    <div className=\"text-sm font-medium text-blue-800 dark:text-blue-200\">Total Tenants</div>\n                                </div>\n                                <div className=\"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg border border-green-200 dark:border-green-800\">\n                                    <div className=\"text-2xl font-bold text-green-700 dark:text-green-300\">\n                                        {customerData.tenants.filter((t: Tenant) => t.isActive).length}\n                                    </div>\n                                    <div className=\"text-sm font-medium text-green-800 dark:text-green-200\">Enabled Tenants</div>\n                                </div>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </div>\n            </div>\n\n            {/* Tenants Table */}\n            <Card>\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                    <CardTitle className=\"flex items-center gap-2\">\n                        <Users className=\"h-5 w-5\" />\n                        Tenant Management\n                    </CardTitle>\n                    {customerData.isMsp && customerData.isActive && (\n                        <div className=\"flex items-center gap-2\">\n                            <Button\n                                onClick={() => setShowOnboardingModal(true)}\n                                disabled={isTenantLimitReached()}\n                                className=\"flex items-center gap-2\"\n                            >\n                                <Plus className=\"h-4 w-4\" />\n                                Add Tenant\n                            </Button>\n                            {isTenantLimitReached() && (\n                                <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n                ({customerData.tenants.length}/{getMaxAllowedTenants()} tenants)\n            </span>\n                            )}\n                        </div>\n                    )}\n\n                </CardHeader>\n                <CardContent className=\"relative\">\n                    {showClickOverlay && (\n                        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-blue-200 to-transparent opacity-60 animate-shimmer\" />\n                    )}\n\n                    <DataTable\n                        data={customerData.tenants.map(tenant => tenant as unknown as Record<string, unknown>)}\n                        columns={columns}\n                        className=\"text-sm\"\n                        currentPage={currentPage}\n                        totalPages={Math.ceil(customerData.tenants.length / itemsPerPage)}\n                        itemsPerPage={itemsPerPage}\n                        onPageChange={setCurrentPage}\n                        onItemsPerPageChange={(newItemsPerPage) => {\n                            setItemsPerPage(newItemsPerPage);\n                            setCurrentPage(1);\n                        }}\n                        onRowClick={(row) => {\n                            const tenant = row as unknown as Tenant;\n                            handleTenantSelect(tenant);\n                        }}\n                        selectedRows={selectedTenantId ? [selectedTenantId] : []} // Pass selected tenant ID\n                        showPagination={true}\n                    />\n                </CardContent>\n            </Card>\n\n            {/* Delete Confirmation Dialog */}\n            {deleteConfirmation && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n                    <Card className=\"w-full max-w-md mx-4\">\n                        <CardHeader>\n                            <CardTitle className=\"flex items-center gap-2 text-red-600\">\n                                <AlertCircle className=\"h-5 w-5\" />\n                                Confirm Delete\n                            </CardTitle>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                            <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                                Are you sure you want to delete <span className=\"font-semibold\">&quot;{deleteConfirmation.tenantName}&quot;</span>?\n                            </p>\n                            <p className=\"text-xs text-red-600 dark:text-red-400\">\n                                This action cannot be undone and will permanently remove the tenant from the system.\n                            </p>\n                            <div className=\"flex justify-end gap-2 pt-2\">\n                                <Button\n                                    variant=\"outline\"\n                                    size=\"sm\"\n                                    onClick={() => setDeleteConfirmation(null)}\n                                >\n                                    Cancel\n                                </Button>\n                                <Button\n                                    variant=\"destructive\"\n                                    size=\"sm\"\n                                    onClick={() => {\n                                        if (deleteConfirmation) {\n                                            deleteTenant(deleteConfirmation.tenantId);\n                                            setDeleteConfirmation(null);\n                                        }\n                                    }}\n                                    className=\"bg-red-600 hover:bg-red-700\"\n                                >\n                                    Delete Tenant\n                                </Button>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </div>\n            )}\n\n            {editTenant && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n                    <Card className=\"w-full max-w-6xl mx-4 max-h-[90vh] overflow-y-auto\">\n                        <CardHeader>\n                            <CardTitle className=\"flex items-center gap-2\">\n                                <Edit className=\"h-5 w-5\" />\n                                Tenant Management - {editTenant.tenant?.displayName}\n                            </CardTitle>\n                            <p className=\"text-sm text-gray-500\">\n                                Manage tenant settings, licenses, and permissions in one place.\n                            </p>\n                        </CardHeader>\n                        <CardContent className=\"space-y-6\">\n                            {(editError || licenseError) && (\n                                <div className=\"p-3 border border-red-200 bg-red-50 dark:bg-red-950 dark:border-red-800 rounded-lg\">\n                                    <div className=\"flex items-center gap-2 text-red-600\">\n                                        <AlertCircle className=\"h-4 w-4\" />\n                                        <span className=\"text-sm\">{editError || licenseError}</span>\n                                    </div>\n                                </div>\n                            )}\n\n                            {/* Two Column Layout */}\n                            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                                {/* Left Column - Tenant Settings */}\n                                <div className=\"space-y-6\">\n                                    <div className=\"p-4 border rounded-lg\">\n                                        <h3 className=\"font-medium mb-4 flex items-center gap-2\">\n                                            <Building className=\"h-4 w-4\" />\n                                            Tenant Settings\n                                        </h3>\n\n                                        <form onSubmit={(e) => {\n                                            e.preventDefault();\n                                            const formData = new FormData(e.currentTarget);\n                                            const settings = {\n                                                displayName: formData.get('displayName') as string,\n                                                isActive: editTenant.tenant!.isActive,\n                                                isPrimary: editTenant.tenant!.isPrimary,\n                                                isTrial: editTenant.tenant!.isTrial,\n                                                licenseType: parseInt(formData.get('licenseType') as string)\n                                            };\n                                            updateTenantSettings(editTenant.tenant!.tenantId, settings);\n                                        }} className=\"space-y-4\">\n\n                                            <div className=\"space-y-2\">\n                                                <label className=\"text-sm font-medium\">Display Name</label>\n                                                <input\n                                                    name=\"displayName\"\n                                                    type=\"text\"\n                                                    defaultValue={editTenant.tenant?.displayName}\n                                                    className=\"w-full px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-600\"\n                                                    required\n                                                />\n                                            </div>\n\n                                            <div className=\"space-y-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg\">\n                                                <div className=\"text-sm font-medium mb-3\">Tenant Information</div>\n                                                <div className=\"space-y-3 text-sm\">\n                                                    <div className=\"flex justify-between\">\n                                                        <span className=\"text-gray-500\">Tenant ID:</span>\n                                                        <code className=\"text-gray-800 dark:text-gray-200\">{editTenant.tenant?.tenantId}</code>\n                                                    </div>\n                                                    <div className=\"flex justify-between\">\n                                                        <span className=\"text-gray-500\">Domain:</span>\n                                                        <code className=\"text-gray-800 dark:text-gray-200\">{editTenant.tenant?.domainName}</code>\n                                                    </div>\n                                                    <div className=\"flex justify-between\">\n                                                        <span className=\"text-gray-500\">Status:</span>\n                                                        <Badge variant={editTenant.tenant?.isActive ? \"default\" : \"secondary\"}>\n                                                            {editTenant.tenant?.isActive ? 'Active' : 'Inactive'}\n                                                        </Badge>\n                                                    </div>\n                                                    <div className=\"flex justify-between\">\n                                                        <span className=\"text-gray-500\">GDAP:</span>\n                                                        <Badge variant={editTenant.tenant?.isGdap ? \"default\" : \"outline\"}>\n                                                            {editTenant.tenant?.isGdap ? 'Enabled' : 'Disabled'}\n                                                        </Badge>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <Button\n                                                type=\"submit\"\n                                                disabled={editingTenant}\n                                                className=\"w-full bg-blue-600 hover:bg-blue-700\"\n                                            >\n                                                {editingTenant ? (\n                                                    <>\n                                                        <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n                                                        Saving...\n                                                    </>\n                                                ) : (\n                                                    'Save Settings'\n                                                )}\n                                            </Button>\n                                        </form>\n                                    </div>\n\n                                    {/* Quick Actions */}\n                                    <div className=\"p-4 border rounded-lg\">\n                                        <h3 className=\"font-medium mb-4 flex items-center gap-2\">\n                                            <Shield className=\"h-4 w-4\" />\n                                            Quick Actions\n                                        </h3>\n                                        <div className=\"space-y-2\">\n                                            <Button\n                                                type=\"button\"\n                                                variant=\"outline\"\n                                                onClick={() => openLicenseOnboardingWizard(editTenant.tenant!.tenantId, editTenant.tenant!.displayName)}\n\n                                                className=\"w-full justify-start\"\n                                            >\n                                                <Plus className=\"h-4 w-4 mr-2\" />\n                                                Add New License\n                                            </Button>\n                                            <Button\n                                                type=\"button\"\n                                                variant=\"destructive\"\n                                                onClick={() => {\n                                                    setDeleteConfirmation({\n                                                        isOpen: true,\n                                                        tenantId: editTenant.tenant!.tenantId,\n                                                        tenantName: editTenant.tenant!.displayName\n                                                    });\n                                                    setEditTenant(null);\n                                                }}\n                                                className=\"w-full justify-start\"\n                                            >\n                                                <Trash2 className=\"h-4 w-4 mr-2\" />\n                                                Delete Tenant\n                                            </Button>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {/* Right Column - License Management */}\n                                <div className=\"space-y-6\">\n                                    <div className=\"p-4 border rounded-lg\">\n                                        <div className=\"flex items-center justify-between mb-4\">\n                                            <h3 className=\"font-medium flex items-center gap-2\">\n                                                <Shield className=\"h-4 w-4\" />\n                                                License Management\n                                            </h3>\n                                            <span className=\"text-xs text-gray-500 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded\">\n                                                {editTenant.tenant?.licenses?.length || 0} licenses\n                                            </span>\n                                        </div>\n\n                                        {editTenant.tenant?.licenses && editTenant.tenant.licenses.length > 0 ? (\n                                            <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                                                {editTenant.tenant.licenses.map((license) => {\n                                                    const licenseKey = `${editTenant.tenant?.tenantId}-${license.id}`;\n                                                    const isUpdating = updatingLicense.has(licenseKey);\n\n                                                    return (\n                                                        <div key={license.id} className=\"p-3 border rounded-lg bg-gray-50 dark:bg-gray-900\">\n                                                            <div className=\"flex items-center justify-between mb-3\">\n                                                                <Badge variant={getLicenseTypeVariant(license.licenseType)}>\n                                                                    {getLicenseTypeName(license.licenseType)}\n                                                                </Badge>\n                                                                <div className=\"flex items-center gap-2\">\n                                                                    {isUpdating && (\n                                                                        <Loader2 className=\"h-4 w-4 animate-spin text-blue-600\" />\n                                                                    )}\n                                                                    <Button\n                                                                        variant=\"outline\"\n                                                                        size=\"sm\"\n                                                                        onClick={() => deleteTenantLicense(editTenant.tenant!.tenantId, license.id)}\n                                                                        disabled={isUpdating}\n                                                                        className=\"h-6 w-6 p-0 text-red-600 hover:text-red-800\"\n                                                                    >\n                                                                        <Trash2 className=\"h-3 w-3\" />\n                                                                    </Button>\n                                                                </div>\n                                                            </div>\n\n                                                            {/* License Status */}\n                                                            <div className=\"flex items-center gap-2 mb-3\">\n                                                                {license.isConsentGranted ? (\n                                                                    <>\n                                                                        <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                                                                        <span className=\"text-xs text-green-700 dark:text-green-400\">\n                                                                            Consented & {license.isOnboarded ? 'Onboarded' : 'Pending'}\n                                                                        </span>\n                                                                    </>\n                                                                ) : (\n                                                                    <>\n                                                                        <AlertCircle className=\"h-4 w-4 text-orange-500\" />\n                                                                        <span className=\"text-xs text-orange-700 dark:text-orange-400\">\n                                                                            Consent Required\n                                                                        </span>\n                                                                    </>\n                                                                )}\n                                                            </div>\n\n                                                            {/* Consent Button */}\n                                                            {!license.isConsentGranted && license.consentUrl && (\n                                                                <Button\n                                                                    variant=\"outline\"\n                                                                    size=\"sm\"\n                                                                    onClick={() => window.open(license.consentUrl!, '_blank')}\n                                                                    className=\"w-full mb-3 text-xs h-7 text-blue-600 hover:text-blue-800\"\n                                                                >\n                                                                    Grant Consent\n                                                                </Button>\n                                                            )}\n\n                                                            {/* Toggle Controls */}\n                                                            <div className=\"flex items-center justify-between text-xs\">\n                                                                <div className=\"flex items-center gap-2\">\n                                                                    <span>Active:</span>\n                                                                    <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                        <input\n                                                                            type=\"checkbox\"\n                                                                            checked={license.isActive}\n                                                                            onChange={(e) => {\n                                                                                updateTenantLicense(editTenant.tenant!.tenantId, license.id, {\n                                                                                    isActive: e.target.checked,\n                                                                                    isPrimary: false,\n                                                                                    isTrial: license.isTrial,\n                                                                                    licenseType: license.licenseType\n                                                                                });\n                                                                            }}\n                                                                            disabled={isUpdating}\n                                                                            className=\"sr-only peer\"\n                                                                        />\n                                                                        <div className=\"w-7 h-4 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-3 peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:left-[1px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all dark:border-gray-600 peer-checked:bg-green-600\"></div>\n                                                                    </label>\n                                                                </div>\n                                                                <div className=\"flex items-center gap-2\">\n                                                                    <span>Trial:</span>\n                                                                    <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                        <input\n                                                                            type=\"checkbox\"\n                                                                            checked={license.isTrial}\n                                                                            onChange={(e) => {\n                                                                                updateTenantLicense(editTenant.tenant!.tenantId, license.id, {\n                                                                                    isActive: license.isActive,\n                                                                                    isPrimary: false,\n                                                                                    isTrial: e.target.checked,\n                                                                                    licenseType: license.licenseType\n                                                                                });\n                                                                            }}\n                                                                            disabled={isUpdating}\n                                                                            className=\"sr-only peer\"\n                                                                        />\n                                                                        <div className=\"w-7 h-4 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-3 peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:left-[1px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600\"></div>\n                                                                    </label>\n                                                                </div>\n                                                            </div>\n\n                                                            {/* Dates */}\n                                                            <div className=\"flex justify-between text-xs text-gray-500 mt-2 pt-2 border-t\">\n                                                                <span>Created: {new Date(license.createdAt).toLocaleDateString()}</span>\n                                                                <span>Expires: {license.expiresAt ? new Date(license.expiresAt).toLocaleDateString() : 'Never'}</span>\n                                                            </div>\n                                                        </div>\n                                                    );\n                                                })}\n                                            </div>\n                                        ) : (\n                                            <div className=\"text-center py-6 text-gray-500 border rounded-lg bg-gray-50 dark:bg-gray-900\">\n                                                <Shield className=\"h-6 w-6 mx-auto mb-2 opacity-50\" />\n                                                <p className=\"text-sm\">No licenses assigned</p>\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Bottom Actions */}\n                            <div className=\"flex justify-end gap-2 pt-4 border-t\">\n                                <Button\n                                    variant=\"outline\"\n                                    onClick={() => {\n                                        setEditTenant(null);\n                                        setEditError(null);\n                                        setLicenseError(null);\n                                    }}\n                                >\n                                    Close\n                                </Button>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </div>\n            )}\n            {/* License Onboarding Wizard */}\n            {licenseOnboardingWizard && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]\">\n                    <Card className=\"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto\">\n                        <CardHeader>\n                            <CardTitle className=\"flex items-center gap-2\">\n                                <Plus className=\"h-5 w-5\" />\n                                Add License - {licenseOnboardingWizard.tenantName}\n                            </CardTitle>\n                            <p className=\"text-sm text-gray-500\">\n                                Step {licenseOnboardingWizard.currentStep + 1} of 3\n                            </p>\n                        </CardHeader>\n                        <CardContent className=\"space-y-6\">\n                            {/* Progress Steps */}\n                            <div className=\"grid grid-cols-3 gap-4\">\n                                <div className={`text-center p-3 ${licenseOnboardingWizard.currentStep >= 0 ? 'opacity-100' : 'opacity-50'}`}>\n                                    <div className={`w-10 h-10 mx-auto mb-2 rounded-full flex items-center justify-center ${\n                                        licenseOnboardingWizard.currentStep >= 0 ? 'bg-blue-100 dark:bg-blue-900' : 'bg-gray-100'\n                                    }`}>\n                                        <Plus className={`h-5 w-5 ${licenseOnboardingWizard.currentStep >= 0 ? 'text-blue-600' : 'text-gray-400'}`} />\n                                    </div>\n                                    <h4 className=\"font-semibold text-sm\">Select License</h4>\n                                </div>\n                                <div className={`text-center p-3 ${licenseOnboardingWizard.currentStep >= 1 ? 'opacity-100' : 'opacity-50'}`}>\n                                    <div className={`w-10 h-10 mx-auto mb-2 rounded-full flex items-center justify-center ${\n                                        licenseOnboardingWizard.currentStep >= 1 ? 'bg-purple-100 dark:bg-purple-900' : 'bg-gray-100'\n                                    }`}>\n                                        <Lock className={`h-5 w-5 ${licenseOnboardingWizard.currentStep >= 1 ? 'text-purple-600' : 'text-gray-400'}`} />\n                                    </div>\n                                    <h4 className=\"font-semibold text-sm\">Grant Consent</h4>\n                                </div>\n                                <div className={`text-center p-3 ${licenseOnboardingWizard.currentStep >= 2 ? 'opacity-100' : 'opacity-50'}`}>\n                                    <div className={`w-10 h-10 mx-auto mb-2 rounded-full flex items-center justify-center ${\n                                        licenseOnboardingWizard.currentStep >= 2 ? 'bg-green-100 dark:bg-green-900' : 'bg-gray-100'\n                                    }`}>\n                                        <CheckCircle className={`h-5 w-5 ${licenseOnboardingWizard.currentStep >= 2 ? 'text-green-600' : 'text-gray-400'}`} />\n                                    </div>\n                                    <h4 className=\"font-semibold text-sm\">Complete</h4>\n                                </div>\n                            </div>\n\n                            {/* Step Content */}\n                            {licenseOnboardingWizard.currentStep === 0 && (\n                                <Card>\n                                    <CardHeader>\n                                        <CardTitle>Select License Type</CardTitle>\n                                        <CardDescription>Choose which license type to add to this tenant</CardDescription>\n                                    </CardHeader>\n                                    <CardContent className=\"space-y-4\">\n                                        <select\n                                            value={licenseOnboardingWizard.licenseType}\n                                            onChange={(e) => setLicenseOnboardingWizard(prev => prev ? {\n                                                ...prev,\n                                                licenseType: parseInt(e.target.value)\n                                            } : null)}\n                                            className=\"w-full p-3 border rounded-md dark:bg-gray-800 dark:border-gray-600\"\n                                        >\n                                            <option\n                                                value={0}\n                                                disabled={customerData?.tenants\n                                                    .find(t => t.tenantId === licenseOnboardingWizard.tenantId)\n                                                    ?.licenses?.some(license => license.licenseType === 0)\n                                                }\n                                            >\n                                                Assistant {customerData?.tenants\n                                                .find(t => t.tenantId === licenseOnboardingWizard.tenantId)\n                                                ?.licenses?.some(license => license.licenseType === 0)\n                                                ? '(Already assigned)' : ''\n                                            }\n                                            </option>\n                                            <option\n                                                value={1}\n                                                disabled={customerData?.tenants\n                                                    .find(t => t.tenantId === licenseOnboardingWizard.tenantId)\n                                                    ?.licenses?.some(license => license.licenseType === 1)\n                                                }\n                                            >\n                                                Assignments Manager {customerData?.tenants\n                                                .find(t => t.tenantId === licenseOnboardingWizard.tenantId)\n                                                ?.licenses?.some(license => license.licenseType === 1)\n                                                ? '(Already assigned)' : ''\n                                            }\n                                            </option>\n                                            <option\n                                                value={2}\n                                                disabled={customerData?.tenants\n                                                    .find(t => t.tenantId === licenseOnboardingWizard.tenantId)\n                                                    ?.licenses?.some(license => license.licenseType === 2)\n                                                }\n                                            >\n                                                Historicus {customerData?.tenants\n                                                .find(t => t.tenantId === licenseOnboardingWizard.tenantId)\n                                                ?.licenses?.some(license => license.licenseType === 2)\n                                                ? '(Already assigned)' : ''\n                                            }\n                                            </option>\n                                        </select>\n                                        <p className=\"text-xs text-gray-500\">\n                                            License types already assigned to this tenant are disabled.\n                                        </p>\n                                    </CardContent>\n                                </Card>\n                            )}\n\n                            {licenseOnboardingWizard.currentStep === 1 && (\n                                <Card>\n                                    <CardHeader>\n                                        <CardTitle>Grant Admin Consent</CardTitle>\n                                        <CardDescription>Admin consent is required for the new license</CardDescription>\n                                    </CardHeader>\n                                    <CardContent className=\"space-y-4\">\n                                        {licenseOnboardingWizard.loading && (\n                                            <div className=\"text-center py-6\">\n                                                <Loader2 className=\"h-8 w-8 animate-spin mx-auto mb-4\" />\n                                                <p className=\"font-medium\">Processing consent...</p>\n                                            </div>\n                                        )}\n\n                                        {licenseOnboardingWizard.consentWindow && !licenseOnboardingWizard.consentCompleted && (\n                                            <div className=\"text-center py-6\">\n                                                <ExternalLink className=\"h-8 w-8 mx-auto mb-4 text-blue-600\" />\n                                                <p className=\"font-medium\">Consent window is open</p>\n                                                <p className=\"text-sm text-gray-600 mt-2\">\n                                                    Please complete the consent process in the popup window\n                                                </p>\n                                            </div>\n                                        )}\n                                    </CardContent>\n                                </Card>\n                            )}\n\n                            {licenseOnboardingWizard.currentStep === 2 && (\n                                <Card>\n                                    <CardHeader>\n                                        <CardTitle>License Added Successfully</CardTitle>\n                                        <CardDescription>The license has been added to the tenant</CardDescription>\n                                    </CardHeader>\n                                    <CardContent className=\"space-y-4\">\n                                        <div className=\"text-center py-6\">\n                                            <CheckCircle className=\"h-12 w-12 mx-auto mb-4 text-green-600\" />\n                                            <p className=\"text-lg font-medium mb-2\">License Added!</p>\n                                            <p className=\"text-gray-600\">\n                                                {getLicenseTypeName(licenseOnboardingWizard.licenseType)} license has been successfully added to {licenseOnboardingWizard.tenantName}.\n                                            </p>\n                                        </div>\n                                    </CardContent>\n                                </Card>\n                            )}\n\n                            {/* Error Display */}\n                            {licenseOnboardingWizard.error && (\n                                <div className=\"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-md\">\n                                    <AlertCircle className=\"h-4 w-4\" />\n                                    {licenseOnboardingWizard.error}\n                                </div>\n                            )}\n\n                            {/* Navigation */}\n                            <div className=\"flex justify-end gap-2 pt-4 border-t\">\n                                {licenseOnboardingWizard.currentStep === 0 && (\n                                    <Button\n                                        onClick={handleLicenseWizardNext}\n                                        disabled={licenseOnboardingWizard.loading}\n                                    >\n                                        Start Consent Process\n                                    </Button>\n                                )}\n\n                                {licenseOnboardingWizard.currentStep === 2 && (\n                                    <Button onClick={() => setLicenseOnboardingWizard(null)}>\n                                        Complete\n                                    </Button>\n                                )}\n\n                                <Button\n                                    variant=\"outline\"\n                                    onClick={() => setLicenseOnboardingWizard(null)}\n                                    disabled={licenseOnboardingWizard.loading}\n                                >\n                                    {licenseOnboardingWizard.currentStep === 2 ? 'Close' : 'Cancel'}\n                                </Button>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </div>\n            )}\n            {showOnboardingModal && (\n                <TenantOnboardingModal\n                    isOpen={showOnboardingModal}\n                    onClose={() => setShowOnboardingModal(false)}\n                    onSuccess={handleTenantOnboardingSuccess}\n                />\n            )}\n\n        </div>\n    );\n\n}"],"names":[],"mappings":"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","debugId":null}}]
}