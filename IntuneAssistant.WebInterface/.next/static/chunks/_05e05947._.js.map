{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/components/DataTable.tsx"],"sourcesContent":["// components/DataTable.tsx\n'use client';\nimport { useState, useRef, useEffect, useMemo } from 'react';\nimport {ITEMS_PER_PAGE} from \"@/lib/constants\";\nimport { ChevronLeft, ChevronRight, ChevronUp, ChevronDown, ChevronsUpDown, Search, X } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\n\ninterface Column {\n    key: string;\n    label: string;\n    width?: number;\n    minWidth?: number;\n    sortable?: boolean;\n    searchable?: boolean;\n    sortValue?: (row: Record<string, unknown>) => number | string;\n    render?: (value: unknown, row: Record<string, unknown>) => React.ReactNode;\n}\n\ninterface SortConfig {\n    key: string;\n    direction: 'asc' | 'desc';\n}\n\ninterface DataTableProps {\n    data: Record<string, unknown>[];\n    columns: Column[];\n    className?: string;\n    onRowClick?: (row: Record<string, unknown>, index: number, event?: React.MouseEvent) => void;\n    rowClassName?: (row: Record<string, unknown>) => string;\n    currentPage?: number;\n    totalPages?: number;\n    itemsPerPage?: number;\n    onPageChange?: (page: number) => void;\n    onItemsPerPageChange?: (itemsPerPage: number) => void;\n    showPagination?: boolean;\n    showSearch?: boolean;\n    searchPlaceholder?: string;\n    selectedRows?: string[];\n    onSelectionChange?: (rowIds: string[]) => void;\n}\n\nexport function DataTable({\n                              data,\n                              columns: initialColumns,\n                              className = '',\n                              onRowClick,\n                              currentPage = 1,\n                              totalPages = 1,\n                              itemsPerPage = ITEMS_PER_PAGE,\n                              onPageChange,\n                              rowClassName,\n                              onItemsPerPageChange,\n                              showPagination = false,\n                              showSearch = true,\n                              searchPlaceholder = \"Search...\",\n                              onSelectionChange,\n                              selectedRows = [],\n                          }: DataTableProps) {\n\n    // Local pagination state to support uncontrolled usage\n    const [internalCurrentPage, setInternalCurrentPage] = useState<number>(currentPage);\n    const [internalItemsPerPage, setInternalItemsPerPage] = useState<number>(itemsPerPage);\n\n    // Sync internal state when parent updates props\n    useEffect(() => setInternalCurrentPage(currentPage), [currentPage]);\n    useEffect(() => setInternalItemsPerPage(itemsPerPage), [itemsPerPage]);\n\n    // Effective values: prefer controller (props) when callbacks are provided\n    const effectiveCurrentPage = onPageChange ? currentPage : internalCurrentPage;\n    const effectiveItemsPerPage = onItemsPerPageChange ? itemsPerPage : internalItemsPerPage;\n\n    const changePage = (page: number) => {\n        if (onPageChange) {\n            onPageChange(page);\n        } else {\n            setInternalCurrentPage(page);\n        }\n    };\n\n    const changeItemsPerPage = (n: number) => {\n        if (onItemsPerPageChange) {\n            onItemsPerPageChange(n);\n        } else {\n            setInternalItemsPerPage(n);\n        }\n    };\n\n    const isRowSelected = (row: Record<string, unknown>) => {\n        if (!selectedRows || selectedRows.length === 0) return false;\n        const rowId = String(row.id);\n        return selectedRows.includes(rowId);\n    };\n\n    const handleRowSelection = (e: React.MouseEvent | React.ChangeEvent<HTMLInputElement>, row: Record<string, unknown>) => {\n        e.stopPropagation();\n        const rowId = String(row.id);\n\n        if (onSelectionChange) {\n            const isCurrentlySelected = isRowSelected(row);\n            if (isCurrentlySelected) {\n                onSelectionChange(selectedRows.filter(id => id !== rowId));\n            } else {\n                onSelectionChange([...selectedRows, rowId]);\n            }\n        }\n    };\n\n    const columnsWithSelection = useMemo(() => {\n        if (onSelectionChange && !initialColumns.some(col => col.key === '_select')) {\n            return [\n                {\n                    key: '_select',\n                    label: '',\n                    width: 50,\n                    minWidth: 40,\n                    sortable: false,\n                    searchable: false,\n                    sortValue: undefined,\n                    render: (_, row) => (\n                        <input\n                            type=\"checkbox\"\n                            checked={isRowSelected(row)}\n                            onChange={(e) => handleRowSelection(e, row)}\n                            className=\"rounded border-input text-primary focus:ring-ring\"\n                        />\n                    )\n\n                },\n                ...initialColumns\n            ];\n        }\n        return initialColumns;\n    }, [onSelectionChange, selectedRows, initialColumns]);\n\n    const [columns, setColumns] = useState(columnsWithSelection.map(col => ({\n        ...col,\n        width: col.width || 150,\n        minWidth: col.minWidth || 100,\n        searchable: col.searchable !== false && col.key !== '_select',\n        sortValue: col.sortValue\n    })));\n\n    const [sortConfig, setSortConfig] = useState<SortConfig | null>(null);\n    const [searchTerm, setSearchTerm] = useState('');\n    const [resizing, setResizing] = useState<{ columnIndex: number; startX: number; startWidth: number } | null>(null);\n    const tableRef = useRef<HTMLTableElement>(null);\n\n    useEffect(() => {\n        setColumns(columnsWithSelection.map(col => ({\n            ...col,\n            width: col.width || 150,\n            minWidth: col.minWidth || 100,\n            searchable: col.searchable !== false && col.key !== '_select',\n            sortValue: col.sortValue\n        })));\n    }, [columnsWithSelection]);\n\n    // Filter data based on search term\n    const filteredData = data.filter(row => {\n        if (!searchTerm.trim()) return true;\n\n        const searchLower = searchTerm.toLowerCase();\n\n        // Search through ALL properties in the row, not just the column keys\n        return Object.entries(row).some(([key, value]) => {\n            if (value === null || value === undefined) return false;\n            const stringValue = String(value).toLowerCase();\n            return stringValue.includes(searchLower);\n        });\n    });\n\n    // Sort filtered data\n    const sortedData = [...filteredData].sort((a, b) => {\n        if (!sortConfig) return 0;\n\n        // Find the column configuration to check for custom sortValue\n        const column = columns.find(col => col.key === sortConfig.key);\n\n        // Use sortValue function if provided, otherwise fall back to direct value\n        const aValue = column?.sortValue ? column.sortValue(a) : a[sortConfig.key];\n        const bValue = column?.sortValue ? column.sortValue(b) : b[sortConfig.key];\n\n        if (aValue === undefined && bValue === undefined) {\n            return 0;\n        }\n\n        if (aValue === null || aValue === undefined) return 1;\n        if (bValue === null || bValue === undefined) return -1;\n\n        if (typeof aValue === 'number' && typeof bValue === 'number') {\n            return sortConfig.direction === 'asc'\n                ? aValue - bValue\n                : bValue - aValue;\n        }\n\n        const aDate = new Date(aValue as string);\n        const bDate = new Date(bValue as string);\n        if (!isNaN(aDate.getTime()) && !isNaN(bDate.getTime())) {\n            return sortConfig.direction === 'asc'\n                ? aDate.getTime() - bDate.getTime()\n                : bDate.getTime() - aDate.getTime();\n        }\n\n        const aStr = String(aValue).toLowerCase();\n        const bStr = String(bValue).toLowerCase();\n\n        if (aStr < bStr) return sortConfig.direction === 'asc' ? -1 : 1;\n        if (aStr > bStr) return sortConfig.direction === 'asc' ? 1 : -1;\n        return 0;\n    });\n\n\n    // Update pagination to work with filtered/sorted data\n    const startIndex = (effectiveCurrentPage - 1) * effectiveItemsPerPage;\n    const endIndex = startIndex + effectiveItemsPerPage;\n    const paginatedData = sortedData.slice(startIndex, endIndex);\n    const totalFilteredPages = Math.max(1, Math.ceil(sortedData.length / effectiveItemsPerPage));\n\n    const handleSort = (columnKey: string) => {\n        let direction: 'asc' | 'desc' = 'asc';\n\n        if (sortConfig && sortConfig.key === columnKey && sortConfig.direction === 'asc') {\n            direction = 'desc';\n        }\n\n        setSortConfig({ key: columnKey, direction });\n    };\n\n    const getSortIcon = (columnKey: string) => {\n        if (!sortConfig || sortConfig.key !== columnKey) {\n            return <ChevronsUpDown className=\"h-4 w-4 text-muted-foreground\" />;\n        }\n\n        return sortConfig.direction === 'asc'\n            ? <ChevronUp className=\"h-4 w-4 text-foreground\" />\n            : <ChevronDown className=\"h-4 w-4 text-foreground\" />;\n    };\n\n\n    const clearSearch = () => {\n        setSearchTerm('');\n        changePage(1);\n    };\n\n    useEffect(() => {\n        if (effectiveCurrentPage > 1) {\n            changePage(1);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [searchTerm]);\n\n    useEffect(() => {\n        const maxPage = Math.max(1, Math.ceil(sortedData.length / effectiveItemsPerPage));\n        if (effectiveCurrentPage > maxPage) {\n            changePage(1);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [effectiveItemsPerPage, sortedData.length, effectiveCurrentPage]);\n\n    useEffect(() => {\n        const handleMouseMove = (e: MouseEvent) => {\n            if (!resizing) return;\n\n            const diff = e.clientX - resizing.startX;\n            const newWidth = Math.max(resizing.startWidth + diff, columns[resizing.columnIndex].minWidth || 100);\n\n            setColumns(prev => prev.map((col, index) =>\n                index === resizing.columnIndex ? { ...col, width: newWidth } : col\n            ));\n        };\n\n        const handleMouseUp = () => {\n            setResizing(null);\n        };\n\n        if (resizing) {\n            document.addEventListener('mousemove', handleMouseMove);\n            document.addEventListener('mouseup', handleMouseUp);\n        }\n\n        return () => {\n            document.removeEventListener('mousemove', handleMouseMove);\n            document.removeEventListener('mouseup', handleMouseUp);\n        };\n    }, [resizing, columns]);\n\n    const handleResizeStart = (e: React.MouseEvent, columnIndex: number) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setResizing({\n            columnIndex,\n            startX: e.clientX,\n            startWidth: columns[columnIndex].width || 150\n        });\n    };\n\n    const handleRowClick = (e: React.MouseEvent, row: Record<string, unknown>, index: number) => {\n        if (resizing) return;\n\n        const target = e.target as HTMLElement;\n        const isInteractive = target.closest('input[type=\"checkbox\"], input[type=\"radio\"], button, a, [role=\"button\"], [tabindex=\"0\"]');\n\n        if (!isInteractive && onRowClick) {\n            onRowClick(row, index, e);\n        }\n    };\n\n\n    const getCellValue = (row: Record<string, unknown>, column: Column) => {\n        if (column.key === '_select') {\n            return null;\n        }\n        return row[column.key];\n    };\n\n    return (\n        <div className={`bg-background border rounded-lg overflow-hidden shadow-sm ${className}`}>\n            {showSearch && (\n                <div className=\"p-4 bg-muted border-b\">\n                    <div className=\"relative max-w-sm\">\n                        <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                        <input\n                            type=\"text\"\n                            placeholder={searchPlaceholder}\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                            className=\"w-full pl-10 pr-10 py-2 border rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent transition-colors\"\n                        />\n                        {searchTerm && (\n                            <button\n                                onClick={clearSearch}\n                                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\n                            >\n                                <X className=\"h-4 w-4\" />\n                            </button>\n                        )}\n                    </div>\n                    {searchTerm && (\n                        <div className=\"mt-2 text-sm text-muted-foreground\">\n                            {sortedData.length} of {data.length} results\n                        </div>\n                    )}\n                </div>\n            )}\n\n            <div className=\"overflow-auto\">\n                <table ref={tableRef} className=\"w-full text-sm\">\n                    <thead className=\"bg-background sticky top-0 z-10 border-b\">\n\n                    <tr className=\"border-b\">\n                        {columns.map((column, index) => (\n                            <th\n                                key={column.key}\n                                className=\"relative text-left p-3 font-medium text-foreground\"\n                                style={{ width: `${column.width}px` }}\n                            >\n                                <div className=\"flex items-center justify-between\">\n                                    <div\n                                        className={`flex items-center gap-2 flex-1 ${\n                                            column.sortable !== false && column.key !== '_select'\n                                                ? 'cursor-pointer hover:text-primary transition-colors'\n                                                : ''\n                                        }`}\n                                        onClick={() => {\n                                            if (column.sortable !== false && column.key !== '_select') {\n                                                handleSort(column.key);\n                                            }\n                                        }}\n                                    >\n                                        <span className=\"truncate pr-2\">{column.label}</span>\n                                        {column.sortable !== false && column.key !== '_select' && (\n                                            getSortIcon(column.key)\n                                        )}\n                                    </div>\n                                </div>\n\n                                {column.key !== '_select' && (\n                                    <div\n                                        className=\"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-primary group\"\n                                        onMouseDown={(e) => handleResizeStart(e, index)}\n                                    >\n                                        <div className=\"h-full w-px bg-border group-hover:bg-primary transition-colors\" />\n                                    </div>\n                                )}\n                            </th>\n                        ))}\n                    </tr>\n                    </thead>\n                    <tbody className=\"bg-background divide-y divide-border\">\n                    {paginatedData.length > 0 ? (\n                        paginatedData.map((row, rowIndex) => (\n                            <tr\n                                key={rowIndex}\n                                className={`\n                transition-colors\n                ${onRowClick ? 'cursor-pointer' : ''}\n                ${isRowSelected(row)\n                                    ? 'bg-yellow-400 dark:bg-yellow-400/80 text-foreground border-l-4 border-l-yellow-600 dark:border-l-yellow-400 shadow-md ring-1 ring-yellow-500/30'\n                                    : 'hover:bg-muted/50'\n                                }\n                ${rowClassName ? rowClassName(row) : ''}\n            `}\n                                onClick={(e) => handleRowClick(e, row, startIndex + rowIndex)}\n                            >\n\n                            {columns.map((column) => (\n                                    <td\n                                        key={column.key}\n                                        className=\"p-3 text-foreground\"\n                                        style={{ width: `${column.width}px` }}\n                                    >\n                                        <div className=\"overflow-hidden\">\n                                            {column.render\n                                                ? column.render(getCellValue(row, column), row)\n                                                : String(getCellValue(row, column) || '')\n                                            }\n                                        </div>\n                                    </td>\n                                ))}\n                            </tr>\n                        ))\n                    ) : (\n                        <tr>\n                            <td\n                                colSpan={columns.length}\n                                className=\"p-8 text-center text-muted-foreground bg-muted/50\"\n                            >\n                                {searchTerm ? 'No results found for your search.' : 'No data available.'}\n                            </td>\n                        </tr>\n                    )}\n                    </tbody>\n                </table>\n            </div>\n\n            {showPagination && sortedData.length > 0 && (\n                <div className=\"flex items-center justify-between p-4 border-t bg-muted\">\n                    <div className=\"flex items-center gap-4\">\n                        <div className=\"text-sm text-muted-foreground\">\n                            Showing {Math.min(startIndex + 1, sortedData.length)} to {Math.min(endIndex, sortedData.length)} of {sortedData.length} results\n                            {searchTerm && ` (filtered from ${data.length} total)`}\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                            <span className=\"text-sm text-muted-foreground\">Items per page:</span>\n                            <select\n                                value={effectiveItemsPerPage}\n                                onChange={(e) => {\n                                    const newItemsPerPage = Number(e.target.value);\n                                    changeItemsPerPage(newItemsPerPage);\n                                    changePage(1);\n                                }}\n                                className=\"border rounded px-2 py-1 text-sm bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors\"\n                            >\n                                <option value={10}>10</option>\n                                <option value={25}>25</option>\n                                <option value={50}>50</option>\n                                <option value={100}>100</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                        <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => changePage(Math.max(1, effectiveCurrentPage - 1))}\n                            disabled={effectiveCurrentPage === 1}\n                        >\n                            <ChevronLeft className=\"h-4 w-4\" />\n                            Previous\n                        </Button>\n\n                        <div className=\"flex items-center gap-1\">\n                            {Array.from({ length: Math.min(5, totalFilteredPages) }, (_, i) => {\n                                let pageNum;\n                                if (totalFilteredPages <= 5) {\n                                    pageNum = i + 1;\n                                } else if (effectiveCurrentPage <= 3) {\n                                    pageNum = i + 1;\n                                } else if (effectiveCurrentPage >= totalFilteredPages - 2) {\n                                    pageNum = totalFilteredPages - 4 + i;\n                                } else {\n                                    pageNum = effectiveCurrentPage - 2 + i;\n                                }\n\n                                return (\n                                    <Button\n                                        key={pageNum}\n                                        variant={effectiveCurrentPage === pageNum ? \"default\" : \"outline\"}\n                                        size=\"sm\"\n                                        onClick={() => changePage(pageNum)}\n                                        className=\"w-8 h-8 p-0\"\n                                    >\n                                        {pageNum}\n                                    </Button>\n                                );\n                            })}\n                        </div>\n\n                        <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => changePage(Math.min(totalFilteredPages, effectiveCurrentPage + 1))}\n                            disabled={effectiveCurrentPage === totalFilteredPages}\n                        >\n                            Next\n                            <ChevronRight className=\"h-4 w-4\" />\n                        </Button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 715, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/app/customer/page.tsx"],"sourcesContent":["'use client';\nimport { useState, useEffect } from 'react';\nimport { useMsal } from '@azure/msal-react';\nimport { useTenant } from '@/contexts/TenantContext';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Switch } from '@/components/ui/switch';\nimport { useRouter } from 'next/navigation';\nimport { useCustomer } from '@/contexts/CustomerContext';\nimport { DataTable } from '@/components/DataTable';\n\nimport {\n    Building,\n    Mail,\n    Home,\n    Users,\n    Shield,\n    AlertCircle,\n    CheckCircle,\n    Loader2,\n    Plus,\n    Edit,\n    Trash2,\n    ExternalLink,\n    Lock\n} from 'lucide-react';\nimport {CONSENT_CALLBACK, CUSTOMER_ENDPOINT, ITEMS_PER_PAGE} from '@/lib/constants';\nimport { apiScope } from \"@/lib/msalConfig\";\n\n\ninterface TenantUpdateData {\n    isActive: boolean;\n    isPrimary: boolean;\n    isTrial: boolean;\n    licenseType: number;\n}\n\ninterface CustomerTenantLicense {\n    id: string;\n    createdAt: string;\n    expiresAt: string | null;\n    isActive: boolean;\n    isTrial: boolean;\n    licenseType: number;\n    activatedBy: string;\n    isConsentGranted: boolean;\n    consentGrantedAt: string | null;\n    consentGrantedBy: string | null;\n    isOnboarded: boolean;\n    onboardedAt: string | null;\n    consentUrl: string | null;\n}\n\ninterface Tenant {\n    id: string;\n    tenantId: string;\n    displayName: string;\n    domainName: string;\n    isActive: boolean;\n    isPrimary: boolean;\n    isGdap: boolean;\n    isTrial: boolean;\n    lastLogin: string | null;\n    licenseType: number;\n    licenses?: CustomerTenantLicense[];\n}\n\ninterface License {\n    id: string; // Add this property\n    licenseType: number;\n    isActive: boolean;\n    isTrial: boolean;\n    maxTenants: number;\n    expiryDate: string | null;\n}\n\n\nexport default function CustomerPage() {\n    const { accounts, instance } = useMsal();\n    const { setSelectedTenant, selectedTenant } = useTenant();\n    const [currentPage, setCurrentPage] = useState(1);\n    const [itemsPerPage, setItemsPerPage] = useState(ITEMS_PER_PAGE);\n    const [scrollPosition, setScrollPosition] = useState(0);\n\n    const router = useRouter();\n    const { customerData, customerLoading: loading, customerError: error, refetchCustomerData } = useCustomer();\n\n    const [updatingTenants, setUpdatingTenants] = useState<Set<string>>(new Set());\n    const [showOnboardingModal, setShowOnboardingModal] = useState(false);\n    const [updateError, setUpdateError] = useState<string | null>(null);\n    const [showClickOverlay, setShowClickOverlay] = useState(false);\n    const [selectedTenantId, setSelectedTenantId] = useState<string | null>(null);\n    const { isActiveCustomer, customerLoading } = useCustomer();\n\n    const currentTenantId = accounts[0]?.tenantId;\n\n    useEffect(() => {\n        const handleScroll = () => {\n            const position = window.pageYOffset || document.documentElement.scrollTop;\n            setScrollPosition(position);\n            sessionStorage.setItem('customerPageScrollPosition', position.toString());\n        };\n\n        window.addEventListener('scroll', handleScroll);\n        return () => {\n            window.removeEventListener('scroll', handleScroll);\n            // Save final position when component unmounts\n            sessionStorage.setItem('customerPageScrollPosition', scrollPosition.toString());\n        };\n    }, [scrollPosition]);\n\n    useEffect(() => {\n        if (!loading && customerData) {\n            const savedPosition = sessionStorage.getItem('customerPageScrollPosition');\n            if (savedPosition) {\n                // Use setTimeout to ensure DOM is fully rendered\n                setTimeout(() => {\n                    window.scrollTo({\n                        top: parseInt(savedPosition),\n                        behavior: 'smooth'\n                    });\n                }, 100);\n            }\n        }\n    }, [loading, customerData]);\n    useEffect(() => {\n        return () => {\n            sessionStorage.removeItem('customerPageScrollPosition');\n        };\n    }, []);\n\n    const [licenseManagement, setLicenseManagement] = useState<{\n        isOpen: boolean;\n        tenant: Tenant | null;\n    } | null>(null);\n\n    const [updatingLicense, setUpdatingLicense] = useState<Set<string>>(new Set());\n    const [licenseError, setLicenseError] = useState<string | null>(null);\n\n    const updateTenantLicense = async (tenantId: string, licenseId: string, licenseData: {\n        isActive: boolean;\n        isPrimary: boolean;\n        isTrial: boolean;\n        licenseType: number;\n    }) => {\n        try {\n            setUpdatingLicense(prev => new Set(prev).add(`${tenantId}-${licenseId}`));\n            setLicenseError(null);\n\n            const response = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            const apiResponse = await fetch(`${CUSTOMER_ENDPOINT}/tenants/${tenantId}/license/${licenseId}`, {\n                method: 'PATCH',\n                headers: {\n                    'Authorization': `Bearer ${response.accessToken}`,\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    IsActive: licenseData.isActive,\n                    IsPrimary: licenseData.isPrimary,\n                    IsTrial: licenseData.isTrial,\n                    LicenseType: licenseData.licenseType\n                }),\n            });\n\n            if (!apiResponse.ok) {\n                throw new Error(`Failed to update license: ${apiResponse.statusText}`);\n            }\n\n            // Parse the API response to get updated license data\n            const responseData = await apiResponse.json();\n            console.log('License update response:', responseData);\n\n            // Force a complete data refresh\n            await refetchCustomerData();\n\n            // Update the local license management state with fresh data\n            if (licenseManagement?.tenant) {\n                // Find the updated tenant in the fresh data\n                const updatedCustomerData = await refetchCustomerData();\n                // This will automatically update the UI with the fresh data\n            }\n\n        } catch (err) {\n            console.error('Failed to update tenant license:', err);\n            setLicenseError(err instanceof Error ? err.message : 'Failed to update license');\n        } finally {\n            setUpdatingLicense(prev => {\n                const newSet = new Set(prev);\n                newSet.delete(`${tenantId}-${licenseId}`);\n                return newSet;\n            });\n        }\n    };\n\n    useEffect(() => {\n        if (editTenant && customerData && editTenant.tenant) {\n            const updatedTenant = customerData.tenants.find(\n                (t: Tenant) => t.tenantId === editTenant.tenant!.tenantId\n            );\n\n            if (updatedTenant) {\n                setEditTenant({\n                    ...editTenant,\n                    tenant: updatedTenant\n                });\n            }\n        }\n    }, [customerData]);\n\n\n    const getLicenseTypeName = (licenseType: number): string => {\n        switch (licenseType) {\n            case 0:\n                return 'Assistant';\n            case 1:\n                return 'Assignments Manager';\n            default:\n                return 'Unknown';\n        }\n    };\n\n    const getLicenseTypeVariant = (licenseType: number): \"default\" | \"secondary\" | \"destructive\" | \"outline\" => {\n        switch (licenseType) {\n            case 0:\n                return 'outline';\n            case 1:\n                return 'secondary';\n            case 2:\n                return 'default';\n            default:\n                return 'destructive';\n        }\n    };\n\n    // Add this state for the add license dialog\n    const [addLicenseDialog, setAddLicenseDialog] = useState<{\n        isOpen: boolean;\n        tenantId: string;\n        tenantName: string;\n    } | null>(null);\n\n    const [newLicenseData, setNewLicenseData] = useState({\n        licenseType: 0,\n        isEnabled: true,\n        isTrial: false\n    });\n\n\n    const hasOnlyCommunityLicense = (): boolean => {\n        if (!customerData?.licenses || customerData.licenses.length === 0) {\n            return false;\n        }\n\n        return customerData.licenses.every(license => license.licenseType === 0);\n    };\n\n    const columns = [\n        {\n            key: \"displayName\",\n            label: \"Display Name\",\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const tenant = row as unknown as Tenant;\n                return (\n                    <div className=\"flex items-center gap-2 text-sm font-medium truncate w-full text-left\">\n                <span className=\"font-medium truncate transition-colors duration-200\">\n                    {tenant.displayName}\n                </span>\n                    </div>\n                );\n            },\n        },\n        {\n            key: \"tenantId\",\n            label: \"Tenant ID\",\n            render: (value: unknown) => (\n                <code className=\"text-sm font-medium cursor-pointer truncate block w-full text-left\">\n                    {value as string}\n                </code>\n            ),\n        },\n        {\n            key: \"isActive\",\n            label: \"Status\",\n            render: (value: unknown) => {\n                const isActive = value as boolean;\n                return (\n                    <Badge variant={isActive ? \"default\" : \"secondary\"}>\n                        {isActive ? 'Active' : 'Inactive'}\n                    </Badge>\n                );\n            },\n        },\n        {\n            key: \"isPrimary\",\n            label: \"Type\",\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const tenant = row as unknown as Tenant;\n                return (\n                    <div className=\"flex gap-1\">\n                        {tenant.isPrimary && (\n                            <Badge variant=\"default\" className=\"text-xs\">Primary</Badge>\n                        )}\n                        {tenant.isTrial && (\n                            <Badge variant=\"outline\" className=\"text-xs\">Trial</Badge>\n                        )}\n                        {!tenant.isPrimary && !tenant.isTrial && (\n                            <Badge variant=\"secondary\" className=\"text-xs\">Standard</Badge>\n                        )}\n                    </div>\n                );\n            },\n        },\n        {\n            key: \"isGdap\",\n            label: \"GDAP\",\n            render: (value: unknown) => {\n                const isGdap = value as boolean;\n                return (\n                    <Badge variant={isGdap ? \"default\" : \"outline\"}>\n                        {isGdap ? 'Enabled' : 'Disabled'}\n                    </Badge>\n                );\n            },\n        },\n        {\n            key: \"domainName\",\n            label: \"Domain\",\n            render: (value: unknown) => (\n                <code className=\"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded font-medium\">\n                    {value as string}\n                </code>\n            ),\n        },\n        // Only include license type column if customer is active\n        ...(isActiveCustomer && !hasOnlyCommunityLicense() ? [{\n            key: \"licenseType\",\n            label: \"License Status\",\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const tenant = row as unknown as Tenant;\n                const licenseType = value as number;\n\n                // Check if any license needs consent\n                const hasLicenseNeedingConsent = tenant.licenses?.some(\n                    license => !license.isConsentGranted && license.consentUrl\n                );\n\n                const licenseCount = tenant.licenses?.length || 0;\n\n                return (\n                    <div className=\"flex items-center gap-2\">\n                        {hasLicenseNeedingConsent ? (\n                            <div\n                                className=\"relative cursor-help transition-colors duration-200\"\n                                title=\"One or more licenses require consent, use action button to manage licenses\"\n                            >\n                                <AlertCircle className=\"h-4 w-4 text-orange-500 flex-shrink-0 group-hover:text-orange-600\" />\n                            </div>\n                        ) : (\n                            <div\n                                className=\"relative cursor-help transition-colors duration-200\"\n                                title=\"All licenses are properly configured\"\n                            >\n                                <CheckCircle className=\"h-4 w-4 text-green-500 flex-shrink-0 group-hover:text-green-600\" />\n                            </div>\n                        )}\n                            <span className=\"text-xs text-gray-500 dark:text-gray-400 font-mono bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded-full\">\n                            license count: {licenseCount}\n                </span>\n                    </div>\n                );\n            },\n        }] : []),\n\n        {\n            key: \"actions\",\n            label: \"Actions\",\n            render: (value: unknown, row: Record<string, unknown>) => {\n                const tenant = row as unknown as Tenant;\n                const isUpdating = updatingTenants.has(tenant.tenantId);\n\n                return (\n                    <div className=\"flex items-center gap-1\">\n                        <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={(e) => {\n                                e.stopPropagation();\n                                setEditTenant({\n                                    isOpen: true,\n                                    tenant: tenant\n                                });\n                            }}\n                            disabled={isUpdating}\n                            className=\"h-8 w-8 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-50 dark:hover:bg-blue-950\"\n                        >\n                            <Edit className=\"h-3 w-3\" />\n                        </Button>\n                    </div>\n                );\n            },\n        },\n    ];\n\n// Add this helper function to calculate max tenants from all active licenses\n    const getMaxAllowedTenants = (): number => {\n        if (!customerData?.licenses || customerData.licenses.length === 0) {\n            return 0;\n        }\n\n        return customerData.licenses\n            .filter(license => license.isActive)\n            .reduce((total, license) => total + license.maxTenants, 0);\n    };\n\n// Add this helper to check if tenant limit is reached\n    const isTenantLimitReached = (): boolean => {\n        const maxTenants = getMaxAllowedTenants();\n        const currentTenantCount = customerData?.tenants?.length || 0;\n        return maxTenants > 0 && currentTenantCount >= maxTenants;\n    };\n\n    const [deletingTenants, setDeletingTenants] = useState<Set<string>>(new Set());\n    const [deleteError, setDeleteError] = useState<string | null>(null);\n    const deleteTenant = async (tenantId: string) => {\n        try {\n            // Save current scroll position before delete\n            const currentScroll = window.pageYOffset || document.documentElement.scrollTop;\n            sessionStorage.setItem('customerPageScrollPosition', currentScroll.toString());\n\n            setDeletingTenants(prev => new Set(prev).add(tenantId));\n            setDeleteError(null);\n\n            const response = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            const apiResponse = await fetch(`${CUSTOMER_ENDPOINT}/tenants/${tenantId}`, {\n                method: 'DELETE',\n                headers: {\n                    'Authorization': `Bearer ${response.accessToken}`,\n                },\n            });\n\n            if (!apiResponse.ok) {\n                throw new Error(`Failed to delete tenant: ${apiResponse.statusText}`);\n            }\n\n            // Refresh customer data after successful deletion\n            await refetchCustomerData();\n\n            // Restore scroll position after data refresh\n            setTimeout(() => {\n                const savedPosition = sessionStorage.getItem('customerPageScrollPosition');\n                if (savedPosition) {\n                    window.scrollTo({\n                        top: parseInt(savedPosition),\n                        behavior: 'smooth'\n                    });\n                }\n            }, 100);\n\n        } catch (err) {\n            console.error('Failed to delete tenant:', err);\n            setDeleteError(err instanceof Error ? err.message : 'Failed to delete tenant');\n        } finally {\n            setDeletingTenants(prev => {\n                const newSet = new Set(prev);\n                newSet.delete(tenantId);\n                return newSet;\n            });\n        }\n    };\n    const [deleteConfirmation, setDeleteConfirmation] = useState<{\n        isOpen: boolean;\n        tenantId: string;\n        tenantName: string;\n    } | null>(null);\n\n    const [editTenant, setEditTenant] = useState<{\n        isOpen: boolean;\n        tenant: Tenant | null;\n    } | null>(null);\n\n    const [editingTenant, setEditingTenant] = useState(false);\n    const [editError, setEditError] = useState<string | null>(null);\n\n    const updateTenantSettings = async (tenantId: string, settings: {\n        displayName: string;\n        isActive: boolean;\n        isPrimary: boolean;\n        isTrial: boolean;\n        licenseType: number;\n    }) => {\n        try {\n            setEditingTenant(true);\n            setEditError(null);\n\n            const response = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            const apiResponse = await fetch(`${CUSTOMER_ENDPOINT}/tenants/${tenantId}/settings`, {\n                method: 'PATCH',\n                headers: {\n                    'Authorization': `Bearer ${response.accessToken}`,\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    displayName: settings.displayName,\n                    isActive: settings.isActive,\n                    isPrimary: settings.isPrimary,\n                    isTrial: settings.isTrial,\n                    licenseType: settings.licenseType\n                }),\n            });\n\n\n            if (!apiResponse.ok) {\n                throw new Error(`Failed to update tenant settings: ${apiResponse.statusText}`);\n            }\n\n            await refetchCustomerData();\n            setEditTenant(null);\n\n        } catch (err) {\n            console.error('Failed to update tenant settings:', err);\n            setEditError(err instanceof Error ? err.message : 'Failed to update tenant settings');\n        } finally {\n            setEditingTenant(false);\n        }\n    };\n\n    const deleteTenantLicense = async (tenantId: string, licenseId: string) => {\n        try {\n            setUpdatingLicense(prev => new Set(prev).add(`${tenantId}-${licenseId}`));\n            setLicenseError(null);\n\n            const response = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            const apiResponse = await fetch(`${CUSTOMER_ENDPOINT}/tenants/${tenantId}/license/${licenseId}`, {\n                method: 'DELETE',\n                headers: {\n                    'Authorization': `Bearer ${response.accessToken}`,\n                },\n            });\n\n            if (!apiResponse.ok) {\n                throw new Error(`Failed to delete license: ${apiResponse.statusText}`);\n            }\n\n            await refetchCustomerData();\n\n        } catch (err) {\n            console.error('Failed to delete tenant license:', err);\n            setLicenseError(err instanceof Error ? err.message : 'Failed to delete license');\n        } finally {\n            setUpdatingLicense(prev => {\n                const newSet = new Set(prev);\n                newSet.delete(`${tenantId}-${licenseId}`);\n                return newSet;\n            });\n        }\n    };\n\n    // Add new state for license onboarding wizard\n    const [licenseOnboardingWizard, setLicenseOnboardingWizard] = useState<{\n        isOpen: boolean;\n        tenantId: string;\n        tenantName: string;\n        licenseType: number;\n        currentStep: number;\n        consentWindow: Window | null;\n        consentCompleted: boolean;\n        loading: boolean;\n        error: string | null;\n        consentState?: string | null;\n    } | null>(null);\n\n// Replace the existing add license dialog with this new wizard\n    const openLicenseOnboardingWizard = (tenantId: string, tenantName: string) => {\n        setLicenseOnboardingWizard({\n            isOpen: true,\n            tenantId,\n            tenantName,\n            licenseType: 0,\n            currentStep: 0, // 0: Select license, 1: Consent, 2: Complete\n            consentWindow: null,\n            consentCompleted: false,\n            loading: false,\n            error: null\n        });\n    };\n\n// Handle consent window messages for license wizard\n    useEffect(() => {\n        const handleLicenseConsentMessage = (event: MessageEvent) => {\n            if (event.origin !== window.location.origin || !licenseOnboardingWizard?.consentWindow) {\n                return;\n            }\n\n            if (event.data.type === 'CONSENT_SUCCESS') {\n                console.log('License consent success received');\n                setLicenseOnboardingWizard(prev => prev ? {\n                    ...prev,\n                    consentCompleted: true,\n                    loading: false\n                } : null);\n\n                if (licenseOnboardingWizard.consentWindow) {\n                    licenseOnboardingWizard.consentWindow.close();\n                    setLicenseOnboardingWizard(prev => prev ? {\n                        ...prev,\n                        consentWindow: null\n                    } : null);\n                }\n\n                // Complete the license creation process\n                completeLicenseCreation();\n\n            } else if (event.data.type === 'CONSENT_ERROR') {\n                console.log('License consent error received:', event.data);\n                setLicenseOnboardingWizard(prev => prev ? {\n                    ...prev,\n                    error: `Consent failed: ${event.data.errorDescription || event.data.error || 'Unknown error'}`,\n                    loading: false\n                } : null);\n\n                if (licenseOnboardingWizard.consentWindow) {\n                    licenseOnboardingWizard.consentWindow.close();\n                    setLicenseOnboardingWizard(prev => prev ? {\n                        ...prev,\n                        consentWindow: null\n                    } : null);\n                }\n            }\n        };\n\n        window.addEventListener('message', handleLicenseConsentMessage);\n        return () => window.removeEventListener('message', handleLicenseConsentMessage);\n    }, [licenseOnboardingWizard]);\n\n    const extractStateFromConsentUrl = (url: string): string | null => {\n        try {\n            const urlObj = new URL(url);\n            return urlObj.searchParams.get('state');\n        } catch (error) {\n            console.error('Failed to parse consent URL:', error);\n            return null;\n        }\n    };\n    const initiateLicenseConsent = async () => {\n        if (!licenseOnboardingWizard) return;\n\n        try {\n            setLicenseOnboardingWizard(prev => prev ? {\n                ...prev,\n                loading: true,\n                error: null\n            } : null);\n\n            const tokenResponse = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            // First create the license\n            const createLicenseResponse = await fetch(`${CUSTOMER_ENDPOINT}/tenants/${licenseOnboardingWizard.tenantId}/license`, {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${tokenResponse.accessToken}`,\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    isEnabled: true,\n                    LicenseType: licenseOnboardingWizard.licenseType\n                }),\n            });\n\n            if (!createLicenseResponse.ok) {\n                const errorData = await createLicenseResponse.json().catch(() => null);\n                throw new Error(errorData?.message || `Failed to create license: ${createLicenseResponse.statusText}`);\n            }\n\n            const licenseResult = await createLicenseResponse.json();\n\n            // Get consent URL from the license creation response\n            const consentUrl = licenseResult.data?.consentUrl || licenseResult.consentUrl;\n\n            if (!consentUrl) {\n                throw new Error('No consent URL received from license creation');\n            }\n\n            const extractedState = extractStateFromConsentUrl(consentUrl);\n            setLicenseOnboardingWizard(prev => prev ? {\n                ...prev,\n                consentState: extractedState\n            } : null);\n\n\n            // Open consent window with the URL from license creation\n            const popup = window.open(\n                consentUrl,\n                'licenseConsentWindow',\n                'width=600,height=700,scrollbars=yes,resizable=yes,status=yes,location=yes,toolbar=no,menubar=no'\n            );\n\n            if (popup) {\n                setLicenseOnboardingWizard(prev => prev ? {\n                    ...prev,\n                    consentWindow: popup,\n                    currentStep: 1\n                } : null);\n                popup.focus();\n            } else {\n                throw new Error('Failed to open consent window. Please check your popup blocker settings.');\n            }\n\n        } catch (err) {\n            console.error('Error initiating license consent:', err);\n            setLicenseOnboardingWizard(prev => prev ? {\n                ...prev,\n                error: err instanceof Error ? err.message : 'Failed to initiate consent',\n                loading: false\n            } : null);\n        }\n    };\n\n\n// Complete license creation after consent\n    const completeLicenseCreation = async () => {\n        if (!licenseOnboardingWizard) return;\n\n        try {\n            setLicenseOnboardingWizard(prev => prev ? {\n                ...prev,\n                loading: true,\n                error: null\n            } : null);\n\n            const tokenResponse = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            // Use the consent state in the callback URL\n\n            const response = await fetch(`${CONSENT_CALLBACK}?state=${licenseOnboardingWizard.consentState}`, {\n                method: 'GET',\n                headers: {\n                    'Authorization': `Bearer ${tokenResponse.accessToken}`,\n                    'Content-Type': 'application/json',\n                }\n            });\n\n            if (!response.ok) {\n                const errorData = await response.json().catch(() => null);\n                throw new Error(errorData?.message || `Failed to complete consent callback: ${response.statusText}`);\n            }\n\n            await refetchCustomerData();\n\n            setLicenseOnboardingWizard(prev => prev ? {\n                ...prev,\n                currentStep: 2,\n                loading: false\n            } : null);\n\n        } catch (err) {\n            console.error('Failed to complete license creation:', err);\n            setLicenseOnboardingWizard(prev => prev ? {\n                ...prev,\n                error: err instanceof Error ? err.message : 'Failed to complete license creation',\n                loading: false\n            } : null);\n        }\n    };\n\n\n// Wizard navigation\n    const handleLicenseWizardNext = () => {\n        if (!licenseOnboardingWizard) return;\n\n        if (licenseOnboardingWizard.currentStep === 0) {\n            // Start consent process\n            initiateLicenseConsent();\n        }\n    };\n\n\n    const assignNewLicense = async (tenantId: string, licenseType: number, licenseData: {\n        isActive: boolean;\n        isPrimary: boolean;\n        isTrial: boolean;\n        licenseType: number;\n    }) => {\n        try {\n            setUpdatingLicense(prev => new Set(prev).add(`${tenantId}-assign-${licenseType}`));\n            setLicenseError(null);\n\n            const response = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            const apiResponse = await fetch(`${CUSTOMER_ENDPOINT}/tenants/${tenantId}/license`, {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${response.accessToken}`,\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    isActive: licenseData.isActive,\n                    IsPrimary: licenseData.isPrimary,\n                    IsTrial: licenseData.isTrial,\n                    LicenseType: licenseData.licenseType\n                }),\n            });\n\n            if (!apiResponse.ok) {\n                throw new Error(`Failed to assign license: ${apiResponse.statusText}`);\n            }\n\n            await refetchCustomerData();\n            setLicenseManagement(null);\n\n        } catch (err) {\n            console.error('Failed to assign license:', err);\n            setLicenseError(err instanceof Error ? err.message : 'Failed to assign license');\n        } finally {\n            setUpdatingLicense(prev => {\n                const newSet = new Set(prev);\n                newSet.delete(`${tenantId}-assign-${licenseType}`);\n                return newSet;\n            });\n        }\n    };\n\n\n    const getCustomerLicenseTypeName = (licenseType: number): string => {\n        switch (licenseType) {\n            case 0:\n                return 'Community';\n            case 1:\n                return 'Standard';\n            case 2:\n                return 'Enterprise';\n            default:\n                return 'Unknown';\n        }\n    };\n\n    const getCustomerLicenseVariant = (licenseType: number): \"default\" | \"secondary\" | \"destructive\" | \"outline\" => {\n        switch (licenseType) {\n            case 0:\n                return 'outline';\n            case 1:\n                return 'secondary';\n            case 2:\n                return 'default';\n            default:\n                return 'destructive';\n        }\n    };\n    const createNewLicense = async (tenantId: string, licenseData: {\n        isEnabled: boolean;\n        LicenseType: number;\n    }) => {\n        try {\n            setUpdatingLicense(prev => new Set(prev).add(`${tenantId}-new`));\n            setLicenseError(null);\n\n            const response = await instance.acquireTokenSilent({\n                scopes: [apiScope],\n                account: accounts[0]\n            });\n\n            const apiResponse = await fetch(`${CUSTOMER_ENDPOINT}/tenants/${tenantId}/license`, {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${response.accessToken}`,\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    isEnabled: licenseData.isEnabled,\n                    LicenseType: licenseData.LicenseType\n                }),\n            });\n\n            if (!apiResponse.ok) {\n                throw new Error(`Failed to create license: ${apiResponse.statusText}`);\n            }\n\n            const responseData = await apiResponse.json();\n            console.log('License creation response:', responseData);\n\n            await refetchCustomerData();\n            setAddLicenseDialog(null);\n\n        } catch (err) {\n            console.error('Failed to create license:', err);\n            setLicenseError(err instanceof Error ? err.message : 'Failed to create license');\n        } finally {\n            setUpdatingLicense(prev => {\n                const newSet = new Set(prev);\n                newSet.delete(`${tenantId}-new`);\n                return newSet;\n            });\n        }\n    };\n\n\n\n\n    const handleTenantSelect = (tenant: Tenant) => {\n        setShowClickOverlay(true);\n        setSelectedTenant(tenant);\n        setSelectedTenantId(tenant.id);\n        setTimeout(() => {\n            setShowClickOverlay(false);\n        }, 200);\n    };\n\n    const handleTenantOnboardingSuccess = async () => {\n        setShowOnboardingModal(false);\n        await refetchCustomerData();\n    };\n\n    if (loading) {\n        return (\n            <div className=\"p-6 max-w-6xl mx-auto\">\n                <div className=\"flex items-center justify-center h-64\">\n                    <Loader2 className=\"h-8 w-8 animate-spin\" />\n                    <span className=\"ml-2\">Loading customer information...</span>\n                </div>\n            </div>\n        );\n    }\n\n    if (error) {\n        return (\n            <div className=\"p-6 max-w-6xl mx-auto\">\n                <Card className=\"border-red-200\">\n                    <CardContent className=\"p-6\">\n                        <div className=\"flex items-center gap-2 text-red-600\">\n                            <AlertCircle className=\"h-5 w-5\" />\n                            <span>Error: {error}</span>\n                        </div>\n                        <Button onClick={refetchCustomerData} className=\"mt-4\">\n                            Retry\n                        </Button>\n                    </CardContent>\n                </Card>\n            </div>\n        );\n    }\n\n    if (!customerData) {\n        return (\n            <div className=\"p-6 max-w-6xl mx-auto\">\n                <Card>\n                    <CardContent className=\"p-6 text-center\">\n                        <p>No customer data available</p>\n                        <Button onClick={() => router.back()} className=\"mt-4\">\n                            Go Back\n                        </Button>\n                    </CardContent>\n                </Card>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"p-6 w-full max-w-none mx-auto px-8\">\n            <div className=\"mb-6\">\n                <Button\n                    variant=\"outline\"\n                    onClick={() => router.back()}\n                    className=\"mb-4\"\n                >\n                     Back\n                </Button>\n                <h1 className=\"text-3xl font-bold text-gray-900 dark:text-gray-100\">Customer Information</h1>\n                <p className=\"text-gray-600 dark:text-gray-300 mt-2\">Manage customer details and tenant access</p>\n            </div>\n\n\n            {/* Show update error if any */}\n            {updateError && (\n                <Card className=\"border-red-200 mb-6\">\n                    <CardContent className=\"p-4\">\n                        <div className=\"flex items-center gap-2 text-red-600\">\n                            <AlertCircle className=\"h-4 w-4\" />\n                            <span className=\"text-sm\">{updateError}</span>\n                        </div>\n                    </CardContent>\n                </Card>\n            )}\n            {/* Show delete error if any */}\n            {deleteError && (\n                <Card className=\"border-red-200 mb-6\">\n                    <CardContent className=\"p-4\">\n                        <div className=\"flex items-center gap-2 text-red-600\">\n                            <AlertCircle className=\"h-4 w-4\" />\n                            <span className=\"text-sm\">{deleteError}</span>\n                        </div>\n                    </CardContent>\n                </Card>\n            )}\n\n            <div className=\"flex flex-col xl:flex-row gap-6 mb-6\">\n                {/* Customer Basic Information */}\n                <div className=\"xl:w-1/2\">\n                    <Card>\n                        <CardHeader>\n                            <CardTitle className=\"flex items-center gap-2\">\n                                <Building className=\"h-5 w-5\" />\n                                Customer Details\n                            </CardTitle>\n                        </CardHeader>\n                        <CardContent className=\"space-y-6\">\n                            {/* Basic Information */}\n                            <div className=\"space-y-3\">\n                                <div className=\"flex items-center gap-3\">\n                                    <Building className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />\n                                    <div>\n                                        <p className=\"text-sm font-medium\">Customer Name</p>\n                                        <p className=\"text-sm text-gray-600 dark:text-gray-300\">{customerData.name}</p>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex items-center gap-3\">\n                                    <Home className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />\n                                    <div>\n                                        <p className=\"text-sm font-medium\">Address</p>\n                                        <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                                            {customerData.address || 'Not provided'}\n                                        </p>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex items-center gap-3\">\n                                    <Mail className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />\n                                    <div>\n                                        <p className=\"text-sm font-medium\">Primary Contact</p>\n                                        <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                                            {customerData.primaryContactEmail || 'Not provided'}\n                                        </p>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex items-center gap-3\">\n                                    <Shield className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />\n                                    <div>\n                                        <p className=\"text-sm font-medium\">Account Type</p>\n                                        <div className=\"flex gap-2 mt-1\">\n                                            <Badge variant={customerData.isMsp ? \"default\" : \"secondary\"}>\n                                                {customerData.isMsp ? 'MSP' : 'Direct'}\n                                            </Badge>\n                                            <Badge variant={customerData.isActive ? \"default\" : \"outline\"}>\n                                                {customerData.isActive ? 'Active' : 'Community'}\n                                            </Badge>\n                                            <Badge variant={customerData.isGdap ? \"default\" : \"secondary\"}>\n                                                {customerData.isGdap ? 'GDAP' : 'No GDAP'}\n                                            </Badge>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex items-center gap-3\">\n                                    <Users className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />\n                                    <div>\n                                        <p className=\"text-sm font-medium\">Home Tenant ID</p>\n                                        <code className=\"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded\">\n                                            {customerData.homeTenantId}\n                                        </code>\n                                    </div>\n                                </div>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </div>\n\n                {/* Right side - License Info and Summary */}\n                <div className=\"xl:w-1/2 flex flex-col gap-6\">\n                    {/* License Information */}\n                    {customerData.licenses && customerData.licenses.length > 0 && !hasOnlyCommunityLicense() && (\n                        <Card>\n                            <CardHeader>\n                                <CardTitle className=\"flex items-center gap-2\">\n                                    <Shield className=\"h-5 w-5\" />\n                                    License Information\n                                </CardTitle>\n                            </CardHeader>\n                            <CardContent>\n                                {/* Tenant Limit Warning */}\n                                {isTenantLimitReached() && (\n                                    <div className=\"mb-4 p-3 border border-amber-200 bg-amber-50 dark:bg-amber-950 dark:border-amber-800 rounded-lg\">\n                                        <div className=\"flex items-center gap-2 text-amber-700 dark:text-amber-300\">\n                                            <AlertCircle className=\"h-4 w-4\" />\n                                            <span className=\"text-sm font-medium\">\n                                                Maximum tenant limit reached ({customerData.tenants.length}/{getMaxAllowedTenants()} tenants)\n                                            </span>\n                                        </div>\n                                        <p className=\"text-xs text-amber-600 dark:text-amber-400 mt-1 ml-6\">\n                                            Contact support to increase your tenant limit or upgrade your license.\n                                        </p>\n                                    </div>\n                                )}\n\n                                <div className=\"space-y-2\">\n                                    {customerData.licenses.map((license, index) => (\n                                        <div key={index} className=\"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg border\">\n                                            <div className=\"flex items-center justify-between mb-3\">\n                                                <Badge variant={getCustomerLicenseVariant(license.licenseType)} className=\"text-xs\">\n                                                    {getCustomerLicenseTypeName(license.licenseType)}\n                                                </Badge>\n                                                <div className=\"flex items-center gap-1\">\n                                                    <Badge variant={license.isActive ? \"default\" : \"secondary\"} className=\"text-xs\">\n                                                        {license.isActive ? 'Active' : 'Inactive'}\n                                                    </Badge>\n                                                    {license.isTrial && (\n                                                        <Badge variant=\"outline\" className=\"text-xs\">Trial</Badge>\n                                                    )}\n                                                </div>\n                                            </div>\n                                            <div className=\"flex items-center justify-between text-xs\">\n                                                <div className=\"flex items-center gap-1\">\n                                                    <span className=\"text-gray-500 dark:text-gray-400\">Max Tenants:</span>\n                                                    <span className=\"font-medium\">{license.maxTenants}</span>\n                                                </div>\n                                                <div className=\"flex items-center gap-1\">\n                                                    <span className=\"text-gray-500 dark:text-gray-400\">Expires:</span>\n                                                    <span className=\"font-medium\">\n                                                        {license.expiryDate\n                                                            ? new Date(license.expiryDate).toLocaleDateString()\n                                                            : 'Never'\n                                                        }\n                                                    </span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                            </CardContent>\n                        </Card>\n                    )}\n\n                    {/* Summary Stats */}\n                    <Card>\n                        <CardHeader>\n                            <CardTitle>Summary</CardTitle>\n                        </CardHeader>\n                        <CardContent>\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div className=\"text-center p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800\">\n                                    <div className=\"text-2xl font-bold text-blue-700 dark:text-blue-300\">\n                                        {customerData.tenants.length}\n                                    </div>\n                                    <div className=\"text-sm font-medium text-blue-800 dark:text-blue-200\">Total Tenants</div>\n                                </div>\n                                <div className=\"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg border border-green-200 dark:border-green-800\">\n                                    <div className=\"text-2xl font-bold text-green-700 dark:text-green-300\">\n                                        {customerData.tenants.filter((t: Tenant) => t.isActive).length}\n                                    </div>\n                                    <div className=\"text-sm font-medium text-green-800 dark:text-green-200\">Enabled Tenants</div>\n                                </div>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </div>\n            </div>\n\n            {/* Tenants Table */}\n            <Card>\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                    <CardTitle className=\"flex items-center gap-2\">\n                        <Users className=\"h-5 w-5\" />\n                        Tenant Management\n                    </CardTitle>\n                    {customerData.isMsp && customerData.isActive && (\n                        <div className=\"flex items-center gap-2\">\n                            <Button\n                                onClick={() => setShowOnboardingModal(true)}\n                                disabled={isTenantLimitReached()}\n                                className=\"flex items-center gap-2\"\n                            >\n                                <Plus className=\"h-4 w-4\" />\n                                Add Tenant\n                            </Button>\n                            {isTenantLimitReached() && (\n                                <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n                ({customerData.tenants.length}/{getMaxAllowedTenants()} tenants)\n            </span>\n                            )}\n                        </div>\n                    )}\n\n                </CardHeader>\n                <CardContent className=\"relative\">\n                    {showClickOverlay && (\n                        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-blue-200 to-transparent opacity-60 animate-shimmer\" />\n                    )}\n\n                    <DataTable\n                        data={customerData.tenants.map(tenant => tenant as unknown as Record<string, unknown>)}\n                        columns={columns}\n                        className=\"text-sm\"\n                        currentPage={currentPage}\n                        totalPages={Math.ceil(customerData.tenants.length / itemsPerPage)}\n                        itemsPerPage={itemsPerPage}\n                        onPageChange={setCurrentPage}\n                        onItemsPerPageChange={(newItemsPerPage) => {\n                            setItemsPerPage(newItemsPerPage);\n                            setCurrentPage(1);\n                        }}\n                        onRowClick={(row) => {\n                            const tenant = row as unknown as Tenant;\n                            handleTenantSelect(tenant);\n                        }}\n                        selectedRows={selectedTenantId ? [selectedTenantId] : []} // Pass selected tenant ID\n                        showPagination={true}\n                    />\n                </CardContent>\n            </Card>\n\n            {/* Delete Confirmation Dialog */}\n            {deleteConfirmation && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n                    <Card className=\"w-full max-w-md mx-4\">\n                        <CardHeader>\n                            <CardTitle className=\"flex items-center gap-2 text-red-600\">\n                                <AlertCircle className=\"h-5 w-5\" />\n                                Confirm Delete\n                            </CardTitle>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                            <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                                Are you sure you want to delete <span className=\"font-semibold\">&quot;{deleteConfirmation.tenantName}&quot;</span>?\n                            </p>\n                            <p className=\"text-xs text-red-600 dark:text-red-400\">\n                                This action cannot be undone and will permanently remove the tenant from the system.\n                            </p>\n                            <div className=\"flex justify-end gap-2 pt-2\">\n                                <Button\n                                    variant=\"outline\"\n                                    size=\"sm\"\n                                    onClick={() => setDeleteConfirmation(null)}\n                                >\n                                    Cancel\n                                </Button>\n                                <Button\n                                    variant=\"destructive\"\n                                    size=\"sm\"\n                                    onClick={() => {\n                                        if (deleteConfirmation) {\n                                            deleteTenant(deleteConfirmation.tenantId);\n                                            setDeleteConfirmation(null);\n                                        }\n                                    }}\n                                    className=\"bg-red-600 hover:bg-red-700\"\n                                >\n                                    Delete Tenant\n                                </Button>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </div>\n            )}\n\n            {editTenant && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n                    <Card className=\"w-full max-w-6xl mx-4 max-h-[90vh] overflow-y-auto\">\n                        <CardHeader>\n                            <CardTitle className=\"flex items-center gap-2\">\n                                <Edit className=\"h-5 w-5\" />\n                                Tenant Management - {editTenant.tenant?.displayName}\n                            </CardTitle>\n                            <p className=\"text-sm text-gray-500\">\n                                Manage tenant settings, licenses, and permissions in one place.\n                            </p>\n                        </CardHeader>\n                        <CardContent className=\"space-y-6\">\n                            {(editError || licenseError) && (\n                                <div className=\"p-3 border border-red-200 bg-red-50 dark:bg-red-950 dark:border-red-800 rounded-lg\">\n                                    <div className=\"flex items-center gap-2 text-red-600\">\n                                        <AlertCircle className=\"h-4 w-4\" />\n                                        <span className=\"text-sm\">{editError || licenseError}</span>\n                                    </div>\n                                </div>\n                            )}\n\n                            {/* Two Column Layout */}\n                            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                                {/* Left Column - Tenant Settings */}\n                                <div className=\"space-y-6\">\n                                    <div className=\"p-4 border rounded-lg\">\n                                        <h3 className=\"font-medium mb-4 flex items-center gap-2\">\n                                            <Building className=\"h-4 w-4\" />\n                                            Tenant Settings\n                                        </h3>\n\n                                        <form onSubmit={(e) => {\n                                            e.preventDefault();\n                                            const formData = new FormData(e.currentTarget);\n                                            const settings = {\n                                                displayName: formData.get('displayName') as string,\n                                                isActive: editTenant.tenant!.isActive,\n                                                isPrimary: editTenant.tenant!.isPrimary,\n                                                isTrial: editTenant.tenant!.isTrial,\n                                                licenseType: parseInt(formData.get('licenseType') as string)\n                                            };\n                                            updateTenantSettings(editTenant.tenant!.tenantId, settings);\n                                        }} className=\"space-y-4\">\n\n                                            <div className=\"space-y-2\">\n                                                <label className=\"text-sm font-medium\">Display Name</label>\n                                                <input\n                                                    name=\"displayName\"\n                                                    type=\"text\"\n                                                    defaultValue={editTenant.tenant?.displayName}\n                                                    className=\"w-full px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-600\"\n                                                    required\n                                                />\n                                            </div>\n\n                                            <div className=\"space-y-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg\">\n                                                <div className=\"text-sm font-medium mb-3\">Tenant Information</div>\n                                                <div className=\"space-y-3 text-sm\">\n                                                    <div className=\"flex justify-between\">\n                                                        <span className=\"text-gray-500\">Tenant ID:</span>\n                                                        <code className=\"text-gray-800 dark:text-gray-200\">{editTenant.tenant?.tenantId}</code>\n                                                    </div>\n                                                    <div className=\"flex justify-between\">\n                                                        <span className=\"text-gray-500\">Domain:</span>\n                                                        <code className=\"text-gray-800 dark:text-gray-200\">{editTenant.tenant?.domainName}</code>\n                                                    </div>\n                                                    <div className=\"flex justify-between\">\n                                                        <span className=\"text-gray-500\">Status:</span>\n                                                        <Badge variant={editTenant.tenant?.isActive ? \"default\" : \"secondary\"}>\n                                                            {editTenant.tenant?.isActive ? 'Active' : 'Inactive'}\n                                                        </Badge>\n                                                    </div>\n                                                    <div className=\"flex justify-between\">\n                                                        <span className=\"text-gray-500\">GDAP:</span>\n                                                        <Badge variant={editTenant.tenant?.isGdap ? \"default\" : \"outline\"}>\n                                                            {editTenant.tenant?.isGdap ? 'Enabled' : 'Disabled'}\n                                                        </Badge>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <Button\n                                                type=\"submit\"\n                                                disabled={editingTenant}\n                                                className=\"w-full bg-blue-600 hover:bg-blue-700\"\n                                            >\n                                                {editingTenant ? (\n                                                    <>\n                                                        <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n                                                        Saving...\n                                                    </>\n                                                ) : (\n                                                    'Save Settings'\n                                                )}\n                                            </Button>\n                                        </form>\n                                    </div>\n\n                                    {/* Quick Actions */}\n                                    <div className=\"p-4 border rounded-lg\">\n                                        <h3 className=\"font-medium mb-4 flex items-center gap-2\">\n                                            <Shield className=\"h-4 w-4\" />\n                                            Quick Actions\n                                        </h3>\n                                        <div className=\"space-y-2\">\n                                            <Button\n                                                type=\"button\"\n                                                variant=\"outline\"\n                                                onClick={() => openLicenseOnboardingWizard(editTenant.tenant!.tenantId, editTenant.tenant!.displayName)}\n\n                                                className=\"w-full justify-start\"\n                                            >\n                                                <Plus className=\"h-4 w-4 mr-2\" />\n                                                Add New License\n                                            </Button>\n                                            <Button\n                                                type=\"button\"\n                                                variant=\"destructive\"\n                                                onClick={() => {\n                                                    setDeleteConfirmation({\n                                                        isOpen: true,\n                                                        tenantId: editTenant.tenant!.tenantId,\n                                                        tenantName: editTenant.tenant!.displayName\n                                                    });\n                                                    setEditTenant(null);\n                                                }}\n                                                className=\"w-full justify-start\"\n                                            >\n                                                <Trash2 className=\"h-4 w-4 mr-2\" />\n                                                Delete Tenant\n                                            </Button>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {/* Right Column - License Management */}\n                                <div className=\"space-y-6\">\n                                    <div className=\"p-4 border rounded-lg\">\n                                        <div className=\"flex items-center justify-between mb-4\">\n                                            <h3 className=\"font-medium flex items-center gap-2\">\n                                                <Shield className=\"h-4 w-4\" />\n                                                License Management\n                                            </h3>\n                                            <span className=\"text-xs text-gray-500 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded\">\n                                                {editTenant.tenant?.licenses?.length || 0} licenses\n                                            </span>\n                                        </div>\n\n                                        {editTenant.tenant?.licenses && editTenant.tenant.licenses.length > 0 ? (\n                                            <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                                                {editTenant.tenant.licenses.map((license) => {\n                                                    const licenseKey = `${editTenant.tenant?.tenantId}-${license.id}`;\n                                                    const isUpdating = updatingLicense.has(licenseKey);\n\n                                                    return (\n                                                        <div key={license.id} className=\"p-3 border rounded-lg bg-gray-50 dark:bg-gray-900\">\n                                                            <div className=\"flex items-center justify-between mb-3\">\n                                                                <Badge variant={getLicenseTypeVariant(license.licenseType)}>\n                                                                    {getLicenseTypeName(license.licenseType)}\n                                                                </Badge>\n                                                                <div className=\"flex items-center gap-2\">\n                                                                    {isUpdating && (\n                                                                        <Loader2 className=\"h-4 w-4 animate-spin text-blue-600\" />\n                                                                    )}\n                                                                    <Button\n                                                                        variant=\"outline\"\n                                                                        size=\"sm\"\n                                                                        onClick={() => deleteTenantLicense(editTenant.tenant!.tenantId, license.id)}\n                                                                        disabled={isUpdating}\n                                                                        className=\"h-6 w-6 p-0 text-red-600 hover:text-red-800\"\n                                                                    >\n                                                                        <Trash2 className=\"h-3 w-3\" />\n                                                                    </Button>\n                                                                </div>\n                                                            </div>\n\n                                                            {/* License Status */}\n                                                            <div className=\"flex items-center gap-2 mb-3\">\n                                                                {license.isConsentGranted ? (\n                                                                    <>\n                                                                        <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                                                                        <span className=\"text-xs text-green-700 dark:text-green-400\">\n                                                                            Consented & {license.isOnboarded ? 'Onboarded' : 'Pending'}\n                                                                        </span>\n                                                                    </>\n                                                                ) : (\n                                                                    <>\n                                                                        <AlertCircle className=\"h-4 w-4 text-orange-500\" />\n                                                                        <span className=\"text-xs text-orange-700 dark:text-orange-400\">\n                                                                            Consent Required\n                                                                        </span>\n                                                                    </>\n                                                                )}\n                                                            </div>\n\n                                                            {/* Consent Button */}\n                                                            {!license.isConsentGranted && license.consentUrl && (\n                                                                <Button\n                                                                    variant=\"outline\"\n                                                                    size=\"sm\"\n                                                                    onClick={() => window.open(license.consentUrl!, '_blank')}\n                                                                    className=\"w-full mb-3 text-xs h-7 text-blue-600 hover:text-blue-800\"\n                                                                >\n                                                                    Grant Consent\n                                                                </Button>\n                                                            )}\n\n                                                            {/* Toggle Controls */}\n                                                            <div className=\"flex items-center justify-between text-xs\">\n                                                                <div className=\"flex items-center gap-2\">\n                                                                    <span>Active:</span>\n                                                                    <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                        <input\n                                                                            type=\"checkbox\"\n                                                                            checked={license.isActive}\n                                                                            onChange={(e) => {\n                                                                                updateTenantLicense(editTenant.tenant!.tenantId, license.id, {\n                                                                                    isActive: e.target.checked,\n                                                                                    isPrimary: false,\n                                                                                    isTrial: license.isTrial,\n                                                                                    licenseType: license.licenseType\n                                                                                });\n                                                                            }}\n                                                                            disabled={isUpdating}\n                                                                            className=\"sr-only peer\"\n                                                                        />\n                                                                        <div className=\"w-7 h-4 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-3 peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:left-[1px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all dark:border-gray-600 peer-checked:bg-green-600\"></div>\n                                                                    </label>\n                                                                </div>\n                                                                <div className=\"flex items-center gap-2\">\n                                                                    <span>Trial:</span>\n                                                                    <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                        <input\n                                                                            type=\"checkbox\"\n                                                                            checked={license.isTrial}\n                                                                            onChange={(e) => {\n                                                                                updateTenantLicense(editTenant.tenant!.tenantId, license.id, {\n                                                                                    isActive: license.isActive,\n                                                                                    isPrimary: false,\n                                                                                    isTrial: e.target.checked,\n                                                                                    licenseType: license.licenseType\n                                                                                });\n                                                                            }}\n                                                                            disabled={isUpdating}\n                                                                            className=\"sr-only peer\"\n                                                                        />\n                                                                        <div className=\"w-7 h-4 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-3 peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:left-[1px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600\"></div>\n                                                                    </label>\n                                                                </div>\n                                                            </div>\n\n                                                            {/* Dates */}\n                                                            <div className=\"flex justify-between text-xs text-gray-500 mt-2 pt-2 border-t\">\n                                                                <span>Created: {new Date(license.createdAt).toLocaleDateString()}</span>\n                                                                <span>Expires: {license.expiresAt ? new Date(license.expiresAt).toLocaleDateString() : 'Never'}</span>\n                                                            </div>\n                                                        </div>\n                                                    );\n                                                })}\n                                            </div>\n                                        ) : (\n                                            <div className=\"text-center py-6 text-gray-500 border rounded-lg bg-gray-50 dark:bg-gray-900\">\n                                                <Shield className=\"h-6 w-6 mx-auto mb-2 opacity-50\" />\n                                                <p className=\"text-sm\">No licenses assigned</p>\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Bottom Actions */}\n                            <div className=\"flex justify-end gap-2 pt-4 border-t\">\n                                <Button\n                                    variant=\"outline\"\n                                    onClick={() => {\n                                        setEditTenant(null);\n                                        setEditError(null);\n                                        setLicenseError(null);\n                                    }}\n                                >\n                                    Close\n                                </Button>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </div>\n            )}\n            {/* License Onboarding Wizard */}\n            {licenseOnboardingWizard && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]\">\n                    <Card className=\"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto\">\n                        <CardHeader>\n                            <CardTitle className=\"flex items-center gap-2\">\n                                <Plus className=\"h-5 w-5\" />\n                                Add License - {licenseOnboardingWizard.tenantName}\n                            </CardTitle>\n                            <p className=\"text-sm text-gray-500\">\n                                Step {licenseOnboardingWizard.currentStep + 1} of 3\n                            </p>\n                        </CardHeader>\n                        <CardContent className=\"space-y-6\">\n                            {/* Progress Steps */}\n                            <div className=\"grid grid-cols-3 gap-4\">\n                                <div className={`text-center p-3 ${licenseOnboardingWizard.currentStep >= 0 ? 'opacity-100' : 'opacity-50'}`}>\n                                    <div className={`w-10 h-10 mx-auto mb-2 rounded-full flex items-center justify-center ${\n                                        licenseOnboardingWizard.currentStep >= 0 ? 'bg-blue-100 dark:bg-blue-900' : 'bg-gray-100'\n                                    }`}>\n                                        <Plus className={`h-5 w-5 ${licenseOnboardingWizard.currentStep >= 0 ? 'text-blue-600' : 'text-gray-400'}`} />\n                                    </div>\n                                    <h4 className=\"font-semibold text-sm\">Select License</h4>\n                                </div>\n                                <div className={`text-center p-3 ${licenseOnboardingWizard.currentStep >= 1 ? 'opacity-100' : 'opacity-50'}`}>\n                                    <div className={`w-10 h-10 mx-auto mb-2 rounded-full flex items-center justify-center ${\n                                        licenseOnboardingWizard.currentStep >= 1 ? 'bg-purple-100 dark:bg-purple-900' : 'bg-gray-100'\n                                    }`}>\n                                        <Lock className={`h-5 w-5 ${licenseOnboardingWizard.currentStep >= 1 ? 'text-purple-600' : 'text-gray-400'}`} />\n                                    </div>\n                                    <h4 className=\"font-semibold text-sm\">Grant Consent</h4>\n                                </div>\n                                <div className={`text-center p-3 ${licenseOnboardingWizard.currentStep >= 2 ? 'opacity-100' : 'opacity-50'}`}>\n                                    <div className={`w-10 h-10 mx-auto mb-2 rounded-full flex items-center justify-center ${\n                                        licenseOnboardingWizard.currentStep >= 2 ? 'bg-green-100 dark:bg-green-900' : 'bg-gray-100'\n                                    }`}>\n                                        <CheckCircle className={`h-5 w-5 ${licenseOnboardingWizard.currentStep >= 2 ? 'text-green-600' : 'text-gray-400'}`} />\n                                    </div>\n                                    <h4 className=\"font-semibold text-sm\">Complete</h4>\n                                </div>\n                            </div>\n\n                            {/* Step Content */}\n                            {licenseOnboardingWizard.currentStep === 0 && (\n                                <Card>\n                                    <CardHeader>\n                                        <CardTitle>Select License Type</CardTitle>\n                                        <CardDescription>Choose which license type to add to this tenant</CardDescription>\n                                    </CardHeader>\n                                    <CardContent className=\"space-y-4\">\n                                        <select\n                                            value={licenseOnboardingWizard.licenseType}\n                                            onChange={(e) => setLicenseOnboardingWizard(prev => prev ? {\n                                                ...prev,\n                                                licenseType: parseInt(e.target.value)\n                                            } : null)}\n                                            className=\"w-full p-3 border rounded-md dark:bg-gray-800 dark:border-gray-600\"\n                                        >\n                                            <option\n                                                value={0}\n                                                disabled={customerData?.tenants\n                                                    .find(t => t.tenantId === licenseOnboardingWizard.tenantId)\n                                                    ?.licenses?.some(license => license.licenseType === 0)\n                                                }\n                                            >\n                                                Assistant {customerData?.tenants\n                                                .find(t => t.tenantId === licenseOnboardingWizard.tenantId)\n                                                ?.licenses?.some(license => license.licenseType === 0)\n                                                ? '(Already assigned)' : ''\n                                            }\n                                            </option>\n                                            <option\n                                                value={1}\n                                                disabled={customerData?.tenants\n                                                    .find(t => t.tenantId === licenseOnboardingWizard.tenantId)\n                                                    ?.licenses?.some(license => license.licenseType === 1)\n                                                }\n                                            >\n                                                Assignments Manager {customerData?.tenants\n                                                .find(t => t.tenantId === licenseOnboardingWizard.tenantId)\n                                                ?.licenses?.some(license => license.licenseType === 1)\n                                                ? '(Already assigned)' : ''\n                                            }\n                                            </option>\n                                            <option\n                                                value={2}\n                                                disabled={customerData?.tenants\n                                                    .find(t => t.tenantId === licenseOnboardingWizard.tenantId)\n                                                    ?.licenses?.some(license => license.licenseType === 2)\n                                                }\n                                            >\n                                                Historicus {customerData?.tenants\n                                                .find(t => t.tenantId === licenseOnboardingWizard.tenantId)\n                                                ?.licenses?.some(license => license.licenseType === 2)\n                                                ? '(Already assigned)' : ''\n                                            }\n                                            </option>\n                                        </select>\n                                        <p className=\"text-xs text-gray-500\">\n                                            License types already assigned to this tenant are disabled.\n                                        </p>\n                                    </CardContent>\n                                </Card>\n                            )}\n\n                            {licenseOnboardingWizard.currentStep === 1 && (\n                                <Card>\n                                    <CardHeader>\n                                        <CardTitle>Grant Admin Consent</CardTitle>\n                                        <CardDescription>Admin consent is required for the new license</CardDescription>\n                                    </CardHeader>\n                                    <CardContent className=\"space-y-4\">\n                                        {licenseOnboardingWizard.loading && (\n                                            <div className=\"text-center py-6\">\n                                                <Loader2 className=\"h-8 w-8 animate-spin mx-auto mb-4\" />\n                                                <p className=\"font-medium\">Processing consent...</p>\n                                            </div>\n                                        )}\n\n                                        {licenseOnboardingWizard.consentWindow && !licenseOnboardingWizard.consentCompleted && (\n                                            <div className=\"text-center py-6\">\n                                                <ExternalLink className=\"h-8 w-8 mx-auto mb-4 text-blue-600\" />\n                                                <p className=\"font-medium\">Consent window is open</p>\n                                                <p className=\"text-sm text-gray-600 mt-2\">\n                                                    Please complete the consent process in the popup window\n                                                </p>\n                                            </div>\n                                        )}\n                                    </CardContent>\n                                </Card>\n                            )}\n\n                            {licenseOnboardingWizard.currentStep === 2 && (\n                                <Card>\n                                    <CardHeader>\n                                        <CardTitle>License Added Successfully</CardTitle>\n                                        <CardDescription>The license has been added to the tenant</CardDescription>\n                                    </CardHeader>\n                                    <CardContent className=\"space-y-4\">\n                                        <div className=\"text-center py-6\">\n                                            <CheckCircle className=\"h-12 w-12 mx-auto mb-4 text-green-600\" />\n                                            <p className=\"text-lg font-medium mb-2\">License Added!</p>\n                                            <p className=\"text-gray-600\">\n                                                {getLicenseTypeName(licenseOnboardingWizard.licenseType)} license has been successfully added to {licenseOnboardingWizard.tenantName}.\n                                            </p>\n                                        </div>\n                                    </CardContent>\n                                </Card>\n                            )}\n\n                            {/* Error Display */}\n                            {licenseOnboardingWizard.error && (\n                                <div className=\"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-md\">\n                                    <AlertCircle className=\"h-4 w-4\" />\n                                    {licenseOnboardingWizard.error}\n                                </div>\n                            )}\n\n                            {/* Navigation */}\n                            <div className=\"flex justify-end gap-2 pt-4 border-t\">\n                                {licenseOnboardingWizard.currentStep === 0 && (\n                                    <Button\n                                        onClick={handleLicenseWizardNext}\n                                        disabled={licenseOnboardingWizard.loading}\n                                    >\n                                        Start Consent Process\n                                    </Button>\n                                )}\n\n                                {licenseOnboardingWizard.currentStep === 2 && (\n                                    <Button onClick={() => setLicenseOnboardingWizard(null)}>\n                                        Complete\n                                    </Button>\n                                )}\n\n                                <Button\n                                    variant=\"outline\"\n                                    onClick={() => setLicenseOnboardingWizard(null)}\n                                    disabled={licenseOnboardingWizard.loading}\n                                >\n                                    {licenseOnboardingWizard.currentStep === 2 ? 'Close' : 'Cancel'}\n                                </Button>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </div>\n            )}\n\n\n        </div>\n    );\n\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;;;AA5BA;;;;;;;;;;;;;AA8Ee,SAAS;QAiBI,YAsqCyB,oBA4Ca,qBAW0C,qBAIA,qBAIpC,qBACX,qBAKW,qBACX,qBAqEZ,6BAAA,qBAIR,qBAuMiB,qCAAA,4BAKC,sCAAA,6BAQD,sCAAA,6BAKW,sCAAA,6BAQX,sCAAA,6BAKE,sCAAA;;IA3iDxD,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,IAAA,kLAAO;IACtC,MAAM,EAAE,iBAAiB,EAAE,cAAc,EAAE,GAAG,IAAA,0IAAS;IACvD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC,qIAAc;IAC/D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IAErD,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,YAAY,EAAE,iBAAiB,OAAO,EAAE,eAAe,KAAK,EAAE,mBAAmB,EAAE,GAAG,IAAA,8IAAW;IAEzG,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAc,IAAI;IACxE,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,yKAAQ,EAAC;IAC/D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAgB;IAC9D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;IACzD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAgB;IACxE,MAAM,EAAE,gBAAgB,EAAE,eAAe,EAAE,GAAG,IAAA,8IAAW;IAEzD,MAAM,mBAAkB,aAAA,QAAQ,CAAC,EAAE,cAAX,iCAAA,WAAa,QAAQ;IAE7C,IAAA,0KAAS;kCAAC;YACN,MAAM;uDAAe;oBACjB,MAAM,WAAW,OAAO,WAAW,IAAI,SAAS,eAAe,CAAC,SAAS;oBACzE,kBAAkB;oBAClB,eAAe,OAAO,CAAC,8BAA8B,SAAS,QAAQ;gBAC1E;;YAEA,OAAO,gBAAgB,CAAC,UAAU;YAClC;0CAAO;oBACH,OAAO,mBAAmB,CAAC,UAAU;oBACrC,8CAA8C;oBAC9C,eAAe,OAAO,CAAC,8BAA8B,eAAe,QAAQ;gBAChF;;QACJ;iCAAG;QAAC;KAAe;IAEnB,IAAA,0KAAS;kCAAC;YACN,IAAI,CAAC,WAAW,cAAc;gBAC1B,MAAM,gBAAgB,eAAe,OAAO,CAAC;gBAC7C,IAAI,eAAe;oBACf,iDAAiD;oBACjD;kDAAW;4BACP,OAAO,QAAQ,CAAC;gCACZ,KAAK,SAAS;gCACd,UAAU;4BACd;wBACJ;iDAAG;gBACP;YACJ;QACJ;iCAAG;QAAC;QAAS;KAAa;IAC1B,IAAA,0KAAS;kCAAC;YACN;0CAAO;oBACH,eAAe,UAAU,CAAC;gBAC9B;;QACJ;iCAAG,EAAE;IAEL,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAGhD;IAEV,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAc,IAAI;IACxE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB;IAEhE,MAAM,sBAAsB,OAAO,UAAkB,WAAmB;QAMpE,IAAI;YACA,mBAAmB,CAAA,OAAQ,IAAI,IAAI,MAAM,GAAG,CAAC,AAAC,GAAc,OAAZ,UAAS,KAAa,OAAV;YAC5D,gBAAgB;YAEhB,MAAM,WAAW,MAAM,SAAS,kBAAkB,CAAC;gBAC/C,QAAQ;oBAAC,gIAAQ;iBAAC;gBAClB,SAAS,QAAQ,CAAC,EAAE;YACxB;YAEA,MAAM,cAAc,MAAM,MAAM,AAAC,GAA+B,OAA7B,wIAAiB,EAAC,aAA+B,OAApB,UAAS,aAAqB,OAAV,YAAa;gBAC7F,QAAQ;gBACR,SAAS;oBACL,iBAAiB,AAAC,UAA8B,OAArB,SAAS,WAAW;oBAC/C,gBAAgB;gBACpB;gBACA,MAAM,KAAK,SAAS,CAAC;oBACjB,UAAU,YAAY,QAAQ;oBAC9B,WAAW,YAAY,SAAS;oBAChC,SAAS,YAAY,OAAO;oBAC5B,aAAa,YAAY,WAAW;gBACxC;YACJ;YAEA,IAAI,CAAC,YAAY,EAAE,EAAE;gBACjB,MAAM,IAAI,MAAM,AAAC,6BAAmD,OAAvB,YAAY,UAAU;YACvE;YAEA,qDAAqD;YACrD,MAAM,eAAe,MAAM,YAAY,IAAI;YAC3C,QAAQ,GAAG,CAAC,4BAA4B;YAExC,gCAAgC;YAChC,MAAM;YAEN,4DAA4D;YAC5D,IAAI,8BAAA,wCAAA,kBAAmB,MAAM,EAAE;gBAC3B,4CAA4C;gBAC5C,MAAM,sBAAsB,MAAM;YAClC,4DAA4D;YAChE;QAEJ,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,oCAAoC;YAClD,gBAAgB,eAAe,QAAQ,IAAI,OAAO,GAAG;QACzD,SAAU;YACN,mBAAmB,CAAA;gBACf,MAAM,SAAS,IAAI,IAAI;gBACvB,OAAO,MAAM,CAAC,AAAC,GAAc,OAAZ,UAAS,KAAa,OAAV;gBAC7B,OAAO;YACX;QACJ;IACJ;IAEA,IAAA,0KAAS;kCAAC;YACN,IAAI,cAAc,gBAAgB,WAAW,MAAM,EAAE;gBACjD,MAAM,gBAAgB,aAAa,OAAO,CAAC,IAAI;4DAC3C,CAAC,IAAc,EAAE,QAAQ,KAAK,WAAW,MAAM,CAAE,QAAQ;;gBAG7D,IAAI,eAAe;oBACf,cAAc;wBACV,GAAG,UAAU;wBACb,QAAQ;oBACZ;gBACJ;YACJ;QACJ;iCAAG;QAAC;KAAa;IAGjB,MAAM,qBAAqB,CAAC;QACxB,OAAQ;YACJ,KAAK;gBACD,OAAO;YACX,KAAK;gBACD,OAAO;YACX;gBACI,OAAO;QACf;IACJ;IAEA,MAAM,wBAAwB,CAAC;QAC3B,OAAQ;YACJ,KAAK;gBACD,OAAO;YACX,KAAK;gBACD,OAAO;YACX,KAAK;gBACD,OAAO;YACX;gBACI,OAAO;QACf;IACJ;IAEA,4CAA4C;IAC5C,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAI9C;IAEV,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;QACjD,aAAa;QACb,WAAW;QACX,SAAS;IACb;IAGA,MAAM,0BAA0B;QAC5B,IAAI,EAAC,yBAAA,mCAAA,aAAc,QAAQ,KAAI,aAAa,QAAQ,CAAC,MAAM,KAAK,GAAG;YAC/D,OAAO;QACX;QAEA,OAAO,aAAa,QAAQ,CAAC,KAAK,CAAC,CAAA,UAAW,QAAQ,WAAW,KAAK;IAC1E;IAEA,MAAM,UAAU;QACZ;YACI,KAAK;YACL,OAAO;YACP,QAAQ,CAAC,OAAgB;gBACrB,MAAM,SAAS;gBACf,qBACI,6LAAC;oBAAI,WAAU;8BACnB,cAAA,6LAAC;wBAAK,WAAU;kCACX,OAAO,WAAW;;;;;;;;;;;YAI3B;QACJ;QACA;YACI,KAAK;YACL,OAAO;YACP,QAAQ,CAAC,sBACL,6LAAC;oBAAK,WAAU;8BACX;;;;;;QAGb;QACA;YACI,KAAK;YACL,OAAO;YACP,QAAQ,CAAC;gBACL,MAAM,WAAW;gBACjB,qBACI,6LAAC,sIAAK;oBAAC,SAAS,WAAW,YAAY;8BAClC,WAAW,WAAW;;;;;;YAGnC;QACJ;QACA;YACI,KAAK;YACL,OAAO;YACP,QAAQ,CAAC,OAAgB;gBACrB,MAAM,SAAS;gBACf,qBACI,6LAAC;oBAAI,WAAU;;wBACV,OAAO,SAAS,kBACb,6LAAC,sIAAK;4BAAC,SAAQ;4BAAU,WAAU;sCAAU;;;;;;wBAEhD,OAAO,OAAO,kBACX,6LAAC,sIAAK;4BAAC,SAAQ;4BAAU,WAAU;sCAAU;;;;;;wBAEhD,CAAC,OAAO,SAAS,IAAI,CAAC,OAAO,OAAO,kBACjC,6LAAC,sIAAK;4BAAC,SAAQ;4BAAY,WAAU;sCAAU;;;;;;;;;;;;YAI/D;QACJ;QACA;YACI,KAAK;YACL,OAAO;YACP,QAAQ,CAAC;gBACL,MAAM,SAAS;gBACf,qBACI,6LAAC,sIAAK;oBAAC,SAAS,SAAS,YAAY;8BAChC,SAAS,YAAY;;;;;;YAGlC;QACJ;QACA;YACI,KAAK;YACL,OAAO;YACP,QAAQ,CAAC,sBACL,6LAAC;oBAAK,WAAU;8BACX;;;;;;QAGb;QACA,yDAAyD;WACrD,oBAAoB,CAAC,4BAA4B;YAAC;gBAClD,KAAK;gBACL,OAAO;gBACP,QAAQ,CAAC,OAAgB;wBAKY,kBAIZ;oBARrB,MAAM,SAAS;oBACf,MAAM,cAAc;oBAEpB,qCAAqC;oBACrC,MAAM,4BAA2B,mBAAA,OAAO,QAAQ,cAAf,uCAAA,iBAAiB,IAAI,CAClD,CAAA,UAAW,CAAC,QAAQ,gBAAgB,IAAI,QAAQ,UAAU;oBAG9D,MAAM,eAAe,EAAA,oBAAA,OAAO,QAAQ,cAAf,wCAAA,kBAAiB,MAAM,KAAI;oBAEhD,qBACI,6LAAC;wBAAI,WAAU;;4BACV,yCACG,6LAAC;gCACG,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,sOAAW;oCAAC,WAAU;;;;;;;;;;qDAG3B,6LAAC;gCACG,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,6OAAW;oCAAC,WAAU;;;;;;;;;;;0CAG3B,6LAAC;gCAAK,WAAU;;oCAA6G;oCAC7G;;;;;;;;;;;;;gBAIhC;YACJ;SAAE,GAAG,EAAE;QAEP;YACI,KAAK;YACL,OAAO;YACP,QAAQ,CAAC,OAAgB;gBACrB,MAAM,SAAS;gBACf,MAAM,aAAa,gBAAgB,GAAG,CAAC,OAAO,QAAQ;gBAEtD,qBACI,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC,wIAAM;wBACH,SAAQ;wBACR,MAAK;wBACL,SAAS,CAAC;4BACN,EAAE,eAAe;4BACjB,cAAc;gCACV,QAAQ;gCACR,QAAQ;4BACZ;wBACJ;wBACA,UAAU;wBACV,WAAU;kCAEV,cAAA,6LAAC,sNAAI;4BAAC,WAAU;;;;;;;;;;;;;;;;YAIhC;QACJ;KACH;IAEL,6EAA6E;IACzE,MAAM,uBAAuB;QACzB,IAAI,EAAC,yBAAA,mCAAA,aAAc,QAAQ,KAAI,aAAa,QAAQ,CAAC,MAAM,KAAK,GAAG;YAC/D,OAAO;QACX;QAEA,OAAO,aAAa,QAAQ,CACvB,MAAM,CAAC,CAAA,UAAW,QAAQ,QAAQ,EAClC,MAAM,CAAC,CAAC,OAAO,UAAY,QAAQ,QAAQ,UAAU,EAAE;IAChE;IAEJ,sDAAsD;IAClD,MAAM,uBAAuB;YAEE;QAD3B,MAAM,aAAa;QACnB,MAAM,qBAAqB,CAAA,yBAAA,oCAAA,wBAAA,aAAc,OAAO,cAArB,4CAAA,sBAAuB,MAAM,KAAI;QAC5D,OAAO,aAAa,KAAK,sBAAsB;IACnD;IAEA,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAc,IAAI;IACxE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAgB;IAC9D,MAAM,eAAe,OAAO;QACxB,IAAI;YACA,6CAA6C;YAC7C,MAAM,gBAAgB,OAAO,WAAW,IAAI,SAAS,eAAe,CAAC,SAAS;YAC9E,eAAe,OAAO,CAAC,8BAA8B,cAAc,QAAQ;YAE3E,mBAAmB,CAAA,OAAQ,IAAI,IAAI,MAAM,GAAG,CAAC;YAC7C,eAAe;YAEf,MAAM,WAAW,MAAM,SAAS,kBAAkB,CAAC;gBAC/C,QAAQ;oBAAC,gIAAQ;iBAAC;gBAClB,SAAS,QAAQ,CAAC,EAAE;YACxB;YAEA,MAAM,cAAc,MAAM,MAAM,AAAC,GAA+B,OAA7B,wIAAiB,EAAC,aAAoB,OAAT,WAAY;gBACxE,QAAQ;gBACR,SAAS;oBACL,iBAAiB,AAAC,UAA8B,OAArB,SAAS,WAAW;gBACnD;YACJ;YAEA,IAAI,CAAC,YAAY,EAAE,EAAE;gBACjB,MAAM,IAAI,MAAM,AAAC,4BAAkD,OAAvB,YAAY,UAAU;YACtE;YAEA,kDAAkD;YAClD,MAAM;YAEN,6CAA6C;YAC7C,WAAW;gBACP,MAAM,gBAAgB,eAAe,OAAO,CAAC;gBAC7C,IAAI,eAAe;oBACf,OAAO,QAAQ,CAAC;wBACZ,KAAK,SAAS;wBACd,UAAU;oBACd;gBACJ;YACJ,GAAG;QAEP,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,eAAe,eAAe,QAAQ,IAAI,OAAO,GAAG;QACxD,SAAU;YACN,mBAAmB,CAAA;gBACf,MAAM,SAAS,IAAI,IAAI;gBACvB,OAAO,MAAM,CAAC;gBACd,OAAO;YACX;QACJ;IACJ;IACA,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,yKAAQ,EAIlD;IAEV,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAGlC;IAEV,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAgB;IAE1D,MAAM,uBAAuB,OAAO,UAAkB;QAOlD,IAAI;YACA,iBAAiB;YACjB,aAAa;YAEb,MAAM,WAAW,MAAM,SAAS,kBAAkB,CAAC;gBAC/C,QAAQ;oBAAC,gIAAQ;iBAAC;gBAClB,SAAS,QAAQ,CAAC,EAAE;YACxB;YAEA,MAAM,cAAc,MAAM,MAAM,AAAC,GAA+B,OAA7B,wIAAiB,EAAC,aAAoB,OAAT,UAAS,cAAY;gBACjF,QAAQ;gBACR,SAAS;oBACL,iBAAiB,AAAC,UAA8B,OAArB,SAAS,WAAW;oBAC/C,gBAAgB;gBACpB;gBACA,MAAM,KAAK,SAAS,CAAC;oBACjB,aAAa,SAAS,WAAW;oBACjC,UAAU,SAAS,QAAQ;oBAC3B,WAAW,SAAS,SAAS;oBAC7B,SAAS,SAAS,OAAO;oBACzB,aAAa,SAAS,WAAW;gBACrC;YACJ;YAGA,IAAI,CAAC,YAAY,EAAE,EAAE;gBACjB,MAAM,IAAI,MAAM,AAAC,qCAA2D,OAAvB,YAAY,UAAU;YAC/E;YAEA,MAAM;YACN,cAAc;QAElB,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,qCAAqC;YACnD,aAAa,eAAe,QAAQ,IAAI,OAAO,GAAG;QACtD,SAAU;YACN,iBAAiB;QACrB;IACJ;IAEA,MAAM,sBAAsB,OAAO,UAAkB;QACjD,IAAI;YACA,mBAAmB,CAAA,OAAQ,IAAI,IAAI,MAAM,GAAG,CAAC,AAAC,GAAc,OAAZ,UAAS,KAAa,OAAV;YAC5D,gBAAgB;YAEhB,MAAM,WAAW,MAAM,SAAS,kBAAkB,CAAC;gBAC/C,QAAQ;oBAAC,gIAAQ;iBAAC;gBAClB,SAAS,QAAQ,CAAC,EAAE;YACxB;YAEA,MAAM,cAAc,MAAM,MAAM,AAAC,GAA+B,OAA7B,wIAAiB,EAAC,aAA+B,OAApB,UAAS,aAAqB,OAAV,YAAa;gBAC7F,QAAQ;gBACR,SAAS;oBACL,iBAAiB,AAAC,UAA8B,OAArB,SAAS,WAAW;gBACnD;YACJ;YAEA,IAAI,CAAC,YAAY,EAAE,EAAE;gBACjB,MAAM,IAAI,MAAM,AAAC,6BAAmD,OAAvB,YAAY,UAAU;YACvE;YAEA,MAAM;QAEV,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,oCAAoC;YAClD,gBAAgB,eAAe,QAAQ,IAAI,OAAO,GAAG;QACzD,SAAU;YACN,mBAAmB,CAAA;gBACf,MAAM,SAAS,IAAI,IAAI;gBACvB,OAAO,MAAM,CAAC,AAAC,GAAc,OAAZ,UAAS,KAAa,OAAV;gBAC7B,OAAO;YACX;QACJ;IACJ;IAEA,8CAA8C;IAC9C,MAAM,CAAC,yBAAyB,2BAA2B,GAAG,IAAA,yKAAQ,EAW5D;IAEd,+DAA+D;IAC3D,MAAM,8BAA8B,CAAC,UAAkB;QACnD,2BAA2B;YACvB,QAAQ;YACR;YACA;YACA,aAAa;YACb,aAAa;YACb,eAAe;YACf,kBAAkB;YAClB,SAAS;YACT,OAAO;QACX;IACJ;IAEJ,oDAAoD;IAChD,IAAA,0KAAS;kCAAC;YACN,MAAM;sEAA8B,CAAC;oBACjC,IAAI,MAAM,MAAM,KAAK,OAAO,QAAQ,CAAC,MAAM,IAAI,EAAC,oCAAA,8CAAA,wBAAyB,aAAa,GAAE;wBACpF;oBACJ;oBAEA,IAAI,MAAM,IAAI,CAAC,IAAI,KAAK,mBAAmB;wBACvC,QAAQ,GAAG,CAAC;wBACZ;kFAA2B,CAAA,OAAQ,OAAO;oCACtC,GAAG,IAAI;oCACP,kBAAkB;oCAClB,SAAS;gCACb,IAAI;;wBAEJ,IAAI,wBAAwB,aAAa,EAAE;4BACvC,wBAAwB,aAAa,CAAC,KAAK;4BAC3C;sFAA2B,CAAA,OAAQ,OAAO;wCACtC,GAAG,IAAI;wCACP,eAAe;oCACnB,IAAI;;wBACR;wBAEA,wCAAwC;wBACxC;oBAEJ,OAAO,IAAI,MAAM,IAAI,CAAC,IAAI,KAAK,iBAAiB;wBAC5C,QAAQ,GAAG,CAAC,mCAAmC,MAAM,IAAI;wBACzD;kFAA2B,CAAA,OAAQ,OAAO;oCACtC,GAAG,IAAI;oCACP,OAAO,AAAC,mBAAqF,OAAnE,MAAM,IAAI,CAAC,gBAAgB,IAAI,MAAM,IAAI,CAAC,KAAK,IAAI;oCAC7E,SAAS;gCACb,IAAI;;wBAEJ,IAAI,wBAAwB,aAAa,EAAE;4BACvC,wBAAwB,aAAa,CAAC,KAAK;4BAC3C;sFAA2B,CAAA,OAAQ,OAAO;wCACtC,GAAG,IAAI;wCACP,eAAe;oCACnB,IAAI;;wBACR;oBACJ;gBACJ;;YAEA,OAAO,gBAAgB,CAAC,WAAW;YACnC;0CAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;;QACvD;iCAAG;QAAC;KAAwB;IAE5B,MAAM,6BAA6B,CAAC;QAChC,IAAI;YACA,MAAM,SAAS,IAAI,IAAI;YACvB,OAAO,OAAO,YAAY,CAAC,GAAG,CAAC;QACnC,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,OAAO;QACX;IACJ;IACA,MAAM,yBAAyB;QAC3B,IAAI,CAAC,yBAAyB;QAE9B,IAAI;gBAiCmB;YAhCnB,2BAA2B,CAAA,OAAQ,OAAO;oBACtC,GAAG,IAAI;oBACP,SAAS;oBACT,OAAO;gBACX,IAAI;YAEJ,MAAM,gBAAgB,MAAM,SAAS,kBAAkB,CAAC;gBACpD,QAAQ;oBAAC,gIAAQ;iBAAC;gBAClB,SAAS,QAAQ,CAAC,EAAE;YACxB;YAEA,2BAA2B;YAC3B,MAAM,wBAAwB,MAAM,MAAM,AAAC,GAA+B,OAA7B,wIAAiB,EAAC,aAA4C,OAAjC,wBAAwB,QAAQ,EAAC,aAAW;gBAClH,QAAQ;gBACR,SAAS;oBACL,iBAAiB,AAAC,UAAmC,OAA1B,cAAc,WAAW;oBACpD,gBAAgB;gBACpB;gBACA,MAAM,KAAK,SAAS,CAAC;oBACjB,WAAW;oBACX,aAAa,wBAAwB,WAAW;gBACpD;YACJ;YAEA,IAAI,CAAC,sBAAsB,EAAE,EAAE;gBAC3B,MAAM,YAAY,MAAM,sBAAsB,IAAI,GAAG,KAAK,CAAC,IAAM;gBACjE,MAAM,IAAI,MAAM,CAAA,sBAAA,gCAAA,UAAW,OAAO,KAAI,AAAC,6BAA6D,OAAjC,sBAAsB,UAAU;YACvG;YAEA,MAAM,gBAAgB,MAAM,sBAAsB,IAAI;YAEtD,qDAAqD;YACrD,MAAM,aAAa,EAAA,sBAAA,cAAc,IAAI,cAAlB,0CAAA,oBAAoB,UAAU,KAAI,cAAc,UAAU;YAE7E,IAAI,CAAC,YAAY;gBACb,MAAM,IAAI,MAAM;YACpB;YAEA,MAAM,iBAAiB,2BAA2B;YAClD,2BAA2B,CAAA,OAAQ,OAAO;oBACtC,GAAG,IAAI;oBACP,cAAc;gBAClB,IAAI;YAGJ,yDAAyD;YACzD,MAAM,QAAQ,OAAO,IAAI,CACrB,YACA,wBACA;YAGJ,IAAI,OAAO;gBACP,2BAA2B,CAAA,OAAQ,OAAO;wBACtC,GAAG,IAAI;wBACP,eAAe;wBACf,aAAa;oBACjB,IAAI;gBACJ,MAAM,KAAK;YACf,OAAO;gBACH,MAAM,IAAI,MAAM;YACpB;QAEJ,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,qCAAqC;YACnD,2BAA2B,CAAA,OAAQ,OAAO;oBACtC,GAAG,IAAI;oBACP,OAAO,eAAe,QAAQ,IAAI,OAAO,GAAG;oBAC5C,SAAS;gBACb,IAAI;QACR;IACJ;IAGJ,0CAA0C;IACtC,MAAM,0BAA0B;QAC5B,IAAI,CAAC,yBAAyB;QAE9B,IAAI;YACA,2BAA2B,CAAA,OAAQ,OAAO;oBACtC,GAAG,IAAI;oBACP,SAAS;oBACT,OAAO;gBACX,IAAI;YAEJ,MAAM,gBAAgB,MAAM,SAAS,kBAAkB,CAAC;gBACpD,QAAQ;oBAAC,gIAAQ;iBAAC;gBAClB,SAAS,QAAQ,CAAC,EAAE;YACxB;YAEA,4CAA4C;YAE5C,MAAM,WAAW,MAAM,MAAM,AAAC,GAA4B,OAA1B,uIAAgB,EAAC,WAA8C,OAArC,wBAAwB,YAAY,GAAI;gBAC9F,QAAQ;gBACR,SAAS;oBACL,iBAAiB,AAAC,UAAmC,OAA1B,cAAc,WAAW;oBACpD,gBAAgB;gBACpB;YACJ;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBACd,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM;gBACpD,MAAM,IAAI,MAAM,CAAA,sBAAA,gCAAA,UAAW,OAAO,KAAI,AAAC,wCAA2D,OAApB,SAAS,UAAU;YACrG;YAEA,MAAM;YAEN,2BAA2B,CAAA,OAAQ,OAAO;oBACtC,GAAG,IAAI;oBACP,aAAa;oBACb,SAAS;gBACb,IAAI;QAER,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,wCAAwC;YACtD,2BAA2B,CAAA,OAAQ,OAAO;oBACtC,GAAG,IAAI;oBACP,OAAO,eAAe,QAAQ,IAAI,OAAO,GAAG;oBAC5C,SAAS;gBACb,IAAI;QACR;IACJ;IAGJ,oBAAoB;IAChB,MAAM,0BAA0B;QAC5B,IAAI,CAAC,yBAAyB;QAE9B,IAAI,wBAAwB,WAAW,KAAK,GAAG;YAC3C,wBAAwB;YACxB;QACJ;IACJ;IAGA,MAAM,mBAAmB,OAAO,UAAkB,aAAqB;QAMnE,IAAI;YACA,mBAAmB,CAAA,OAAQ,IAAI,IAAI,MAAM,GAAG,CAAC,AAAC,GAAqB,OAAnB,UAAS,YAAsB,OAAZ;YACnE,gBAAgB;YAEhB,MAAM,WAAW,MAAM,SAAS,kBAAkB,CAAC;gBAC/C,QAAQ;oBAAC,gIAAQ;iBAAC;gBAClB,SAAS,QAAQ,CAAC,EAAE;YACxB;YAEA,MAAM,cAAc,MAAM,MAAM,AAAC,GAA+B,OAA7B,wIAAiB,EAAC,aAAoB,OAAT,UAAS,aAAW;gBAChF,QAAQ;gBACR,SAAS;oBACL,iBAAiB,AAAC,UAA8B,OAArB,SAAS,WAAW;oBAC/C,gBAAgB;gBACpB;gBACA,MAAM,KAAK,SAAS,CAAC;oBACjB,UAAU,YAAY,QAAQ;oBAC9B,WAAW,YAAY,SAAS;oBAChC,SAAS,YAAY,OAAO;oBAC5B,aAAa,YAAY,WAAW;gBACxC;YACJ;YAEA,IAAI,CAAC,YAAY,EAAE,EAAE;gBACjB,MAAM,IAAI,MAAM,AAAC,6BAAmD,OAAvB,YAAY,UAAU;YACvE;YAEA,MAAM;YACN,qBAAqB;QAEzB,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,gBAAgB,eAAe,QAAQ,IAAI,OAAO,GAAG;QACzD,SAAU;YACN,mBAAmB,CAAA;gBACf,MAAM,SAAS,IAAI,IAAI;gBACvB,OAAO,MAAM,CAAC,AAAC,GAAqB,OAAnB,UAAS,YAAsB,OAAZ;gBACpC,OAAO;YACX;QACJ;IACJ;IAGA,MAAM,6BAA6B,CAAC;QAChC,OAAQ;YACJ,KAAK;gBACD,OAAO;YACX,KAAK;gBACD,OAAO;YACX,KAAK;gBACD,OAAO;YACX;gBACI,OAAO;QACf;IACJ;IAEA,MAAM,4BAA4B,CAAC;QAC/B,OAAQ;YACJ,KAAK;gBACD,OAAO;YACX,KAAK;gBACD,OAAO;YACX,KAAK;gBACD,OAAO;YACX;gBACI,OAAO;QACf;IACJ;IACA,MAAM,mBAAmB,OAAO,UAAkB;QAI9C,IAAI;YACA,mBAAmB,CAAA,OAAQ,IAAI,IAAI,MAAM,GAAG,CAAC,AAAC,GAAW,OAAT,UAAS;YACzD,gBAAgB;YAEhB,MAAM,WAAW,MAAM,SAAS,kBAAkB,CAAC;gBAC/C,QAAQ;oBAAC,gIAAQ;iBAAC;gBAClB,SAAS,QAAQ,CAAC,EAAE;YACxB;YAEA,MAAM,cAAc,MAAM,MAAM,AAAC,GAA+B,OAA7B,wIAAiB,EAAC,aAAoB,OAAT,UAAS,aAAW;gBAChF,QAAQ;gBACR,SAAS;oBACL,iBAAiB,AAAC,UAA8B,OAArB,SAAS,WAAW;oBAC/C,gBAAgB;gBACpB;gBACA,MAAM,KAAK,SAAS,CAAC;oBACjB,WAAW,YAAY,SAAS;oBAChC,aAAa,YAAY,WAAW;gBACxC;YACJ;YAEA,IAAI,CAAC,YAAY,EAAE,EAAE;gBACjB,MAAM,IAAI,MAAM,AAAC,6BAAmD,OAAvB,YAAY,UAAU;YACvE;YAEA,MAAM,eAAe,MAAM,YAAY,IAAI;YAC3C,QAAQ,GAAG,CAAC,8BAA8B;YAE1C,MAAM;YACN,oBAAoB;QAExB,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,gBAAgB,eAAe,QAAQ,IAAI,OAAO,GAAG;QACzD,SAAU;YACN,mBAAmB,CAAA;gBACf,MAAM,SAAS,IAAI,IAAI;gBACvB,OAAO,MAAM,CAAC,AAAC,GAAW,OAAT,UAAS;gBAC1B,OAAO;YACX;QACJ;IACJ;IAKA,MAAM,qBAAqB,CAAC;QACxB,oBAAoB;QACpB,kBAAkB;QAClB,oBAAoB,OAAO,EAAE;QAC7B,WAAW;YACP,oBAAoB;QACxB,GAAG;IACP;IAEA,MAAM,gCAAgC;QAClC,uBAAuB;QACvB,MAAM;IACV;IAEA,IAAI,SAAS;QACT,qBACI,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC;gBAAI,WAAU;;kCACX,6LAAC,+NAAO;wBAAC,WAAU;;;;;;kCACnB,6LAAC;wBAAK,WAAU;kCAAO;;;;;;;;;;;;;;;;;IAIvC;IAEA,IAAI,OAAO;QACP,qBACI,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC,oIAAI;gBAAC,WAAU;0BACZ,cAAA,6LAAC,2IAAW;oBAAC,WAAU;;sCACnB,6LAAC;4BAAI,WAAU;;8CACX,6LAAC,sOAAW;oCAAC,WAAU;;;;;;8CACvB,6LAAC;;wCAAK;wCAAQ;;;;;;;;;;;;;sCAElB,6LAAC,wIAAM;4BAAC,SAAS;4BAAqB,WAAU;sCAAO;;;;;;;;;;;;;;;;;;;;;;IAO3E;IAEA,IAAI,CAAC,cAAc;QACf,qBACI,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC,oIAAI;0BACD,cAAA,6LAAC,2IAAW;oBAAC,WAAU;;sCACnB,6LAAC;sCAAE;;;;;;sCACH,6LAAC,wIAAM;4BAAC,SAAS,IAAM,OAAO,IAAI;4BAAI,WAAU;sCAAO;;;;;;;;;;;;;;;;;;;;;;IAO3E;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC,wIAAM;wBACH,SAAQ;wBACR,SAAS,IAAM,OAAO,IAAI;wBAC1B,WAAU;kCACb;;;;;;kCAGD,6LAAC;wBAAG,WAAU;kCAAsD;;;;;;kCACpE,6LAAC;wBAAE,WAAU;kCAAwC;;;;;;;;;;;;YAKxD,6BACG,6LAAC,oIAAI;gBAAC,WAAU;0BACZ,cAAA,6LAAC,2IAAW;oBAAC,WAAU;8BACnB,cAAA,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,sOAAW;gCAAC,WAAU;;;;;;0CACvB,6LAAC;gCAAK,WAAU;0CAAW;;;;;;;;;;;;;;;;;;;;;;YAM1C,6BACG,6LAAC,oIAAI;gBAAC,WAAU;0BACZ,cAAA,6LAAC,2IAAW;oBAAC,WAAU;8BACnB,cAAA,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,sOAAW;gCAAC,WAAU;;;;;;0CACvB,6LAAC;gCAAK,WAAU;0CAAW;;;;;;;;;;;;;;;;;;;;;;0BAM3C,6LAAC;gBAAI,WAAU;;kCAEX,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC,oIAAI;;8CACD,6LAAC,0IAAU;8CACP,cAAA,6LAAC,yIAAS;wCAAC,WAAU;;0DACjB,6LAAC,yNAAQ;gDAAC,WAAU;;;;;;4CAAY;;;;;;;;;;;;8CAIxC,6LAAC,2IAAW;oCAAC,WAAU;8CAEnB,cAAA,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAI,WAAU;;kEACX,6LAAC,yNAAQ;wDAAC,WAAU;;;;;;kEACpB,6LAAC;;0EACG,6LAAC;gEAAE,WAAU;0EAAsB;;;;;;0EACnC,6LAAC;gEAAE,WAAU;0EAA4C,aAAa,IAAI;;;;;;;;;;;;;;;;;;0DAIlF,6LAAC;gDAAI,WAAU;;kEACX,6LAAC,8MAAI;wDAAC,WAAU;;;;;;kEAChB,6LAAC;;0EACG,6LAAC;gEAAE,WAAU;0EAAsB;;;;;;0EACnC,6LAAC;gEAAE,WAAU;0EACR,aAAa,OAAO,IAAI;;;;;;;;;;;;;;;;;;0DAKrC,6LAAC;gDAAI,WAAU;;kEACX,6LAAC,6MAAI;wDAAC,WAAU;;;;;;kEAChB,6LAAC;;0EACG,6LAAC;gEAAE,WAAU;0EAAsB;;;;;;0EACnC,6LAAC;gEAAE,WAAU;0EACR,aAAa,mBAAmB,IAAI;;;;;;;;;;;;;;;;;;0DAKjD,6LAAC;gDAAI,WAAU;;kEACX,6LAAC,mNAAM;wDAAC,WAAU;;;;;;kEAClB,6LAAC;;0EACG,6LAAC;gEAAE,WAAU;0EAAsB;;;;;;0EACnC,6LAAC;gEAAI,WAAU;;kFACX,6LAAC,sIAAK;wEAAC,SAAS,aAAa,KAAK,GAAG,YAAY;kFAC5C,aAAa,KAAK,GAAG,QAAQ;;;;;;kFAElC,6LAAC,sIAAK;wEAAC,SAAS,aAAa,QAAQ,GAAG,YAAY;kFAC/C,aAAa,QAAQ,GAAG,WAAW;;;;;;kFAExC,6LAAC,sIAAK;wEAAC,SAAS,aAAa,MAAM,GAAG,YAAY;kFAC7C,aAAa,MAAM,GAAG,SAAS;;;;;;;;;;;;;;;;;;;;;;;;0DAMhD,6LAAC;gDAAI,WAAU;;kEACX,6LAAC,gNAAK;wDAAC,WAAU;;;;;;kEACjB,6LAAC;;0EACG,6LAAC;gEAAE,WAAU;0EAAsB;;;;;;0EACnC,6LAAC;gEAAK,WAAU;0EACX,aAAa,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAUtD,6LAAC;wBAAI,WAAU;;4BAEV,aAAa,QAAQ,IAAI,aAAa,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC,2CAC3D,6LAAC,oIAAI;;kDACD,6LAAC,0IAAU;kDACP,cAAA,6LAAC,yIAAS;4CAAC,WAAU;;8DACjB,6LAAC,mNAAM;oDAAC,WAAU;;;;;;gDAAY;;;;;;;;;;;;kDAItC,6LAAC,2IAAW;;4CAEP,wCACG,6LAAC;gDAAI,WAAU;;kEACX,6LAAC;wDAAI,WAAU;;0EACX,6LAAC,sOAAW;gEAAC,WAAU;;;;;;0EACvB,6LAAC;gEAAK,WAAU;;oEAAsB;oEACH,aAAa,OAAO,CAAC,MAAM;oEAAC;oEAAE;oEAAuB;;;;;;;;;;;;;kEAG5F,6LAAC;wDAAE,WAAU;kEAAuD;;;;;;;;;;;;0DAM5E,6LAAC;gDAAI,WAAU;0DACV,aAAa,QAAQ,CAAC,GAAG,CAAC,CAAC,SAAS,sBACjC,6LAAC;wDAAgB,WAAU;;0EACvB,6LAAC;gEAAI,WAAU;;kFACX,6LAAC,sIAAK;wEAAC,SAAS,0BAA0B,QAAQ,WAAW;wEAAG,WAAU;kFACrE,2BAA2B,QAAQ,WAAW;;;;;;kFAEnD,6LAAC;wEAAI,WAAU;;0FACX,6LAAC,sIAAK;gFAAC,SAAS,QAAQ,QAAQ,GAAG,YAAY;gFAAa,WAAU;0FACjE,QAAQ,QAAQ,GAAG,WAAW;;;;;;4EAElC,QAAQ,OAAO,kBACZ,6LAAC,sIAAK;gFAAC,SAAQ;gFAAU,WAAU;0FAAU;;;;;;;;;;;;;;;;;;0EAIzD,6LAAC;gEAAI,WAAU;;kFACX,6LAAC;wEAAI,WAAU;;0FACX,6LAAC;gFAAK,WAAU;0FAAmC;;;;;;0FACnD,6LAAC;gFAAK,WAAU;0FAAe,QAAQ,UAAU;;;;;;;;;;;;kFAErD,6LAAC;wEAAI,WAAU;;0FACX,6LAAC;gFAAK,WAAU;0FAAmC;;;;;;0FACnD,6LAAC;gFAAK,WAAU;0FACX,QAAQ,UAAU,GACb,IAAI,KAAK,QAAQ,UAAU,EAAE,kBAAkB,KAC/C;;;;;;;;;;;;;;;;;;;uDAxBZ;;;;;;;;;;;;;;;;;;;;;;0CAqC9B,6LAAC,oIAAI;;kDACD,6LAAC,0IAAU;kDACP,cAAA,6LAAC,yIAAS;sDAAC;;;;;;;;;;;kDAEf,6LAAC,2IAAW;kDACR,cAAA,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAI,WAAU;sEACV,aAAa,OAAO,CAAC,MAAM;;;;;;sEAEhC,6LAAC;4DAAI,WAAU;sEAAuD;;;;;;;;;;;;8DAE1E,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAI,WAAU;sEACV,aAAa,OAAO,CAAC,MAAM,CAAC,CAAC,IAAc,EAAE,QAAQ,EAAE,MAAM;;;;;;sEAElE,6LAAC;4DAAI,WAAU;sEAAyD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAShG,6LAAC,oIAAI;;kCACD,6LAAC,0IAAU;wBAAC,WAAU;;0CAClB,6LAAC,yIAAS;gCAAC,WAAU;;kDACjB,6LAAC,gNAAK;wCAAC,WAAU;;;;;;oCAAY;;;;;;;4BAGhC,aAAa,KAAK,IAAI,aAAa,QAAQ,kBACxC,6LAAC;gCAAI,WAAU;;kDACX,6LAAC,wIAAM;wCACH,SAAS,IAAM,uBAAuB;wCACtC,UAAU;wCACV,WAAU;;0DAEV,6LAAC,6MAAI;gDAAC,WAAU;;;;;;4CAAY;;;;;;;oCAG/B,wCACG,6LAAC;wCAAK,WAAU;;4CAA2C;4CACzE,aAAa,OAAO,CAAC,MAAM;4CAAC;4CAAE;4CAAuB;;;;;;;;;;;;;;;;;;;kCAOvD,6LAAC,2IAAW;wBAAC,WAAU;;4BAClB,kCACG,6LAAC;gCAAI,WAAU;;;;;;0CAGnB,6LAAC,wIAAS;gCACN,MAAM,aAAa,OAAO,CAAC,GAAG,CAAC,CAAA,SAAU;gCACzC,SAAS;gCACT,WAAU;gCACV,aAAa;gCACb,YAAY,KAAK,IAAI,CAAC,aAAa,OAAO,CAAC,MAAM,GAAG;gCACpD,cAAc;gCACd,cAAc;gCACd,sBAAsB,CAAC;oCACnB,gBAAgB;oCAChB,eAAe;gCACnB;gCACA,YAAY,CAAC;oCACT,MAAM,SAAS;oCACf,mBAAmB;gCACvB;gCACA,cAAc,mBAAmB;oCAAC;iCAAiB,GAAG,EAAE;gCACxD,gBAAgB;;;;;;;;;;;;;;;;;;YAM3B,oCACG,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC,oIAAI;oBAAC,WAAU;;sCACZ,6LAAC,0IAAU;sCACP,cAAA,6LAAC,yIAAS;gCAAC,WAAU;;kDACjB,6LAAC,sOAAW;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;sCAI3C,6LAAC,2IAAW;4BAAC,WAAU;;8CACnB,6LAAC;oCAAE,WAAU;;wCAA2C;sDACpB,6LAAC;4CAAK,WAAU;;gDAAgB;gDAAO,mBAAmB,UAAU;gDAAC;;;;;;;wCAAa;;;;;;;8CAEtH,6LAAC;oCAAE,WAAU;8CAAyC;;;;;;8CAGtD,6LAAC;oCAAI,WAAU;;sDACX,6LAAC,wIAAM;4CACH,SAAQ;4CACR,MAAK;4CACL,SAAS,IAAM,sBAAsB;sDACxC;;;;;;sDAGD,6LAAC,wIAAM;4CACH,SAAQ;4CACR,MAAK;4CACL,SAAS;gDACL,IAAI,oBAAoB;oDACpB,aAAa,mBAAmB,QAAQ;oDACxC,sBAAsB;gDAC1B;4CACJ;4CACA,WAAU;sDACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YASpB,4BACG,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC,oIAAI;oBAAC,WAAU;;sCACZ,6LAAC,0IAAU;;8CACP,6LAAC,yIAAS;oCAAC,WAAU;;sDACjB,6LAAC,sNAAI;4CAAC,WAAU;;;;;;wCAAY;yCACP,qBAAA,WAAW,MAAM,cAAjB,yCAAA,mBAAmB,WAAW;;;;;;;8CAEvD,6LAAC;oCAAE,WAAU;8CAAwB;;;;;;;;;;;;sCAIzC,6LAAC,2IAAW;4BAAC,WAAU;;gCAClB,CAAC,aAAa,YAAY,mBACvB,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC;wCAAI,WAAU;;0DACX,6LAAC,sOAAW;gDAAC,WAAU;;;;;;0DACvB,6LAAC;gDAAK,WAAU;0DAAW,aAAa;;;;;;;;;;;;;;;;;8CAMpD,6LAAC;oCAAI,WAAU;;sDAEX,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAG,WAAU;;8EACV,6LAAC,yNAAQ;oEAAC,WAAU;;;;;;gEAAY;;;;;;;sEAIpC,6LAAC;4DAAK,UAAU,CAAC;gEACb,EAAE,cAAc;gEAChB,MAAM,WAAW,IAAI,SAAS,EAAE,aAAa;gEAC7C,MAAM,WAAW;oEACb,aAAa,SAAS,GAAG,CAAC;oEAC1B,UAAU,WAAW,MAAM,CAAE,QAAQ;oEACrC,WAAW,WAAW,MAAM,CAAE,SAAS;oEACvC,SAAS,WAAW,MAAM,CAAE,OAAO;oEACnC,aAAa,SAAS,SAAS,GAAG,CAAC;gEACvC;gEACA,qBAAqB,WAAW,MAAM,CAAE,QAAQ,EAAE;4DACtD;4DAAG,WAAU;;8EAET,6LAAC;oEAAI,WAAU;;sFACX,6LAAC;4EAAM,WAAU;sFAAsB;;;;;;sFACvC,6LAAC;4EACG,MAAK;4EACL,MAAK;4EACL,YAAY,GAAE,sBAAA,WAAW,MAAM,cAAjB,0CAAA,oBAAmB,WAAW;4EAC5C,WAAU;4EACV,QAAQ;;;;;;;;;;;;8EAIhB,6LAAC;oEAAI,WAAU;;sFACX,6LAAC;4EAAI,WAAU;sFAA2B;;;;;;sFAC1C,6LAAC;4EAAI,WAAU;;8FACX,6LAAC;oFAAI,WAAU;;sGACX,6LAAC;4FAAK,WAAU;sGAAgB;;;;;;sGAChC,6LAAC;4FAAK,WAAU;uGAAoC,sBAAA,WAAW,MAAM,cAAjB,0CAAA,oBAAmB,QAAQ;;;;;;;;;;;;8FAEnF,6LAAC;oFAAI,WAAU;;sGACX,6LAAC;4FAAK,WAAU;sGAAgB;;;;;;sGAChC,6LAAC;4FAAK,WAAU;uGAAoC,sBAAA,WAAW,MAAM,cAAjB,0CAAA,oBAAmB,UAAU;;;;;;;;;;;;8FAErF,6LAAC;oFAAI,WAAU;;sGACX,6LAAC;4FAAK,WAAU;sGAAgB;;;;;;sGAChC,6LAAC,sIAAK;4FAAC,SAAS,EAAA,sBAAA,WAAW,MAAM,cAAjB,0CAAA,oBAAmB,QAAQ,IAAG,YAAY;sGACrD,EAAA,sBAAA,WAAW,MAAM,cAAjB,0CAAA,oBAAmB,QAAQ,IAAG,WAAW;;;;;;;;;;;;8FAGlD,6LAAC;oFAAI,WAAU;;sGACX,6LAAC;4FAAK,WAAU;sGAAgB;;;;;;sGAChC,6LAAC,sIAAK;4FAAC,SAAS,EAAA,sBAAA,WAAW,MAAM,cAAjB,0CAAA,oBAAmB,MAAM,IAAG,YAAY;sGACnD,EAAA,sBAAA,WAAW,MAAM,cAAjB,0CAAA,oBAAmB,MAAM,IAAG,YAAY;;;;;;;;;;;;;;;;;;;;;;;;8EAMzD,6LAAC,wIAAM;oEACH,MAAK;oEACL,UAAU;oEACV,WAAU;8EAET,8BACG;;0FACI,6LAAC,+NAAO;gFAAC,WAAU;;;;;;4EAA8B;;uFAIrD;;;;;;;;;;;;;;;;;;8DAOhB,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAG,WAAU;;8EACV,6LAAC,mNAAM;oEAAC,WAAU;;;;;;gEAAY;;;;;;;sEAGlC,6LAAC;4DAAI,WAAU;;8EACX,6LAAC,wIAAM;oEACH,MAAK;oEACL,SAAQ;oEACR,SAAS,IAAM,4BAA4B,WAAW,MAAM,CAAE,QAAQ,EAAE,WAAW,MAAM,CAAE,WAAW;oEAEtG,WAAU;;sFAEV,6LAAC,6MAAI;4EAAC,WAAU;;;;;;wEAAiB;;;;;;;8EAGrC,6LAAC,wIAAM;oEACH,MAAK;oEACL,SAAQ;oEACR,SAAS;wEACL,sBAAsB;4EAClB,QAAQ;4EACR,UAAU,WAAW,MAAM,CAAE,QAAQ;4EACrC,YAAY,WAAW,MAAM,CAAE,WAAW;wEAC9C;wEACA,cAAc;oEAClB;oEACA,WAAU;;sFAEV,6LAAC,uNAAM;4EAAC,WAAU;;;;;;wEAAiB;;;;;;;;;;;;;;;;;;;;;;;;;sDAQnD,6LAAC;4CAAI,WAAU;sDACX,cAAA,6LAAC;gDAAI,WAAU;;kEACX,6LAAC;wDAAI,WAAU;;0EACX,6LAAC;gEAAG,WAAU;;kFACV,6LAAC,mNAAM;wEAAC,WAAU;;;;;;oEAAY;;;;;;;0EAGlC,6LAAC;gEAAK,WAAU;;oEACX,EAAA,sBAAA,WAAW,MAAM,cAAjB,2CAAA,8BAAA,oBAAmB,QAAQ,cAA3B,kDAAA,4BAA6B,MAAM,KAAI;oEAAE;;;;;;;;;;;;;oDAIjD,EAAA,sBAAA,WAAW,MAAM,cAAjB,0CAAA,oBAAmB,QAAQ,KAAI,WAAW,MAAM,CAAC,QAAQ,CAAC,MAAM,GAAG,kBAChE,6LAAC;wDAAI,WAAU;kEACV,WAAW,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;gEACP;4DAAtB,MAAM,aAAa,AAAC,GAAiC,QAA/B,qBAAA,WAAW,MAAM,cAAjB,yCAAA,mBAAmB,QAAQ,EAAC,KAAc,OAAX,QAAQ,EAAE;4DAC/D,MAAM,aAAa,gBAAgB,GAAG,CAAC;4DAEvC,qBACI,6LAAC;gEAAqB,WAAU;;kFAC5B,6LAAC;wEAAI,WAAU;;0FACX,6LAAC,sIAAK;gFAAC,SAAS,sBAAsB,QAAQ,WAAW;0FACpD,mBAAmB,QAAQ,WAAW;;;;;;0FAE3C,6LAAC;gFAAI,WAAU;;oFACV,4BACG,6LAAC,+NAAO;wFAAC,WAAU;;;;;;kGAEvB,6LAAC,wIAAM;wFACH,SAAQ;wFACR,MAAK;wFACL,SAAS,IAAM,oBAAoB,WAAW,MAAM,CAAE,QAAQ,EAAE,QAAQ,EAAE;wFAC1E,UAAU;wFACV,WAAU;kGAEV,cAAA,6LAAC,uNAAM;4FAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;kFAM9B,6LAAC;wEAAI,WAAU;kFACV,QAAQ,gBAAgB,iBACrB;;8FACI,6LAAC,6OAAW;oFAAC,WAAU;;;;;;8FACvB,6LAAC;oFAAK,WAAU;;wFAA6C;wFAC5C,QAAQ,WAAW,GAAG,cAAc;;;;;;;;yGAIzD;;8FACI,6LAAC,sOAAW;oFAAC,WAAU;;;;;;8FACvB,6LAAC;oFAAK,WAAU;8FAA+C;;;;;;;;;;;;;oEAQ1E,CAAC,QAAQ,gBAAgB,IAAI,QAAQ,UAAU,kBAC5C,6LAAC,wIAAM;wEACH,SAAQ;wEACR,MAAK;wEACL,SAAS,IAAM,OAAO,IAAI,CAAC,QAAQ,UAAU,EAAG;wEAChD,WAAU;kFACb;;;;;;kFAML,6LAAC;wEAAI,WAAU;;0FACX,6LAAC;gFAAI,WAAU;;kGACX,6LAAC;kGAAK;;;;;;kGACN,6LAAC;wFAAM,WAAU;;0GACb,6LAAC;gGACG,MAAK;gGACL,SAAS,QAAQ,QAAQ;gGACzB,UAAU,CAAC;oGACP,oBAAoB,WAAW,MAAM,CAAE,QAAQ,EAAE,QAAQ,EAAE,EAAE;wGACzD,UAAU,EAAE,MAAM,CAAC,OAAO;wGAC1B,WAAW;wGACX,SAAS,QAAQ,OAAO;wGACxB,aAAa,QAAQ,WAAW;oGACpC;gGACJ;gGACA,UAAU;gGACV,WAAU;;;;;;0GAEd,6LAAC;gGAAI,WAAU;;;;;;;;;;;;;;;;;;0FAGvB,6LAAC;gFAAI,WAAU;;kGACX,6LAAC;kGAAK;;;;;;kGACN,6LAAC;wFAAM,WAAU;;0GACb,6LAAC;gGACG,MAAK;gGACL,SAAS,QAAQ,OAAO;gGACxB,UAAU,CAAC;oGACP,oBAAoB,WAAW,MAAM,CAAE,QAAQ,EAAE,QAAQ,EAAE,EAAE;wGACzD,UAAU,QAAQ,QAAQ;wGAC1B,WAAW;wGACX,SAAS,EAAE,MAAM,CAAC,OAAO;wGACzB,aAAa,QAAQ,WAAW;oGACpC;gGACJ;gGACA,UAAU;gGACV,WAAU;;;;;;0GAEd,6LAAC;gGAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;kFAM3B,6LAAC;wEAAI,WAAU;;0FACX,6LAAC;;oFAAK;oFAAU,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB;;;;;;;0FAC9D,6LAAC;;oFAAK;oFAAU,QAAQ,SAAS,GAAG,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB,KAAK;;;;;;;;;;;;;;+DAnGrF,QAAQ,EAAE;;;;;wDAuG5B;;;;;6EAGJ,6LAAC;wDAAI,WAAU;;0EACX,6LAAC,mNAAM;gEAAC,WAAU;;;;;;0EAClB,6LAAC;gEAAE,WAAU;0EAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8CAQ3C,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC,wIAAM;wCACH,SAAQ;wCACR,SAAS;4CACL,cAAc;4CACd,aAAa;4CACb,gBAAgB;wCACpB;kDACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;YASpB,yCACG,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC,oIAAI;oBAAC,WAAU;;sCACZ,6LAAC,0IAAU;;8CACP,6LAAC,yIAAS;oCAAC,WAAU;;sDACjB,6LAAC,6MAAI;4CAAC,WAAU;;;;;;wCAAY;wCACb,wBAAwB,UAAU;;;;;;;8CAErD,6LAAC;oCAAE,WAAU;;wCAAwB;wCAC3B,wBAAwB,WAAW,GAAG;wCAAE;;;;;;;;;;;;;sCAGtD,6LAAC,2IAAW;4BAAC,WAAU;;8CAEnB,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAW,AAAC,mBAA0F,OAAxE,wBAAwB,WAAW,IAAI,IAAI,gBAAgB;;8DAC1F,6LAAC;oDAAI,WAAW,AAAC,wEAEhB,OADG,wBAAwB,WAAW,IAAI,IAAI,iCAAiC;8DAE5E,cAAA,6LAAC,6MAAI;wDAAC,WAAW,AAAC,WAAuF,OAA7E,wBAAwB,WAAW,IAAI,IAAI,kBAAkB;;;;;;;;;;;8DAE7F,6LAAC;oDAAG,WAAU;8DAAwB;;;;;;;;;;;;sDAE1C,6LAAC;4CAAI,WAAW,AAAC,mBAA0F,OAAxE,wBAAwB,WAAW,IAAI,IAAI,gBAAgB;;8DAC1F,6LAAC;oDAAI,WAAW,AAAC,wEAEhB,OADG,wBAAwB,WAAW,IAAI,IAAI,qCAAqC;8DAEhF,cAAA,6LAAC,6MAAI;wDAAC,WAAW,AAAC,WAAyF,OAA/E,wBAAwB,WAAW,IAAI,IAAI,oBAAoB;;;;;;;;;;;8DAE/F,6LAAC;oDAAG,WAAU;8DAAwB;;;;;;;;;;;;sDAE1C,6LAAC;4CAAI,WAAW,AAAC,mBAA0F,OAAxE,wBAAwB,WAAW,IAAI,IAAI,gBAAgB;;8DAC1F,6LAAC;oDAAI,WAAW,AAAC,wEAEhB,OADG,wBAAwB,WAAW,IAAI,IAAI,mCAAmC;8DAE9E,cAAA,6LAAC,6OAAW;wDAAC,WAAW,AAAC,WAAwF,OAA9E,wBAAwB,WAAW,IAAI,IAAI,mBAAmB;;;;;;;;;;;8DAErG,6LAAC;oDAAG,WAAU;8DAAwB;;;;;;;;;;;;;;;;;;gCAK7C,wBAAwB,WAAW,KAAK,mBACrC,6LAAC,oIAAI;;sDACD,6LAAC,0IAAU;;8DACP,6LAAC,yIAAS;8DAAC;;;;;;8DACX,6LAAC,+IAAe;8DAAC;;;;;;;;;;;;sDAErB,6LAAC,2IAAW;4CAAC,WAAU;;8DACnB,6LAAC;oDACG,OAAO,wBAAwB,WAAW;oDAC1C,UAAU,CAAC,IAAM,2BAA2B,CAAA,OAAQ,OAAO;gEACvD,GAAG,IAAI;gEACP,aAAa,SAAS,EAAE,MAAM,CAAC,KAAK;4DACxC,IAAI;oDACJ,WAAU;;sEAEV,6LAAC;4DACG,OAAO;4DACP,QAAQ,EAAE,yBAAA,oCAAA,6BAAA,aAAc,OAAO,CAC1B,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,wBAAwB,QAAQ,eADpD,kDAAA,sCAAA,2BAEJ,QAAQ,cAFJ,0DAAA,oCAEM,IAAI,CAAC,CAAA,UAAW,QAAQ,WAAW,KAAK;;gEAE3D;gEACc,CAAA,yBAAA,oCAAA,8BAAA,aAAc,OAAO,CAC/B,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,wBAAwB,QAAQ,eAD/C,mDAAA,uCAAA,4BAET,QAAQ,cAFC,2DAAA,qCAEC,IAAI,CAAC,CAAA,UAAW,QAAQ,WAAW,KAAK,MAClD,uBAAuB;;;;;;;sEAG7B,6LAAC;4DACG,OAAO;4DACP,QAAQ,EAAE,yBAAA,oCAAA,8BAAA,aAAc,OAAO,CAC1B,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,wBAAwB,QAAQ,eADpD,mDAAA,uCAAA,4BAEJ,QAAQ,cAFJ,2DAAA,qCAEM,IAAI,CAAC,CAAA,UAAW,QAAQ,WAAW,KAAK;;gEAE3D;gEACwB,CAAA,yBAAA,oCAAA,8BAAA,aAAc,OAAO,CACzC,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,wBAAwB,QAAQ,eADrC,mDAAA,uCAAA,4BAEnB,QAAQ,cAFW,2DAAA,qCAET,IAAI,CAAC,CAAA,UAAW,QAAQ,WAAW,KAAK,MAClD,uBAAuB;;;;;;;sEAG7B,6LAAC;4DACG,OAAO;4DACP,QAAQ,EAAE,yBAAA,oCAAA,8BAAA,aAAc,OAAO,CAC1B,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,wBAAwB,QAAQ,eADpD,mDAAA,uCAAA,4BAEJ,QAAQ,cAFJ,2DAAA,qCAEM,IAAI,CAAC,CAAA,UAAW,QAAQ,WAAW,KAAK;;gEAE3D;gEACe,CAAA,yBAAA,oCAAA,8BAAA,aAAc,OAAO,CAChC,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,wBAAwB,QAAQ,eAD9C,mDAAA,uCAAA,4BAEV,QAAQ,cAFE,2DAAA,qCAEA,IAAI,CAAC,CAAA,UAAW,QAAQ,WAAW,KAAK,MAClD,uBAAuB;;;;;;;;;;;;;8DAIjC,6LAAC;oDAAE,WAAU;8DAAwB;;;;;;;;;;;;;;;;;;gCAOhD,wBAAwB,WAAW,KAAK,mBACrC,6LAAC,oIAAI;;sDACD,6LAAC,0IAAU;;8DACP,6LAAC,yIAAS;8DAAC;;;;;;8DACX,6LAAC,+IAAe;8DAAC;;;;;;;;;;;;sDAErB,6LAAC,2IAAW;4CAAC,WAAU;;gDAClB,wBAAwB,OAAO,kBAC5B,6LAAC;oDAAI,WAAU;;sEACX,6LAAC,+NAAO;4DAAC,WAAU;;;;;;sEACnB,6LAAC;4DAAE,WAAU;sEAAc;;;;;;;;;;;;gDAIlC,wBAAwB,aAAa,IAAI,CAAC,wBAAwB,gBAAgB,kBAC/E,6LAAC;oDAAI,WAAU;;sEACX,6LAAC,yOAAY;4DAAC,WAAU;;;;;;sEACxB,6LAAC;4DAAE,WAAU;sEAAc;;;;;;sEAC3B,6LAAC;4DAAE,WAAU;sEAA6B;;;;;;;;;;;;;;;;;;;;;;;;gCAS7D,wBAAwB,WAAW,KAAK,mBACrC,6LAAC,oIAAI;;sDACD,6LAAC,0IAAU;;8DACP,6LAAC,yIAAS;8DAAC;;;;;;8DACX,6LAAC,+IAAe;8DAAC;;;;;;;;;;;;sDAErB,6LAAC,2IAAW;4CAAC,WAAU;sDACnB,cAAA,6LAAC;gDAAI,WAAU;;kEACX,6LAAC,6OAAW;wDAAC,WAAU;;;;;;kEACvB,6LAAC;wDAAE,WAAU;kEAA2B;;;;;;kEACxC,6LAAC;wDAAE,WAAU;;4DACR,mBAAmB,wBAAwB,WAAW;4DAAE;4DAAyC,wBAAwB,UAAU;4DAAC;;;;;;;;;;;;;;;;;;;;;;;;gCAQxJ,wBAAwB,KAAK,kBAC1B,6LAAC;oCAAI,WAAU;;sDACX,6LAAC,sOAAW;4CAAC,WAAU;;;;;;wCACtB,wBAAwB,KAAK;;;;;;;8CAKtC,6LAAC;oCAAI,WAAU;;wCACV,wBAAwB,WAAW,KAAK,mBACrC,6LAAC,wIAAM;4CACH,SAAS;4CACT,UAAU,wBAAwB,OAAO;sDAC5C;;;;;;wCAKJ,wBAAwB,WAAW,KAAK,mBACrC,6LAAC,wIAAM;4CAAC,SAAS,IAAM,2BAA2B;sDAAO;;;;;;sDAK7D,6LAAC,wIAAM;4CACH,SAAQ;4CACR,SAAS,IAAM,2BAA2B;4CAC1C,UAAU,wBAAwB,OAAO;sDAExC,wBAAwB,WAAW,KAAK,IAAI,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAY3F;GAjpDwB;;QACW,kLAAO;QACQ,0IAAS;QAKxC,kJAAS;QACsE,8IAAW;QAO3D,8IAAW;;;KAfrC","debugId":null}}]
}