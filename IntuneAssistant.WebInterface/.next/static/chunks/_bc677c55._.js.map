{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/app/onboarding/page.tsx"],"sourcesContent":["// app/onboarding/page.tsx\n'use client';\nimport { useEffect, useState, Suspense } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport { Loader2, CheckCircle, AlertCircle } from 'lucide-react';\n\ninterface ConsentMessage {\n    type: 'CONSENT_SUCCESS' | 'CONSENT_ERROR';\n    adminConsent?: string | null;\n    state?: string | null;\n    tenantId?: string | null;\n    code?: string | null;\n    result?: unknown;\n    searchParams?: Record<string, string>;\n    error?: string | null;\n    errorDescription?: string | null;\n}\n\nfunction OnboardingCallbackContent() {\n    const searchParams = useSearchParams();\n    const [status, setStatus] = useState<'processing' | 'success' | 'error'>('processing');\n    const [message, setMessage] = useState<string>('');\n\n    useEffect(() => {\n        const processCallback = async () => {\n            const error = searchParams.get('error');\n            const errorDescription = searchParams.get('error_description');\n            const adminConsent = searchParams.get('admin_consent');\n            const state = searchParams.get('state');\n            const tenantId = searchParams.get('tenant');\n            const code = searchParams.get('code');\n\n            console.log('ðŸ”µ Onboarding callback received:', {\n                error,\n                errorDescription,\n                adminConsent,\n                state,\n                tenantId,\n                code\n            });\n\n            const sendMessageToParent = (messageData: ConsentMessage) => {\n                if (!window.opener || window.opener.closed) {\n                    console.log('No opener window available');\n                    return;\n                }\n\n                try {\n                    window.opener.postMessage(messageData, window.location.origin);\n                    console.log('Message sent with same origin');\n                } catch (error1) {\n                    try {\n                        const parentOrigin = window.opener.location.origin;\n                        window.opener.postMessage(messageData, parentOrigin);\n                        console.log('Message sent with parent origin');\n                    } catch (error2) {\n                        try {\n                            window.opener.postMessage(messageData, '*');\n                            console.log('Message sent with wildcard origin');\n                        } catch (error3) {\n                            console.error('Failed to send message to parent window:', error3);\n                        }\n                    }\n                }\n            };\n\n            if (error) {\n                setStatus('error');\n                setMessage(errorDescription || error || 'Admin consent was denied or failed.');\n\n                sendMessageToParent({\n                    type: 'CONSENT_ERROR',\n                    error: error,\n                    errorDescription: errorDescription\n                });\n                return;\n            }\n\n            // DO NOT call the server callback here â€” let customer-onboarding handle it.\n            if (adminConsent === 'True' || code) {\n                setStatus('success');\n                setMessage('Admin consent has been received. Processing will continue in the parent window.');\n\n                sendMessageToParent({\n                    type: 'CONSENT_SUCCESS',\n                    adminConsent: adminConsent,\n                    state: state,\n                    tenantId: tenantId,\n                    code: code,\n                    searchParams: Object.fromEntries(searchParams.entries())\n                });\n            } else {\n                setStatus('error');\n                setMessage('Unexpected response from consent flow');\n\n                sendMessageToParent({\n                    type: 'CONSENT_ERROR',\n                    error: 'unknown_response',\n                    errorDescription: 'Unexpected response from consent flow'\n                });\n            }\n        };\n\n        processCallback();\n    }, [searchParams]);\n\n    useEffect(() => {\n        if (status !== 'processing') {\n            const timer = setTimeout(() => {\n                console.log('Process completed, window should be closed by parent or user');\n            }, 3000);\n\n            return () => clearTimeout(timer);\n        }\n    }, [status]);\n\n    return (\n        <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n            <div className=\"text-center max-w-md mx-auto p-6\">\n                {status === 'processing' && (\n                    <div className=\"space-y-4\">\n                        <Loader2 className=\"h-8 w-8 animate-spin mx-auto text-blue-600\" />\n                        <h2 className=\"text-xl font-semibold text-gray-900\">Processing onboarding...</h2>\n                        <p className=\"text-gray-600\">Please wait while we complete your setup.</p>\n                    </div>\n                )}\n\n                {status === 'success' && (\n                    <div className=\"space-y-4\">\n                        <CheckCircle className=\"h-12 w-12 mx-auto text-green-600\" />\n                        <h2 className=\"text-xl font-semibold text-gray-900\">Onboarding Complete!</h2>\n                        <p className=\"text-gray-600\">{message}</p>\n                        <p className=\"text-sm text-gray-500\">\n                            This window will close automatically, or you can close it manually.\n                        </p>\n                    </div>\n                )}\n\n                {status === 'error' && (\n                    <div className=\"space-y-4\">\n                        <AlertCircle className=\"h-12 w-12 mx-auto text-red-600\" />\n                        <h2 className=\"text-xl font-semibold text-gray-900\">Onboarding Failed</h2>\n                        <p className=\"text-gray-600\">{message}</p>\n                        <p className=\"text-sm text-gray-500\">\n                            You can close this window and try again.\n                        </p>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n\nexport default function OnboardingCallback() {\n    return (\n        <Suspense fallback={\n            <div className=\"flex items-center justify-center min-h-screen\">\n                <Loader2 className=\"h-8 w-8 animate-spin text-blue-600\" />\n            </div>\n        }>\n            <OnboardingCallbackContent />\n        </Suspense>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 296, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/loader-circle.js","sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/node_modules/lucide-react/src/icons/loader-circle.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }]];\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('loader-circle', __iconNode);\n\nexport default LoaderCircle;\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAuB;IAAC;QAAC,MAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,6BAAA,CAAA;YAA+B,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAC;CAAA;AAalG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,YAAA,CAAA,CAAA,KAAe,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,iKAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA","debugId":null}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/circle-check-big.js","sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/node_modules/lucide-react/src/icons/circle-check-big.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21.801 10A10 10 0 1 1 17 3.335', key: 'yps3ct' }],\n  ['path', { d: 'm9 11 3 3L22 4', key: '1pflzl' }],\n];\n\n/**\n * @component @name CircleCheckBig\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuODAxIDEwQTEwIDEwIDAgMSAxIDE3IDMuMzM1IiAvPgogIDxwYXRoIGQ9Im05IDExIDMgM0wyMiA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/circle-check-big\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleCheckBig = createLucideIcon('circle-check-big', __iconNode);\n\nexport default CircleCheckBig;\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAA,CAAA,CAAA,CAAuB;IAClC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAmC,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;IAChE;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAkB,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;CACjD;AAaA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,cAAA,CAAA,CAAA,KAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,iKAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAoB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA","debugId":null}},
    {"offset": {"line": 379, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/circle-alert.js","sources":["file:///Users/srozemuller/Repos/IntuneAssistant/IntuneAssistant.WebInterface/node_modules/lucide-react/src/icons/circle-alert.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['line', { x1: '12', x2: '12', y1: '8', y2: '12', key: '1pkeuh' }],\n  ['line', { x1: '12', x2: '12.01', y1: '16', y2: '16', key: '4dfq90' }],\n];\n\n/**\n * @component @name CircleAlert\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjgiIHkyPSIxMiIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMi4wMSIgeTE9IjE2IiB5Mj0iMTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-alert\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleAlert = createLucideIcon('circle-alert', __iconNode);\n\nexport default CircleAlert;\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAA,CAAA,CAAA,CAAuB;IAClC;QAAC,QAAA,CAAA;QAAU,CAAA;YAAE,EAAA,CAAA,CAAI,CAAA,CAAA,CAAA,CAAA;YAAM,CAAA,CAAA,CAAA,CAAI,IAAA,CAAA;YAAM,CAAA,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,GAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;IACzD;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAQ,CAAA;YAAE,CAAA,CAAA,EAAI,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,CAAA,CAAA,CAAA,CAAI,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,EAAA,CAAA,CAAI,CAAA,CAAA,CAAA,CAAA;YAAK,CAAA,CAAA,CAAA,CAAI,CAAA,CAAA,CAAA,CAAA;YAAM,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;IACjE;QAAC,MAAA,CAAA;QAAQ,CAAA;YAAE,EAAA,CAAA,CAAI,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,CAAA,CAAA,CAAA,CAAI,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAS,CAAA,CAAA,CAAA,CAAI,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,CAAA,CAAA,CAAA,CAAI,IAAA,CAAA;YAAM,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;CACvE;AAaA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,WAAA,CAAA,CAAA,KAAc,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,iKAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAgB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA","debugId":null}}]
}